(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{8329:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{O$:function(){return BigNumber}});var LogLevel,ErrorCode,LogLevel1,ErrorCode1,bn=__webpack_require__(4002),bn_default=__webpack_require__.n(bn);let version="logger/5.6.0",_permanentCensorErrors=!1,_censorErrors=!1,LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5},_logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{let missing=[];if(["NFD","NFC","NFKD","NFKC"].forEach(form=>{try{if("test"!=="test".normalize(form))throw Error("bad normalize")}catch(error){missing.push(form)}}),missing.length)throw Error("missing "+missing.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(error){return error.message}return null}let _normalizeError=_checkNormalize();(LogLevel=LogLevel1||(LogLevel1={})).DEBUG="DEBUG",LogLevel.INFO="INFO",LogLevel.WARNING="WARNING",LogLevel.ERROR="ERROR",LogLevel.OFF="OFF",(ErrorCode=ErrorCode1||(ErrorCode1={})).UNKNOWN_ERROR="UNKNOWN_ERROR",ErrorCode.NOT_IMPLEMENTED="NOT_IMPLEMENTED",ErrorCode.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",ErrorCode.NETWORK_ERROR="NETWORK_ERROR",ErrorCode.SERVER_ERROR="SERVER_ERROR",ErrorCode.TIMEOUT="TIMEOUT",ErrorCode.BUFFER_OVERRUN="BUFFER_OVERRUN",ErrorCode.NUMERIC_FAULT="NUMERIC_FAULT",ErrorCode.MISSING_NEW="MISSING_NEW",ErrorCode.INVALID_ARGUMENT="INVALID_ARGUMENT",ErrorCode.MISSING_ARGUMENT="MISSING_ARGUMENT",ErrorCode.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",ErrorCode.CALL_EXCEPTION="CALL_EXCEPTION",ErrorCode.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",ErrorCode.NONCE_EXPIRED="NONCE_EXPIRED",ErrorCode.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",ErrorCode.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",ErrorCode.TRANSACTION_REPLACED="TRANSACTION_REPLACED";let HEX="0123456789abcdef";class Logger{constructor(version){Object.defineProperty(this,"version",{enumerable:!0,value:version,writable:!1})}_log(logLevel,args){let level=logLevel.toLowerCase();null==LogLevels[level]&&this.throwArgumentError("invalid log level name","logLevel",logLevel),_logLevel>LogLevels[level]||console.log.apply(console,args)}debug(...args){this._log(Logger.levels.DEBUG,args)}info(...args){this._log(Logger.levels.INFO,args)}warn(...args){this._log(Logger.levels.WARNING,args)}makeError(message,code,params){if(_censorErrors)return this.makeError("censored error",code,{});code||(code=Logger.errors.UNKNOWN_ERROR),params||(params={});let messageDetails=[];Object.keys(params).forEach(key=>{let value=params[key];try{if(value instanceof Uint8Array){let hex="";for(let i=0;i<value.length;i++)hex=HEX[value[i]>>4]+HEX[15&value[i]];messageDetails.push(key+"=Uint8Array(0x"+hex+")")}else messageDetails.push(key+"="+JSON.stringify(value))}catch(error){messageDetails.push(key+"="+JSON.stringify(params[key].toString()))}}),messageDetails.push(`code=${code}`),messageDetails.push(`version=${this.version}`);let reason=message,url="";switch(code){case ErrorCode1.NUMERIC_FAULT:{url="NUMERIC_FAULT";let fault=message;switch(fault){case"overflow":case"underflow":case"division-by-zero":url+="-"+fault;break;case"negative-power":case"negative-width":url+="-unsupported";break;case"unbound-bitwise-result":url+="-unbound-result"}break}case ErrorCode1.CALL_EXCEPTION:case ErrorCode1.INSUFFICIENT_FUNDS:case ErrorCode1.MISSING_NEW:case ErrorCode1.NONCE_EXPIRED:case ErrorCode1.REPLACEMENT_UNDERPRICED:case ErrorCode1.TRANSACTION_REPLACED:case ErrorCode1.UNPREDICTABLE_GAS_LIMIT:url=code}url&&(message+=" [ See: https://links.ethers.org/v5-errors-"+url+" ]"),messageDetails.length&&(message+=" ("+messageDetails.join(", ")+")");let error=Error(message);return error.reason=reason,error.code=code,Object.keys(params).forEach(function(key){error[key]=params[key]}),error}throwError(message,code,params){throw this.makeError(message,code,params)}throwArgumentError(message,name,value){return this.throwError(message,Logger.errors.INVALID_ARGUMENT,{argument:name,value:value})}assert(condition,message,code,params){condition||this.throwError(message,code,params)}assertArgument(condition,message,name,value){condition||this.throwArgumentError(message,name,value)}checkNormalize(message){null==message&&(message="platform missing String.prototype.normalize"),_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(value,message){"number"==typeof value&&(null==message&&(message="value not safe"),(value<0||value>=9007199254740991)&&this.throwError(message,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:value}),value%1&&this.throwError(message,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:value}))}checkArgumentCount(count,expectedCount,message){message=message?": "+message:"",count<expectedCount&&this.throwError("missing argument"+message,Logger.errors.MISSING_ARGUMENT,{count:count,expectedCount:expectedCount}),count>expectedCount&&this.throwError("too many arguments"+message,Logger.errors.UNEXPECTED_ARGUMENT,{count:count,expectedCount:expectedCount})}checkNew(target,kind){(target===Object||null==target)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:kind.name})}checkAbstract(target,kind){target===kind?this.throwError("cannot instantiate abstract class "+JSON.stringify(kind.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:target.name,operation:"new"}):(target===Object||null==target)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:kind.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version)),_globalLogger}static setCensorship(censorship,permanent){if(!censorship&&permanent&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!censorship)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!censorship,_permanentCensorErrors=!!permanent}static setLogLevel(logLevel){let level=LogLevels[logLevel.toLowerCase()];if(null==level){Logger.globalLogger().warn("invalid log level - "+logLevel);return}_logLevel=level}static from(version){return new Logger(version)}}Logger.errors=ErrorCode1,Logger.levels=LogLevel1;let _version_version="bytes/5.6.1",logger=new Logger(_version_version);function isHexable(value){return!!value.toHexString}function isInteger(value){return"number"==typeof value&&value==value&&value%1==0}function lib_esm_isBytes(value){if(null==value)return!1;if(value.constructor===Uint8Array)return!0;if("string"==typeof value||!isInteger(value.length)||value.length<0)return!1;for(let i=0;i<value.length;i++){let v=value[i];if(!isInteger(v)||v<0||v>=256)return!1}return!0}function lib_esm_isHexString(value,length){return"string"==typeof value&&!!value.match(/^0x[0-9A-Fa-f]*$/)&&(!length||value.length===2+2*length)}let HexCharacters="0123456789abcdef";function hexlify(value,options){if(options||(options={}),"number"==typeof value){logger.checkSafeUint53(value,"invalid hexlify value");let hex="";for(;value;)hex=HexCharacters[15&value]+hex,value=Math.floor(value/16);return hex.length?(hex.length%2&&(hex="0"+hex),"0x"+hex):"0x00"}if("bigint"==typeof value)return(value=value.toString(16)).length%2?"0x0"+value:"0x"+value;if(options.allowMissingPrefix&&"string"==typeof value&&"0x"!==value.substring(0,2)&&(value="0x"+value),isHexable(value))return value.toHexString();if(lib_esm_isHexString(value))return value.length%2&&("left"===options.hexPad?value="0x0"+value.substring(2):"right"===options.hexPad?value+="0":logger.throwArgumentError("hex data is odd-length","value",value)),value.toLowerCase();if(lib_esm_isBytes(value)){let result="0x";for(let i=0;i<value.length;i++){let v=value[i];result+=HexCharacters[(240&v)>>4]+HexCharacters[15&v]}return result}return logger.throwArgumentError("invalid hexlify value","value",value)}let lib_esm_version_version="bignumber/5.6.2";var BN=bn_default().BN;let bignumber_logger=new Logger(lib_esm_version_version),_constructorGuard={},MAX_SAFE=9007199254740991,_warnedToStringRadix=!1;class BigNumber{constructor(constructorGuard,hex){constructorGuard!==_constructorGuard&&bignumber_logger.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=hex,this._isBigNumber=!0,Object.freeze(this)}fromTwos(value){return toBigNumber(toBN(this).fromTwos(value))}toTwos(value){return toBigNumber(toBN(this).toTwos(value))}abs(){return"-"===this._hex[0]?BigNumber.from(this._hex.substring(1)):this}add(other){return toBigNumber(toBN(this).add(toBN(other)))}sub(other){return toBigNumber(toBN(this).sub(toBN(other)))}div(other){let o=BigNumber.from(other);return o.isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(other)))}mul(other){return toBigNumber(toBN(this).mul(toBN(other)))}mod(other){let value=toBN(other);return value.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(value))}pow(other){let value=toBN(other);return value.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(value))}and(other){let value=toBN(other);return(this.isNegative()||value.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(value))}or(other){let value=toBN(other);return(this.isNegative()||value.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(value))}xor(other){let value=toBN(other);return(this.isNegative()||value.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(value))}mask(value){return(this.isNegative()||value<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(value))}shl(value){return(this.isNegative()||value<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(value))}shr(value){return(this.isNegative()||value<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(value))}eq(other){return toBN(this).eq(toBN(other))}lt(other){return toBN(this).lt(toBN(other))}lte(other){return toBN(this).lte(toBN(other))}gt(other){return toBN(this).gt(toBN(other))}gte(other){return toBN(this).gte(toBN(other))}isNegative(){return"-"===this._hex[0]}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch(error){throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return bignumber_logger.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?_warnedToStringRadix||(_warnedToStringRadix=!0,bignumber_logger.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?bignumber_logger.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):bignumber_logger.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(key){return{type:"BigNumber",hex:this.toHexString()}}static from(value){if(value instanceof BigNumber)return value;if("string"==typeof value)return value.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard,toHex(value)):value.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard,toHex(new BN(value))):bignumber_logger.throwArgumentError("invalid BigNumber string","value",value);if("number"==typeof value)return value%1&&throwFault("underflow","BigNumber.from",value),(value>=MAX_SAFE||value<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",value),BigNumber.from(String(value));let anyValue=value;if("bigint"==typeof anyValue)return BigNumber.from(anyValue.toString());if(lib_esm_isBytes(anyValue))return BigNumber.from(hexlify(anyValue));if(anyValue){if(anyValue.toHexString){let hex=anyValue.toHexString();if("string"==typeof hex)return BigNumber.from(hex)}else{let hex1=anyValue._hex;if(null==hex1&&"BigNumber"===anyValue.type&&(hex1=anyValue.hex),"string"==typeof hex1&&(lib_esm_isHexString(hex1)||"-"===hex1[0]&&lib_esm_isHexString(hex1.substring(1))))return BigNumber.from(hex1)}}return bignumber_logger.throwArgumentError("invalid BigNumber value","value",value)}static isBigNumber(value){return!!(value&&value._isBigNumber)}}function toHex(value){if("string"!=typeof value)return toHex(value.toString(16));if("-"===value[0])return("-"===(value=value.substring(1))[0]&&bignumber_logger.throwArgumentError("invalid hex","value",value),"0x00"===(value=toHex(value)))?value:"-"+value;if("0x"!==value.substring(0,2)&&(value="0x"+value),"0x"===value)return"0x00";for(value.length%2&&(value="0x0"+value.substring(2));value.length>4&&"0x00"===value.substring(0,4);)value="0x"+value.substring(4);return value}function toBigNumber(value){return BigNumber.from(toHex(value))}function toBN(value){let hex=BigNumber.from(value).toHexString();return"-"===hex[0]?new BN("-"+hex.substring(3),16):new BN(hex.substring(2),16)}function throwFault(fault,operation,value){let params={fault:fault,operation:operation};return null!=value&&(params.value=value),bignumber_logger.throwError(fault,Logger.errors.NUMERIC_FAULT,params)}},4002:function(module,__unused_webpack_exports,__webpack_require__){!function(module,exports){"use strict";function assert(val,msg){if(!val)throw Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number))return number;this.negative=0,this.words=null,this.length=0,this.red=null,null!==number&&(("le"===base||"be"===base)&&(endian=base,base=10),this._init(number||0,base||10,endian||"be"))}"object"==typeof module?module.exports=BN:exports.BN=BN,BN.BN=BN,BN.wordSize=26;try{Buffer="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:__webpack_require__(7784).Buffer}catch(e){}function parseHex4Bits(string,index){var c=string.charCodeAt(index);return c>=48&&c<=57?c-48:c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:void assert(!1,"Invalid character in "+string)}function parseHexByte(string,lowerBound,index){var r=parseHex4Bits(string,index);return index-1>=lowerBound&&(r|=parseHex4Bits(string,index-1)<<4),r}function parseBase(str,start,end,mul){for(var r=0,b=0,len=Math.min(str.length,end),i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul,b=c>=49?c-49+10:c>=17?c-17+10:c,assert(c>=0&&b<mul,"Invalid character"),r+=b}return r}function move(dest,src){dest.words=src.words,dest.length=src.length,dest.negative=src.negative,dest.red=src.red}if(BN.isBN=function(num){return num instanceof BN||null!==num&&"object"==typeof num&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)},BN.max=function(left,right){return left.cmp(right)>0?left:right},BN.min=function(left,right){return 0>left.cmp(right)?left:right},BN.prototype._init=function(number,base,endian){if("number"==typeof number)return this._initNumber(number,base,endian);if("object"==typeof number)return this._initArray(number,base,endian);"hex"===base&&(base=16),assert(base===(0|base)&&base>=2&&base<=36);var start=0;"-"===(number=number.toString().replace(/\s+/g,""))[0]&&(start++,this.negative=1),start<number.length&&(16===base?this._parseHex(number,start,endian):(this._parseBase(number,base,start),"le"===endian&&this._initArray(this.toArray(),base,endian)))},BN.prototype._initNumber=function(number,base,endian){number<0&&(this.negative=1,number=-number),number<67108864?(this.words=[67108863&number],this.length=1):number<4503599627370496?(this.words=[67108863&number,number/67108864&67108863],this.length=2):(assert(number<9007199254740992),this.words=[67108863&number,number/67108864&67108863,1],this.length=3),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initArray=function(number,base,endian){if(assert("number"==typeof number.length),number.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(number.length/3),this.words=Array(this.length);for(var j,w,i=0;i<this.length;i++)this.words[i]=0;var off=0;if("be"===endian)for(i=number.length-1,j=0;i>=0;i-=3)w=number[i]|number[i-1]<<8|number[i-2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);else if("le"===endian)for(i=0,j=0;i<number.length;i+=3)w=number[i]|number[i+1]<<8|number[i+2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);return this._strip()},BN.prototype._parseHex=function(number,start,endian){this.length=Math.ceil((number.length-start)/6),this.words=Array(this.length);for(var w,i=0;i<this.length;i++)this.words[i]=0;var off=0,j=0;if("be"===endian)for(i=number.length-1;i>=start;i-=2)w=parseHexByte(number,start,i)<<off,this.words[j]|=67108863&w,off>=18?(off-=18,j+=1,this.words[j]|=w>>>26):off+=8;else for(i=(number.length-start)%2==0?start+1:start;i<number.length;i+=2)w=parseHexByte(number,start,i)<<off,this.words[j]|=67108863&w,off>=18?(off-=18,j+=1,this.words[j]|=w>>>26):off+=8;this._strip()},BN.prototype._parseBase=function(number,base,start){this.words=[0],this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base)limbLen++;limbLen--,limbPow=limbPow/base|0;for(var total=number.length-start,mod=total%limbLen,end=Math.min(total,total-mod)+start,word=0,i=start;i<end;i+=limbLen)word=parseBase(number,i,i+limbLen,base),this.imuln(limbPow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word);if(0!==mod){var pow=1;for(word=parseBase(number,i,number.length,base),i=0;i<mod;i++)pow*=base;this.imuln(pow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word)}this._strip()},BN.prototype.copy=function(dest){dest.words=Array(this.length);for(var i=0;i<this.length;i++)dest.words[i]=this.words[i];dest.length=this.length,dest.negative=this.negative,dest.red=this.red},BN.prototype._move=function(dest){move(dest,this)},BN.prototype.clone=function(){var r=new BN(null);return this.copy(r),r},BN.prototype._expand=function(size){for(;this.length<size;)this.words[this.length++]=0;return this},BN.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{BN.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspect}catch(e1){BN.prototype.inspect=inspect}else BN.prototype.inspect=inspect;function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Buffer,zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function(base,padding){if(padding=0|padding||1,16===(base=base||10)||"hex"===base){out="";for(var out,off=0,carry=0,i=0;i<this.length;i++){var w=this.words[i],word=((w<<off|carry)&16777215).toString(16);carry=w>>>24-off&16777215,(off+=2)>=26&&(off-=26,i--),out=0!==carry||i!==this.length-1?zeros[6-word.length]+word+out:word+out}for(0!==carry&&(out=carry.toString(16)+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}if(base===(0|base)&&base>=2&&base<=36){var groupSize=groupSizes[base],groupBase=groupBases[base];out="";var c=this.clone();for(c.negative=0;!c.isZero();){var r=c.modrn(groupBase).toString(base);out=(c=c.idivn(groupBase)).isZero()?r+out:zeros[groupSize-r.length]+r+out}for(this.isZero()&&(out="0"+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function(){var ret=this.words[0];return 2===this.length?ret+=67108864*this.words[1]:3===this.length&&1===this.words[2]?ret+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-ret:ret},BN.prototype.toJSON=function(){return this.toString(16,2)},Buffer&&(BN.prototype.toBuffer=function(endian,length){return this.toArrayLike(Buffer,endian,length)}),BN.prototype.toArray=function(endian,length){return this.toArrayLike(Array,endian,length)};var allocate=function(ArrayType,size){return ArrayType.allocUnsafe?ArrayType.allocUnsafe(size):new ArrayType(size)};function toBitArray(num){for(var w=Array(num.bitLength()),bit=0;bit<w.length;bit++){var off=bit/26|0,wbit=bit%26;w[bit]=num.words[off]>>>wbit&1}return w}function smallMulTo(self1,num,out){out.negative=num.negative^self1.negative;var len=self1.length+num.length|0;out.length=len,len=len-1|0;var a=0|self1.words[0],b=0|num.words[0],r=a*b,lo=67108863&r,carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){for(var ncarry=carry>>>26,rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self1.length+1);j<=maxJ;j++){var i=k-j|0;ncarry+=(r=(a=0|self1.words[i])*(b=0|num.words[j])+rword)/67108864|0,rword=67108863&r}out.words[k]=0|rword,carry=0|ncarry}return 0!==carry?out.words[k]=0|carry:out.length--,out._strip()}BN.prototype.toArrayLike=function(ArrayType,endian,length){this._strip();var byteLength=this.byteLength(),reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length"),assert(reqLength>0,"Requested array length <= 0");var res=allocate(ArrayType,reqLength);return this["_toArrayLike"+("le"===endian?"LE":"BE")](res,byteLength),res},BN.prototype._toArrayLikeLE=function(res,byteLength){for(var position=0,carry=0,i=0,shift=0;i<this.length;i++){var word=this.words[i]<<shift|carry;res[position++]=255&word,position<res.length&&(res[position++]=word>>8&255),position<res.length&&(res[position++]=word>>16&255),6===shift?(position<res.length&&(res[position++]=word>>24&255),carry=0,shift=0):(carry=word>>>24,shift+=2)}if(position<res.length)for(res[position++]=carry;position<res.length;)res[position++]=0},BN.prototype._toArrayLikeBE=function(res,byteLength){for(var position=res.length-1,carry=0,i=0,shift=0;i<this.length;i++){var word=this.words[i]<<shift|carry;res[position--]=255&word,position>=0&&(res[position--]=word>>8&255),position>=0&&(res[position--]=word>>16&255),6===shift?(position>=0&&(res[position--]=word>>24&255),carry=0,shift=0):(carry=word>>>24,shift+=2)}if(position>=0)for(res[position--]=carry;position>=0;)res[position--]=0},Math.clz32?BN.prototype._countBits=function(w){return 32-Math.clz32(w)}:BN.prototype._countBits=function(w){var t=w,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},BN.prototype._zeroBits=function(w){if(0===w)return 26;var t=w,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},BN.prototype.bitLength=function(){var w=this.words[this.length-1],hi=this._countBits(w);return(this.length-1)*26+hi},BN.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(r+=b,26!==b)break}return r},BN.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function(width){return 0!==this.negative?this.abs().inotn(width).iaddn(1):this.clone()},BN.prototype.fromTwos=function(width){return this.testn(width-1)?this.notn(width).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function(){return 0!==this.negative},BN.prototype.neg=function(){return this.clone().ineg()},BN.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function(num){for(;this.length<num.length;)this.words[this.length++]=0;for(var i=0;i<num.length;i++)this.words[i]=this.words[i]|num.words[i];return this._strip()},BN.prototype.ior=function(num){return assert((this.negative|num.negative)==0),this.iuor(num)},BN.prototype.or=function(num){return this.length>num.length?this.clone().ior(num):num.clone().ior(this)},BN.prototype.uor=function(num){return this.length>num.length?this.clone().iuor(num):num.clone().iuor(this)},BN.prototype.iuand=function(num){var b;b=this.length>num.length?num:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&num.words[i];return this.length=b.length,this._strip()},BN.prototype.iand=function(num){return assert((this.negative|num.negative)==0),this.iuand(num)},BN.prototype.and=function(num){return this.length>num.length?this.clone().iand(num):num.clone().iand(this)},BN.prototype.uand=function(num){return this.length>num.length?this.clone().iuand(num):num.clone().iuand(this)},BN.prototype.iuxor=function(num){this.length>num.length?(a=this,b=num):(a=num,b=this);for(var a,b,i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this._strip()},BN.prototype.ixor=function(num){return assert((this.negative|num.negative)==0),this.iuxor(num)},BN.prototype.xor=function(num){return this.length>num.length?this.clone().ixor(num):num.clone().ixor(this)},BN.prototype.uxor=function(num){return this.length>num.length?this.clone().iuxor(num):num.clone().iuxor(this)},BN.prototype.inotn=function(width){assert("number"==typeof width&&width>=0);var bytesNeeded=0|Math.ceil(width/26),bitsLeft=width%26;this._expand(bytesNeeded),bitsLeft>0&&bytesNeeded--;for(var i=0;i<bytesNeeded;i++)this.words[i]=67108863&~this.words[i];return bitsLeft>0&&(this.words[i]=~this.words[i]&67108863>>26-bitsLeft),this._strip()},BN.prototype.notn=function(width){return this.clone().inotn(width)},BN.prototype.setn=function(bit,val){assert("number"==typeof bit&&bit>=0);var off=bit/26|0,wbit=bit%26;return this._expand(off+1),val?this.words[off]=this.words[off]|1<<wbit:this.words[off]=this.words[off]&~(1<<wbit),this._strip()},BN.prototype.iadd=function(num){if(0!==this.negative&&0===num.negative)return this.negative=0,r=this.isub(num),this.negative^=1,this._normSign();if(0===this.negative&&0!==num.negative)return num.negative=0,r=this.isub(num),num.negative=1,r._normSign();this.length>num.length?(a=this,b=num):(a=num,b=this);for(var r,a,b,carry=0,i=0;i<b.length;i++)r=(0|a.words[i])+(0|b.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;for(;0!==carry&&i<a.length;i++)r=(0|a.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;if(this.length=a.length,0!==carry)this.words[this.length]=carry,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},BN.prototype.add=function(num){var res;return 0!==num.negative&&0===this.negative?(num.negative=0,res=this.sub(num),num.negative^=1,res):0===num.negative&&0!==this.negative?(this.negative=0,res=num.sub(this),this.negative=1,res):this.length>num.length?this.clone().iadd(num):num.clone().iadd(this)},BN.prototype.isub=function(num){if(0!==num.negative){num.negative=0;var a,b,r=this.iadd(num);return num.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(num),this.negative=1,this._normSign();var cmp=this.cmp(num);if(0===cmp)return this.negative=0,this.length=1,this.words[0]=0,this;cmp>0?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)carry=(r=(0|a.words[i])-(0|b.words[i])+carry)>>26,this.words[i]=67108863&r;for(;0!==carry&&i<a.length;i++)carry=(r=(0|a.words[i])+carry)>>26,this.words[i]=67108863&r;if(0===carry&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this._strip()},BN.prototype.sub=function(num){return this.clone().isub(num)};var comb10MulTo=function(self1,num,out){var lo,mid,hi,a=self1.words,b=num.words,o=out.words,c=0,a0=0|a[0],al0=8191&a0,ah0=a0>>>13,a1=0|a[1],al1=8191&a1,ah1=a1>>>13,a2=0|a[2],al2=8191&a2,ah2=a2>>>13,a3=0|a[3],al3=8191&a3,ah3=a3>>>13,a4=0|a[4],al4=8191&a4,ah4=a4>>>13,a5=0|a[5],al5=8191&a5,ah5=a5>>>13,a6=0|a[6],al6=8191&a6,ah6=a6>>>13,a7=0|a[7],al7=8191&a7,ah7=a7>>>13,a8=0|a[8],al8=8191&a8,ah8=a8>>>13,a9=0|a[9],al9=8191&a9,ah9=a9>>>13,b0=0|b[0],bl0=8191&b0,bh0=b0>>>13,b1=0|b[1],bl1=8191&b1,bh1=b1>>>13,b2=0|b[2],bl2=8191&b2,bh2=b2>>>13,b3=0|b[3],bl3=8191&b3,bh3=b3>>>13,b4=0|b[4],bl4=8191&b4,bh4=b4>>>13,b5=0|b[5],bl5=8191&b5,bh5=b5>>>13,b6=0|b[6],bl6=8191&b6,bh6=b6>>>13,b7=0|b[7],bl7=8191&b7,bh7=b7>>>13,b8=0|b[8],bl8=8191&b8,bh8=b8>>>13,b9=0|b[9],bl9=8191&b9,bh9=b9>>>13;out.negative=self1.negative^num.negative,out.length=19;var w0=(c+(lo=Math.imul(al0,bl0))|0)+((8191&(mid=(mid=Math.imul(al0,bh0))+Math.imul(ah0,bl0)|0))<<13)|0;c=((hi=Math.imul(ah0,bh0))+(mid>>>13)|0)+(w0>>>26)|0,w0&=67108863,lo=Math.imul(al1,bl0),mid=(mid=Math.imul(al1,bh0))+Math.imul(ah1,bl0)|0,hi=Math.imul(ah1,bh0);var w1=(c+(lo=lo+Math.imul(al0,bl1)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh1)|0)+Math.imul(ah0,bl1)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh1)|0)+(mid>>>13)|0)+(w1>>>26)|0,w1&=67108863,lo=Math.imul(al2,bl0),mid=(mid=Math.imul(al2,bh0))+Math.imul(ah2,bl0)|0,hi=Math.imul(ah2,bh0),lo=lo+Math.imul(al1,bl1)|0,mid=(mid=mid+Math.imul(al1,bh1)|0)+Math.imul(ah1,bl1)|0,hi=hi+Math.imul(ah1,bh1)|0;var w2=(c+(lo=lo+Math.imul(al0,bl2)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh2)|0)+Math.imul(ah0,bl2)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh2)|0)+(mid>>>13)|0)+(w2>>>26)|0,w2&=67108863,lo=Math.imul(al3,bl0),mid=(mid=Math.imul(al3,bh0))+Math.imul(ah3,bl0)|0,hi=Math.imul(ah3,bh0),lo=lo+Math.imul(al2,bl1)|0,mid=(mid=mid+Math.imul(al2,bh1)|0)+Math.imul(ah2,bl1)|0,hi=hi+Math.imul(ah2,bh1)|0,lo=lo+Math.imul(al1,bl2)|0,mid=(mid=mid+Math.imul(al1,bh2)|0)+Math.imul(ah1,bl2)|0,hi=hi+Math.imul(ah1,bh2)|0;var w3=(c+(lo=lo+Math.imul(al0,bl3)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh3)|0)+Math.imul(ah0,bl3)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh3)|0)+(mid>>>13)|0)+(w3>>>26)|0,w3&=67108863,lo=Math.imul(al4,bl0),mid=(mid=Math.imul(al4,bh0))+Math.imul(ah4,bl0)|0,hi=Math.imul(ah4,bh0),lo=lo+Math.imul(al3,bl1)|0,mid=(mid=mid+Math.imul(al3,bh1)|0)+Math.imul(ah3,bl1)|0,hi=hi+Math.imul(ah3,bh1)|0,lo=lo+Math.imul(al2,bl2)|0,mid=(mid=mid+Math.imul(al2,bh2)|0)+Math.imul(ah2,bl2)|0,hi=hi+Math.imul(ah2,bh2)|0,lo=lo+Math.imul(al1,bl3)|0,mid=(mid=mid+Math.imul(al1,bh3)|0)+Math.imul(ah1,bl3)|0,hi=hi+Math.imul(ah1,bh3)|0;var w4=(c+(lo=lo+Math.imul(al0,bl4)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh4)|0)+Math.imul(ah0,bl4)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh4)|0)+(mid>>>13)|0)+(w4>>>26)|0,w4&=67108863,lo=Math.imul(al5,bl0),mid=(mid=Math.imul(al5,bh0))+Math.imul(ah5,bl0)|0,hi=Math.imul(ah5,bh0),lo=lo+Math.imul(al4,bl1)|0,mid=(mid=mid+Math.imul(al4,bh1)|0)+Math.imul(ah4,bl1)|0,hi=hi+Math.imul(ah4,bh1)|0,lo=lo+Math.imul(al3,bl2)|0,mid=(mid=mid+Math.imul(al3,bh2)|0)+Math.imul(ah3,bl2)|0,hi=hi+Math.imul(ah3,bh2)|0,lo=lo+Math.imul(al2,bl3)|0,mid=(mid=mid+Math.imul(al2,bh3)|0)+Math.imul(ah2,bl3)|0,hi=hi+Math.imul(ah2,bh3)|0,lo=lo+Math.imul(al1,bl4)|0,mid=(mid=mid+Math.imul(al1,bh4)|0)+Math.imul(ah1,bl4)|0,hi=hi+Math.imul(ah1,bh4)|0;var w5=(c+(lo=lo+Math.imul(al0,bl5)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh5)|0)+Math.imul(ah0,bl5)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh5)|0)+(mid>>>13)|0)+(w5>>>26)|0,w5&=67108863,lo=Math.imul(al6,bl0),mid=(mid=Math.imul(al6,bh0))+Math.imul(ah6,bl0)|0,hi=Math.imul(ah6,bh0),lo=lo+Math.imul(al5,bl1)|0,mid=(mid=mid+Math.imul(al5,bh1)|0)+Math.imul(ah5,bl1)|0,hi=hi+Math.imul(ah5,bh1)|0,lo=lo+Math.imul(al4,bl2)|0,mid=(mid=mid+Math.imul(al4,bh2)|0)+Math.imul(ah4,bl2)|0,hi=hi+Math.imul(ah4,bh2)|0,lo=lo+Math.imul(al3,bl3)|0,mid=(mid=mid+Math.imul(al3,bh3)|0)+Math.imul(ah3,bl3)|0,hi=hi+Math.imul(ah3,bh3)|0,lo=lo+Math.imul(al2,bl4)|0,mid=(mid=mid+Math.imul(al2,bh4)|0)+Math.imul(ah2,bl4)|0,hi=hi+Math.imul(ah2,bh4)|0,lo=lo+Math.imul(al1,bl5)|0,mid=(mid=mid+Math.imul(al1,bh5)|0)+Math.imul(ah1,bl5)|0,hi=hi+Math.imul(ah1,bh5)|0;var w6=(c+(lo=lo+Math.imul(al0,bl6)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh6)|0)+Math.imul(ah0,bl6)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh6)|0)+(mid>>>13)|0)+(w6>>>26)|0,w6&=67108863,lo=Math.imul(al7,bl0),mid=(mid=Math.imul(al7,bh0))+Math.imul(ah7,bl0)|0,hi=Math.imul(ah7,bh0),lo=lo+Math.imul(al6,bl1)|0,mid=(mid=mid+Math.imul(al6,bh1)|0)+Math.imul(ah6,bl1)|0,hi=hi+Math.imul(ah6,bh1)|0,lo=lo+Math.imul(al5,bl2)|0,mid=(mid=mid+Math.imul(al5,bh2)|0)+Math.imul(ah5,bl2)|0,hi=hi+Math.imul(ah5,bh2)|0,lo=lo+Math.imul(al4,bl3)|0,mid=(mid=mid+Math.imul(al4,bh3)|0)+Math.imul(ah4,bl3)|0,hi=hi+Math.imul(ah4,bh3)|0,lo=lo+Math.imul(al3,bl4)|0,mid=(mid=mid+Math.imul(al3,bh4)|0)+Math.imul(ah3,bl4)|0,hi=hi+Math.imul(ah3,bh4)|0,lo=lo+Math.imul(al2,bl5)|0,mid=(mid=mid+Math.imul(al2,bh5)|0)+Math.imul(ah2,bl5)|0,hi=hi+Math.imul(ah2,bh5)|0,lo=lo+Math.imul(al1,bl6)|0,mid=(mid=mid+Math.imul(al1,bh6)|0)+Math.imul(ah1,bl6)|0,hi=hi+Math.imul(ah1,bh6)|0;var w7=(c+(lo=lo+Math.imul(al0,bl7)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh7)|0)+Math.imul(ah0,bl7)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh7)|0)+(mid>>>13)|0)+(w7>>>26)|0,w7&=67108863,lo=Math.imul(al8,bl0),mid=(mid=Math.imul(al8,bh0))+Math.imul(ah8,bl0)|0,hi=Math.imul(ah8,bh0),lo=lo+Math.imul(al7,bl1)|0,mid=(mid=mid+Math.imul(al7,bh1)|0)+Math.imul(ah7,bl1)|0,hi=hi+Math.imul(ah7,bh1)|0,lo=lo+Math.imul(al6,bl2)|0,mid=(mid=mid+Math.imul(al6,bh2)|0)+Math.imul(ah6,bl2)|0,hi=hi+Math.imul(ah6,bh2)|0,lo=lo+Math.imul(al5,bl3)|0,mid=(mid=mid+Math.imul(al5,bh3)|0)+Math.imul(ah5,bl3)|0,hi=hi+Math.imul(ah5,bh3)|0,lo=lo+Math.imul(al4,bl4)|0,mid=(mid=mid+Math.imul(al4,bh4)|0)+Math.imul(ah4,bl4)|0,hi=hi+Math.imul(ah4,bh4)|0,lo=lo+Math.imul(al3,bl5)|0,mid=(mid=mid+Math.imul(al3,bh5)|0)+Math.imul(ah3,bl5)|0,hi=hi+Math.imul(ah3,bh5)|0,lo=lo+Math.imul(al2,bl6)|0,mid=(mid=mid+Math.imul(al2,bh6)|0)+Math.imul(ah2,bl6)|0,hi=hi+Math.imul(ah2,bh6)|0,lo=lo+Math.imul(al1,bl7)|0,mid=(mid=mid+Math.imul(al1,bh7)|0)+Math.imul(ah1,bl7)|0,hi=hi+Math.imul(ah1,bh7)|0;var w8=(c+(lo=lo+Math.imul(al0,bl8)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh8)|0)+Math.imul(ah0,bl8)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh8)|0)+(mid>>>13)|0)+(w8>>>26)|0,w8&=67108863,lo=Math.imul(al9,bl0),mid=(mid=Math.imul(al9,bh0))+Math.imul(ah9,bl0)|0,hi=Math.imul(ah9,bh0),lo=lo+Math.imul(al8,bl1)|0,mid=(mid=mid+Math.imul(al8,bh1)|0)+Math.imul(ah8,bl1)|0,hi=hi+Math.imul(ah8,bh1)|0,lo=lo+Math.imul(al7,bl2)|0,mid=(mid=mid+Math.imul(al7,bh2)|0)+Math.imul(ah7,bl2)|0,hi=hi+Math.imul(ah7,bh2)|0,lo=lo+Math.imul(al6,bl3)|0,mid=(mid=mid+Math.imul(al6,bh3)|0)+Math.imul(ah6,bl3)|0,hi=hi+Math.imul(ah6,bh3)|0,lo=lo+Math.imul(al5,bl4)|0,mid=(mid=mid+Math.imul(al5,bh4)|0)+Math.imul(ah5,bl4)|0,hi=hi+Math.imul(ah5,bh4)|0,lo=lo+Math.imul(al4,bl5)|0,mid=(mid=mid+Math.imul(al4,bh5)|0)+Math.imul(ah4,bl5)|0,hi=hi+Math.imul(ah4,bh5)|0,lo=lo+Math.imul(al3,bl6)|0,mid=(mid=mid+Math.imul(al3,bh6)|0)+Math.imul(ah3,bl6)|0,hi=hi+Math.imul(ah3,bh6)|0,lo=lo+Math.imul(al2,bl7)|0,mid=(mid=mid+Math.imul(al2,bh7)|0)+Math.imul(ah2,bl7)|0,hi=hi+Math.imul(ah2,bh7)|0,lo=lo+Math.imul(al1,bl8)|0,mid=(mid=mid+Math.imul(al1,bh8)|0)+Math.imul(ah1,bl8)|0,hi=hi+Math.imul(ah1,bh8)|0;var w9=(c+(lo=lo+Math.imul(al0,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh9)|0)+Math.imul(ah0,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh9)|0)+(mid>>>13)|0)+(w9>>>26)|0,w9&=67108863,lo=Math.imul(al9,bl1),mid=(mid=Math.imul(al9,bh1))+Math.imul(ah9,bl1)|0,hi=Math.imul(ah9,bh1),lo=lo+Math.imul(al8,bl2)|0,mid=(mid=mid+Math.imul(al8,bh2)|0)+Math.imul(ah8,bl2)|0,hi=hi+Math.imul(ah8,bh2)|0,lo=lo+Math.imul(al7,bl3)|0,mid=(mid=mid+Math.imul(al7,bh3)|0)+Math.imul(ah7,bl3)|0,hi=hi+Math.imul(ah7,bh3)|0,lo=lo+Math.imul(al6,bl4)|0,mid=(mid=mid+Math.imul(al6,bh4)|0)+Math.imul(ah6,bl4)|0,hi=hi+Math.imul(ah6,bh4)|0,lo=lo+Math.imul(al5,bl5)|0,mid=(mid=mid+Math.imul(al5,bh5)|0)+Math.imul(ah5,bl5)|0,hi=hi+Math.imul(ah5,bh5)|0,lo=lo+Math.imul(al4,bl6)|0,mid=(mid=mid+Math.imul(al4,bh6)|0)+Math.imul(ah4,bl6)|0,hi=hi+Math.imul(ah4,bh6)|0,lo=lo+Math.imul(al3,bl7)|0,mid=(mid=mid+Math.imul(al3,bh7)|0)+Math.imul(ah3,bl7)|0,hi=hi+Math.imul(ah3,bh7)|0,lo=lo+Math.imul(al2,bl8)|0,mid=(mid=mid+Math.imul(al2,bh8)|0)+Math.imul(ah2,bl8)|0,hi=hi+Math.imul(ah2,bh8)|0;var w10=(c+(lo=lo+Math.imul(al1,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al1,bh9)|0)+Math.imul(ah1,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah1,bh9)|0)+(mid>>>13)|0)+(w10>>>26)|0,w10&=67108863,lo=Math.imul(al9,bl2),mid=(mid=Math.imul(al9,bh2))+Math.imul(ah9,bl2)|0,hi=Math.imul(ah9,bh2),lo=lo+Math.imul(al8,bl3)|0,mid=(mid=mid+Math.imul(al8,bh3)|0)+Math.imul(ah8,bl3)|0,hi=hi+Math.imul(ah8,bh3)|0,lo=lo+Math.imul(al7,bl4)|0,mid=(mid=mid+Math.imul(al7,bh4)|0)+Math.imul(ah7,bl4)|0,hi=hi+Math.imul(ah7,bh4)|0,lo=lo+Math.imul(al6,bl5)|0,mid=(mid=mid+Math.imul(al6,bh5)|0)+Math.imul(ah6,bl5)|0,hi=hi+Math.imul(ah6,bh5)|0,lo=lo+Math.imul(al5,bl6)|0,mid=(mid=mid+Math.imul(al5,bh6)|0)+Math.imul(ah5,bl6)|0,hi=hi+Math.imul(ah5,bh6)|0,lo=lo+Math.imul(al4,bl7)|0,mid=(mid=mid+Math.imul(al4,bh7)|0)+Math.imul(ah4,bl7)|0,hi=hi+Math.imul(ah4,bh7)|0,lo=lo+Math.imul(al3,bl8)|0,mid=(mid=mid+Math.imul(al3,bh8)|0)+Math.imul(ah3,bl8)|0,hi=hi+Math.imul(ah3,bh8)|0;var w11=(c+(lo=lo+Math.imul(al2,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al2,bh9)|0)+Math.imul(ah2,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah2,bh9)|0)+(mid>>>13)|0)+(w11>>>26)|0,w11&=67108863,lo=Math.imul(al9,bl3),mid=(mid=Math.imul(al9,bh3))+Math.imul(ah9,bl3)|0,hi=Math.imul(ah9,bh3),lo=lo+Math.imul(al8,bl4)|0,mid=(mid=mid+Math.imul(al8,bh4)|0)+Math.imul(ah8,bl4)|0,hi=hi+Math.imul(ah8,bh4)|0,lo=lo+Math.imul(al7,bl5)|0,mid=(mid=mid+Math.imul(al7,bh5)|0)+Math.imul(ah7,bl5)|0,hi=hi+Math.imul(ah7,bh5)|0,lo=lo+Math.imul(al6,bl6)|0,mid=(mid=mid+Math.imul(al6,bh6)|0)+Math.imul(ah6,bl6)|0,hi=hi+Math.imul(ah6,bh6)|0,lo=lo+Math.imul(al5,bl7)|0,mid=(mid=mid+Math.imul(al5,bh7)|0)+Math.imul(ah5,bl7)|0,hi=hi+Math.imul(ah5,bh7)|0,lo=lo+Math.imul(al4,bl8)|0,mid=(mid=mid+Math.imul(al4,bh8)|0)+Math.imul(ah4,bl8)|0,hi=hi+Math.imul(ah4,bh8)|0;var w12=(c+(lo=lo+Math.imul(al3,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al3,bh9)|0)+Math.imul(ah3,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah3,bh9)|0)+(mid>>>13)|0)+(w12>>>26)|0,w12&=67108863,lo=Math.imul(al9,bl4),mid=(mid=Math.imul(al9,bh4))+Math.imul(ah9,bl4)|0,hi=Math.imul(ah9,bh4),lo=lo+Math.imul(al8,bl5)|0,mid=(mid=mid+Math.imul(al8,bh5)|0)+Math.imul(ah8,bl5)|0,hi=hi+Math.imul(ah8,bh5)|0,lo=lo+Math.imul(al7,bl6)|0,mid=(mid=mid+Math.imul(al7,bh6)|0)+Math.imul(ah7,bl6)|0,hi=hi+Math.imul(ah7,bh6)|0,lo=lo+Math.imul(al6,bl7)|0,mid=(mid=mid+Math.imul(al6,bh7)|0)+Math.imul(ah6,bl7)|0,hi=hi+Math.imul(ah6,bh7)|0,lo=lo+Math.imul(al5,bl8)|0,mid=(mid=mid+Math.imul(al5,bh8)|0)+Math.imul(ah5,bl8)|0,hi=hi+Math.imul(ah5,bh8)|0;var w13=(c+(lo=lo+Math.imul(al4,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al4,bh9)|0)+Math.imul(ah4,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah4,bh9)|0)+(mid>>>13)|0)+(w13>>>26)|0,w13&=67108863,lo=Math.imul(al9,bl5),mid=(mid=Math.imul(al9,bh5))+Math.imul(ah9,bl5)|0,hi=Math.imul(ah9,bh5),lo=lo+Math.imul(al8,bl6)|0,mid=(mid=mid+Math.imul(al8,bh6)|0)+Math.imul(ah8,bl6)|0,hi=hi+Math.imul(ah8,bh6)|0,lo=lo+Math.imul(al7,bl7)|0,mid=(mid=mid+Math.imul(al7,bh7)|0)+Math.imul(ah7,bl7)|0,hi=hi+Math.imul(ah7,bh7)|0,lo=lo+Math.imul(al6,bl8)|0,mid=(mid=mid+Math.imul(al6,bh8)|0)+Math.imul(ah6,bl8)|0,hi=hi+Math.imul(ah6,bh8)|0;var w14=(c+(lo=lo+Math.imul(al5,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al5,bh9)|0)+Math.imul(ah5,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah5,bh9)|0)+(mid>>>13)|0)+(w14>>>26)|0,w14&=67108863,lo=Math.imul(al9,bl6),mid=(mid=Math.imul(al9,bh6))+Math.imul(ah9,bl6)|0,hi=Math.imul(ah9,bh6),lo=lo+Math.imul(al8,bl7)|0,mid=(mid=mid+Math.imul(al8,bh7)|0)+Math.imul(ah8,bl7)|0,hi=hi+Math.imul(ah8,bh7)|0,lo=lo+Math.imul(al7,bl8)|0,mid=(mid=mid+Math.imul(al7,bh8)|0)+Math.imul(ah7,bl8)|0,hi=hi+Math.imul(ah7,bh8)|0;var w15=(c+(lo=lo+Math.imul(al6,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al6,bh9)|0)+Math.imul(ah6,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah6,bh9)|0)+(mid>>>13)|0)+(w15>>>26)|0,w15&=67108863,lo=Math.imul(al9,bl7),mid=(mid=Math.imul(al9,bh7))+Math.imul(ah9,bl7)|0,hi=Math.imul(ah9,bh7),lo=lo+Math.imul(al8,bl8)|0,mid=(mid=mid+Math.imul(al8,bh8)|0)+Math.imul(ah8,bl8)|0,hi=hi+Math.imul(ah8,bh8)|0;var w16=(c+(lo=lo+Math.imul(al7,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al7,bh9)|0)+Math.imul(ah7,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah7,bh9)|0)+(mid>>>13)|0)+(w16>>>26)|0,w16&=67108863,lo=Math.imul(al9,bl8),mid=(mid=Math.imul(al9,bh8))+Math.imul(ah9,bl8)|0,hi=Math.imul(ah9,bh8);var w17=(c+(lo=lo+Math.imul(al8,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al8,bh9)|0)+Math.imul(ah8,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah8,bh9)|0)+(mid>>>13)|0)+(w17>>>26)|0,w17&=67108863;var w18=(c+(lo=Math.imul(al9,bl9))|0)+((8191&(mid=(mid=Math.imul(al9,bh9))+Math.imul(ah9,bl9)|0))<<13)|0;return c=((hi=Math.imul(ah9,bh9))+(mid>>>13)|0)+(w18>>>26)|0,w18&=67108863,o[0]=w0,o[1]=w1,o[2]=w2,o[3]=w3,o[4]=w4,o[5]=w5,o[6]=w6,o[7]=w7,o[8]=w8,o[9]=w9,o[10]=w10,o[11]=w11,o[12]=w12,o[13]=w13,o[14]=w14,o[15]=w15,o[16]=w16,o[17]=w17,o[18]=w18,0!==c&&(o[19]=c,out.length++),out};function bigMulTo(self1,num,out){out.negative=num.negative^self1.negative,out.length=self1.length+num.length;for(var carry=0,hncarry=0,k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;for(var rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self1.length+1);j<=maxJ;j++){var i=k-j,r=(0|self1.words[i])*(0|num.words[j]),lo=67108863&r;ncarry=ncarry+(r/67108864|0)|0,rword=67108863&(lo=lo+rword|0),hncarry+=(ncarry=ncarry+(lo>>>26)|0)>>>26,ncarry&=67108863}out.words[k]=rword,carry=ncarry,ncarry=hncarry}return 0!==carry?out.words[k]=carry:out.length--,out._strip()}function jumboMulTo(self1,num,out){return bigMulTo(self1,num,out)}function FFTM(x,y){this.x=x,this.y=y}Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function(num,out){var len=this.length+num.length;return 10===this.length&&10===num.length?comb10MulTo(this,num,out):len<63?smallMulTo(this,num,out):len<1024?bigMulTo(this,num,out):jumboMulTo(this,num,out)},FFTM.prototype.makeRBT=function(N){for(var t=Array(N),l=BN.prototype._countBits(N)-1,i=0;i<N;i++)t[i]=this.revBin(i,l,N);return t},FFTM.prototype.revBin=function(x,l,N){if(0===x||x===N-1)return x;for(var rb=0,i=0;i<l;i++)rb|=(1&x)<<l-i-1,x>>=1;return rb},FFTM.prototype.permute=function(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++)rtws[i]=rws[rbt[i]],itws[i]=iws[rbt[i]]},FFTM.prototype.transform=function(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1)for(var l=s<<1,rtwdf=Math.cos(2*Math.PI/l),itwdf=Math.sin(2*Math.PI/l),p=0;p<N;p+=l)for(var rtwdf_=rtwdf,itwdf_=itwdf,j=0;j<s;j++){var re=rtws[p+j],ie=itws[p+j],ro=rtws[p+j+s],io=itws[p+j+s],rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro,ro=rx,rtws[p+j]=re+ro,itws[p+j]=ie+io,rtws[p+j+s]=re-ro,itws[p+j+s]=ie-io,j!==l&&(rx=rtwdf*rtwdf_-itwdf*itwdf_,itwdf_=rtwdf*itwdf_+itwdf*rtwdf_,rtwdf_=rx)}},FFTM.prototype.guessLen13b=function(n,m){var N=1|Math.max(m,n),odd=1&N,i=0;for(N=N/2|0;N;N>>>=1)i++;return 1<<i+1+odd},FFTM.prototype.conjugate=function(rws,iws,N){if(!(N<=1))for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1],rws[N-i-1]=t,t=iws[i],iws[i]=-iws[N-i-1],iws[N-i-1]=-t}},FFTM.prototype.normalize13b=function(ws,N){for(var carry=0,i=0;i<N/2;i++){var w=8192*Math.round(ws[2*i+1]/N)+Math.round(ws[2*i]/N)+carry;ws[i]=67108863&w,carry=w<67108864?0:w/67108864|0}return ws},FFTM.prototype.convert13b=function(ws,len,rws,N){for(var carry=0,i=0;i<len;i++)carry+=0|ws[i],rws[2*i]=8191&carry,carry>>>=13,rws[2*i+1]=8191&carry,carry>>>=13;for(i=2*len;i<N;++i)rws[i]=0;assert(0===carry),assert((-8192&carry)==0)},FFTM.prototype.stub=function(N){for(var ph=Array(N),i=0;i<N;i++)ph[i]=0;return ph},FFTM.prototype.mulp=function(x,y,out){var N=2*this.guessLen13b(x.length,y.length),rbt=this.makeRBT(N),_=this.stub(N),rws=Array(N),rwst=Array(N),iwst=Array(N),nrws=Array(N),nrwst=Array(N),niwst=Array(N),rmws=out.words;rmws.length=N,this.convert13b(x.words,x.length,rws,N),this.convert13b(y.words,y.length,nrws,N),this.transform(rws,_,rwst,iwst,N,rbt),this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i],rwst[i]=rx}return this.conjugate(rwst,iwst,N),this.transform(rwst,iwst,rmws,_,N,rbt),this.conjugate(rmws,_,N),this.normalize13b(rmws,N),out.negative=x.negative^y.negative,out.length=x.length+y.length,out._strip()},BN.prototype.mul=function(num){var out=new BN(null);return out.words=Array(this.length+num.length),this.mulTo(num,out)},BN.prototype.mulf=function(num){var out=new BN(null);return out.words=Array(this.length+num.length),jumboMulTo(this,num,out)},BN.prototype.imul=function(num){return this.clone().mulTo(num,this)},BN.prototype.imuln=function(num){var isNegNum=num<0;isNegNum&&(num=-num),assert("number"==typeof num),assert(num<67108864);for(var carry=0,i=0;i<this.length;i++){var w=(0|this.words[i])*num,lo=(67108863&w)+(67108863&carry);carry>>=26,carry=(w/67108864|0)+(lo>>>26),this.words[i]=67108863&lo}return 0!==carry&&(this.words[i]=carry,this.length++),isNegNum?this.ineg():this},BN.prototype.muln=function(num){return this.clone().imuln(num)},BN.prototype.sqr=function(){return this.mul(this)},BN.prototype.isqr=function(){return this.imul(this.clone())},BN.prototype.pow=function(num){var w=toBitArray(num);if(0===w.length)return new BN(1);for(var res=this,i=0;i<w.length&&0===w[i];i++,res=res.sqr());if(++i<w.length)for(var q=res.sqr();i<w.length;i++,q=q.sqr())0!==w[i]&&(res=res.mul(q));return res},BN.prototype.iushln=function(bits){assert("number"==typeof bits&&bits>=0);var i,r=bits%26,s=(bits-r)/26,carryMask=67108863>>>26-r<<26-r;if(0!==r){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask,c=(0|this.words[i])-newCarry<<r;this.words[i]=c|carry,carry=newCarry>>>26-r}carry&&(this.words[i]=carry,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this._strip()},BN.prototype.ishln=function(bits){return assert(0===this.negative),this.iushln(bits)},BN.prototype.iushrn=function(bits,hint,extended){assert("number"==typeof bits&&bits>=0),h=hint?(hint-hint%26)/26:0;var h,r=bits%26,s=Math.min((bits-r)/26,this.length),mask=67108863^67108863>>>r<<r,maskedWords=extended;if(h-=s,h=Math.max(0,h),maskedWords){for(var i=0;i<s;i++)maskedWords.words[i]=this.words[i];maskedWords.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var carry=0;for(i=this.length-1;i>=0&&(0!==carry||i>=h);i--){var word=0|this.words[i];this.words[i]=carry<<26-r|word>>>r,carry=word&mask}return maskedWords&&0!==carry&&(maskedWords.words[maskedWords.length++]=carry),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},BN.prototype.ishrn=function(bits,hint,extended){return assert(0===this.negative),this.iushrn(bits,hint,extended)},BN.prototype.shln=function(bits){return this.clone().ishln(bits)},BN.prototype.ushln=function(bits){return this.clone().iushln(bits)},BN.prototype.shrn=function(bits){return this.clone().ishrn(bits)},BN.prototype.ushrn=function(bits){return this.clone().iushrn(bits)},BN.prototype.testn=function(bit){assert("number"==typeof bit&&bit>=0);var r=bit%26,s=(bit-r)/26,q=1<<r;return!(this.length<=s)&&!!(this.words[s]&q)},BN.prototype.imaskn=function(bits){assert("number"==typeof bits&&bits>=0);var r=bits%26,s=(bits-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==r&&s++,this.length=Math.min(s,this.length),0!==r){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this._strip()},BN.prototype.maskn=function(bits){return this.clone().imaskn(bits)},BN.prototype.iaddn=function(num){return(assert("number"==typeof num),assert(num<67108864),num<0)?this.isubn(-num):0!==this.negative?1===this.length&&(0|this.words[0])<=num?(this.words[0]=num-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(num),this.negative=1,this):this._iaddn(num)},BN.prototype._iaddn=function(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},BN.prototype.isubn=function(num){if(assert("number"==typeof num),assert(num<67108864),num<0)return this.iaddn(-num);if(0!==this.negative)return this.negative=0,this.iaddn(num),this.negative=1,this;if(this.words[0]-=num,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this._strip()},BN.prototype.addn=function(num){return this.clone().iaddn(num)},BN.prototype.subn=function(num){return this.clone().isubn(num)},BN.prototype.iabs=function(){return this.negative=0,this},BN.prototype.abs=function(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function(num,mul,shift){var i,w,len=num.length+shift;this._expand(len);var carry=0;for(i=0;i<num.length;i++){w=(0|this.words[i+shift])+carry;var right=(0|num.words[i])*mul;w-=67108863&right,carry=(w>>26)-(right/67108864|0),this.words[i+shift]=67108863&w}for(;i<this.length-shift;i++)carry=(w=(0|this.words[i+shift])+carry)>>26,this.words[i+shift]=67108863&w;if(0===carry)return this._strip();for(assert(-1===carry),carry=0,i=0;i<this.length;i++)carry=(w=-(0|this.words[i])+carry)>>26,this.words[i]=67108863&w;return this.negative=1,this._strip()},BN.prototype._wordDiv=function(num,mode){var q,shift=this.length-num.length,a=this.clone(),b=num,bhi=0|b.words[b.length-1];0!=(shift=26-this._countBits(bhi))&&(b=b.ushln(shift),a.iushln(shift),bhi=0|b.words[b.length-1]);var m=a.length-b.length;if("mod"!==mode){(q=new BN(null)).length=m+1,q.words=Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var diff=a.clone()._ishlnsubmul(b,1,m);0===diff.negative&&(a=diff,q&&(q.words[m]=1));for(var j=m-1;j>=0;j--){var qj=(0|a.words[b.length+j])*67108864+(0|a.words[b.length+j-1]);for(qj=Math.min(qj/bhi|0,67108863),a._ishlnsubmul(b,qj,j);0!==a.negative;)qj--,a.negative=0,a._ishlnsubmul(b,1,j),a.isZero()||(a.negative^=1);q&&(q.words[j]=qj)}return q&&q._strip(),a._strip(),"div"!==mode&&0!==shift&&a.iushrn(shift),{div:q||null,mod:a}},BN.prototype.divmod=function(num,mode,positive){var div,mod,res;return(assert(!num.isZero()),this.isZero())?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===num.negative?(res=this.neg().divmod(num,mode),"mod"!==mode&&(div=res.div.neg()),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.iadd(num)),{div:div,mod:mod}):0===this.negative&&0!==num.negative?(res=this.divmod(num.neg(),mode),"mod"!==mode&&(div=res.div.neg()),{div:div,mod:res.mod}):(this.negative&num.negative)!=0?(res=this.neg().divmod(num.neg(),mode),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.isub(num)),{div:res.div,mod:mod}):num.length>this.length||0>this.cmp(num)?{div:new BN(0),mod:this}:1===num.length?"div"===mode?{div:this.divn(num.words[0]),mod:null}:"mod"===mode?{div:null,mod:new BN(this.modrn(num.words[0]))}:{div:this.divn(num.words[0]),mod:new BN(this.modrn(num.words[0]))}:this._wordDiv(num,mode)},BN.prototype.div=function(num){return this.divmod(num,"div",!1).div},BN.prototype.mod=function(num){return this.divmod(num,"mod",!1).mod},BN.prototype.umod=function(num){return this.divmod(num,"mod",!0).mod},BN.prototype.divRound=function(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=0!==dm.div.negative?dm.mod.isub(num):dm.mod,half=num.ushrn(1),r2=num.andln(1),cmp=mod.cmp(half);return cmp<0||1===r2&&0===cmp?dm.div:0!==dm.div.negative?dm.div.isubn(1):dm.div.iaddn(1)},BN.prototype.modrn=function(num){var isNegNum=num<0;isNegNum&&(num=-num),assert(num<=67108863);for(var p=67108864%num,acc=0,i=this.length-1;i>=0;i--)acc=(p*acc+(0|this.words[i]))%num;return isNegNum?-acc:acc},BN.prototype.modn=function(num){return this.modrn(num)},BN.prototype.idivn=function(num){var isNegNum=num<0;isNegNum&&(num=-num),assert(num<=67108863);for(var carry=0,i=this.length-1;i>=0;i--){var w=(0|this.words[i])+67108864*carry;this.words[i]=w/num|0,carry=w%num}return this._strip(),isNegNum?this.ineg():this},BN.prototype.divn=function(num){return this.clone().idivn(num)},BN.prototype.egcd=function(p){assert(0===p.negative),assert(!p.isZero());var x=this,y=p.clone();x=0!==x.negative?x.umod(p):x.clone();for(var A=new BN(1),B=new BN(0),C=new BN(0),D=new BN(1),g=0;x.isEven()&&y.isEven();)x.iushrn(1),y.iushrn(1),++g;for(var yp=y.clone(),xp=x.clone();!x.isZero();){for(var i=0,im=1;(x.words[0]&im)==0&&i<26;++i,im<<=1);if(i>0)for(x.iushrn(i);i-- >0;)(A.isOdd()||B.isOdd())&&(A.iadd(yp),B.isub(xp)),A.iushrn(1),B.iushrn(1);for(var j=0,jm=1;(y.words[0]&jm)==0&&j<26;++j,jm<<=1);if(j>0)for(y.iushrn(j);j-- >0;)(C.isOdd()||D.isOdd())&&(C.iadd(yp),D.isub(xp)),C.iushrn(1),D.iushrn(1);x.cmp(y)>=0?(x.isub(y),A.isub(C),B.isub(D)):(y.isub(x),C.isub(A),D.isub(B))}return{a:C,b:D,gcd:y.iushln(g)}},BN.prototype._invmp=function(p){assert(0===p.negative),assert(!p.isZero());var res,a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var x1=new BN(1),x2=new BN(0),delta=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,im=1;(a.words[0]&im)==0&&i<26;++i,im<<=1);if(i>0)for(a.iushrn(i);i-- >0;)x1.isOdd()&&x1.iadd(delta),x1.iushrn(1);for(var j=0,jm=1;(b.words[0]&jm)==0&&j<26;++j,jm<<=1);if(j>0)for(b.iushrn(j);j-- >0;)x2.isOdd()&&x2.iadd(delta),x2.iushrn(1);a.cmp(b)>=0?(a.isub(b),x1.isub(x2)):(b.isub(a),x2.isub(x1))}return 0>(res=0===a.cmpn(1)?x1:x2).cmpn(0)&&res.iadd(p),res},BN.prototype.gcd=function(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone(),b=num.clone();a.negative=0,b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var t=a;a=b,b=t}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(shift)},BN.prototype.invm=function(num){return this.egcd(num).a.umod(num)},BN.prototype.isEven=function(){return(1&this.words[0])==0},BN.prototype.isOdd=function(){return(1&this.words[0])==1},BN.prototype.andln=function(num){return this.words[0]&num},BN.prototype.bincn=function(bit){assert("number"==typeof bit);var r=bit%26,s=(bit-r)/26,q=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var carry=q,i=s;0!==carry&&i<this.length;i++){var w=0|this.words[i];w+=carry,carry=w>>>26,w&=67108863,this.words[i]=w}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function(num){var res,negative=num<0;if(0!==this.negative&&!negative)return -1;if(0===this.negative&&negative)return 1;if(this._strip(),this.length>1)res=1;else{negative&&(num=-num),assert(num<=67108863,"Number is too big");var w=0|this.words[0];res=w===num?0:w<num?-1:1}return 0!==this.negative?0|-res:res},BN.prototype.cmp=function(num){if(0!==this.negative&&0===num.negative)return -1;if(0===this.negative&&0!==num.negative)return 1;var res=this.ucmp(num);return 0!==this.negative?0|-res:res},BN.prototype.ucmp=function(num){if(this.length>num.length)return 1;if(this.length<num.length)return -1;for(var res=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|num.words[i];if(a!==b){a<b?res=-1:a>b&&(res=1);break}}return res},BN.prototype.gtn=function(num){return 1===this.cmpn(num)},BN.prototype.gt=function(num){return 1===this.cmp(num)},BN.prototype.gten=function(num){return this.cmpn(num)>=0},BN.prototype.gte=function(num){return this.cmp(num)>=0},BN.prototype.ltn=function(num){return -1===this.cmpn(num)},BN.prototype.lt=function(num){return -1===this.cmp(num)},BN.prototype.lten=function(num){return 0>=this.cmpn(num)},BN.prototype.lte=function(num){return 0>=this.cmp(num)},BN.prototype.eqn=function(num){return 0===this.cmpn(num)},BN.prototype.eq=function(num){return 0===this.cmp(num)},BN.red=function(num){return new Red(num)},BN.prototype.toRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),ctx.convertTo(this)._forceRed(ctx)},BN.prototype.fromRed=function(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function(ctx){return this.red=ctx,this},BN.prototype.forceRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),this._forceRed(ctx)},BN.prototype.redAdd=function(num){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,num)},BN.prototype.redIAdd=function(num){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,num)},BN.prototype.redSub=function(num){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,num)},BN.prototype.redISub=function(num){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,num)},BN.prototype.redShl=function(num){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,num)},BN.prototype.redMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.mul(this,num)},BN.prototype.redIMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.imul(this,num)},BN.prototype.redSqr=function(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function(num){return assert(this.red&&!num.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name,this.p=new BN(p,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(m){if("string"==typeof m){var prime=BN._prime(m);this.m=prime.p,this.prime=prime}else assert(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}function Mont(m){Red.call(this,m),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function(){var tmp=new BN(null);return tmp.words=Array(Math.ceil(this.n/13)),tmp},MPrime.prototype.ireduce=function(num){var rlen,r=num;do this.split(r,this.tmp),rlen=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);return 0===cmp?(r.words[0]=0,r.length=1):cmp>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},MPrime.prototype.split=function(input,out){input.iushrn(this.n,0,out)},MPrime.prototype.imulK=function(num){return num.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function(input,output){for(var mask=4194303,outLen=Math.min(input.length,9),i=0;i<outLen;i++)output.words[i]=input.words[i];if(output.length=outLen,input.length<=9){input.words[0]=0,input.length=1;return}var prev=input.words[9];for(i=10,output.words[output.length++]=prev&mask;i<input.length;i++){var next=0|input.words[i];input.words[i-10]=(next&mask)<<4|prev>>>22,prev=next}prev>>>=22,input.words[i-10]=prev,0===prev&&input.length>10?input.length-=10:input.length-=9},K256.prototype.imulK=function(num){num.words[num.length]=0,num.words[num.length+1]=0,num.length+=2;for(var lo=0,i=0;i<num.length;i++){var w=0|num.words[i];lo+=977*w,num.words[i]=67108863&lo,lo=64*w+(lo/67108864|0)}return 0===num.words[num.length-1]&&(num.length--,0===num.words[num.length-1]&&num.length--),num},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function(num){for(var carry=0,i=0;i<num.length;i++){var hi=(0|num.words[i])*19+carry,lo=67108863&hi;hi>>>=26,num.words[i]=lo,carry=hi}return 0!==carry&&(num.words[num.length++]=carry),num},BN._prime=function(name){var prime;if(primes[name])return primes[name];if("k256"===name)prime=new K256;else if("p224"===name)prime=new P224;else if("p192"===name)prime=new P192;else if("p25519"===name)prime=new P25519;else throw Error("Unknown prime "+name);return primes[name]=prime,prime},Red.prototype._verify1=function(a){assert(0===a.negative,"red works only with positives"),assert(a.red,"red works only with red numbers")},Red.prototype._verify2=function(a,b){assert((a.negative|b.negative)==0,"red works only with positives"),assert(a.red&&a.red===b.red,"red works only with red numbers")},Red.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(move(a,a.umod(this.m)._forceRed(this)),a)},Red.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Red.prototype.add=function(a,b){this._verify2(a,b);var res=a.add(b);return res.cmp(this.m)>=0&&res.isub(this.m),res._forceRed(this)},Red.prototype.iadd=function(a,b){this._verify2(a,b);var res=a.iadd(b);return res.cmp(this.m)>=0&&res.isub(this.m),res},Red.prototype.sub=function(a,b){this._verify2(a,b);var res=a.sub(b);return 0>res.cmpn(0)&&res.iadd(this.m),res._forceRed(this)},Red.prototype.isub=function(a,b){this._verify2(a,b);var res=a.isub(b);return 0>res.cmpn(0)&&res.iadd(this.m),res},Red.prototype.shl=function(a,num){return this._verify1(a),this.imod(a.ushln(num))},Red.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},Red.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},Red.prototype.isqr=function(a){return this.imul(a,a.clone())},Red.prototype.sqr=function(a){return this.mul(a,a)},Red.prototype.sqrt=function(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);if(assert(mod3%2==1),3===mod3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);assert(!q.isZero());var one=new BN(1).toRed(this),nOne=one.redNeg(),lpow=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new BN(2*z*z).toRed(this);0!==this.pow(z,lpow).cmp(nOne);)z.redIAdd(nOne);for(var c=this.pow(z,q),r=this.pow(a,q.addn(1).iushrn(1)),t=this.pow(a,q),m=s;0!==t.cmp(one);){for(var tmp=t,i=0;0!==tmp.cmp(one);i++)tmp=tmp.redSqr();assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b),c=b.redSqr(),t=t.redMul(c),m=i}return r},Red.prototype.invm=function(a){var inv=a._invmp(this.m);return 0!==inv.negative?(inv.negative=0,this.imod(inv).redNeg()):this.imod(inv)},Red.prototype.pow=function(a,num){if(num.isZero())return new BN(1).toRed(this);if(0===num.cmpn(1))return a.clone();var windowSize=4,wnd=Array(16);wnd[0]=new BN(1).toRed(this),wnd[1]=a;for(var i=2;i<wnd.length;i++)wnd[i]=this.mul(wnd[i-1],a);var res=wnd[0],current=0,currentLen=0,start=num.bitLength()%26;for(0===start&&(start=26),i=num.length-1;i>=0;i--){for(var word=num.words[i],j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]&&(res=this.sqr(res)),0===bit&&0===current){currentLen=0;continue}current<<=1,current|=bit,(++currentLen===windowSize||0===i&&0===j)&&(res=this.mul(res,wnd[current]),currentLen=0,current=0)}start=26}return res},Red.prototype.convertTo=function(num){var r=num.umod(this.m);return r===num?r.clone():r},Red.prototype.convertFrom=function(num){var res=num.clone();return res.red=null,res},BN.mont=function(num){return new Mont(num)},inherits(Mont,Red),Mont.prototype.convertTo=function(num){return this.imod(num.ushln(this.shift))},Mont.prototype.convertFrom=function(num){var r=this.imod(num.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):0>u.cmpn(0)&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):0>u.cmpn(0)&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(module=__webpack_require__.nmd(module),this)},2680:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(7286),callBind=__webpack_require__(9429),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")>-1?callBind(intrinsic):intrinsic}},9429:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var bind=__webpack_require__(4090),GetIntrinsic=__webpack_require__(7286),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),$max=GetIntrinsic("%Math.max%");if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}module.exports=function(originalFunction){var func=$reflectApply(bind,$call,arguments);return $gOPD&&$defineProperty&&$gOPD(func,"length").configurable&&$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))}),func};var applyBind=function(){return $reflectApply(bind,$apply,arguments)};$defineProperty?$defineProperty(module.exports,"apply",{value:applyBind}):module.exports.apply=applyBind},3243:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var isCallable=__webpack_require__(9680),toStr=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,forEachArray=function(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++)hasOwnProperty.call(array,i)&&(null==receiver?iterator(array[i],i,array):iterator.call(receiver,array[i],i,array))},forEachString=function(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++)null==receiver?iterator(string.charAt(i),i,string):iterator.call(receiver,string.charAt(i),i,string)},forEachObject=function(object,iterator,receiver){for(var k in object)hasOwnProperty.call(object,k)&&(null==receiver?iterator(object[k],k,object):iterator.call(receiver,object[k],k,object))},forEach=function(list,iterator,thisArg){var receiver;if(!isCallable(iterator))throw TypeError("iterator must be a function");arguments.length>=3&&(receiver=thisArg),"[object Array]"===toStr.call(list)?forEachArray(list,iterator,receiver):"string"==typeof list?forEachString(list,iterator,receiver):forEachObject(list,iterator,receiver)};module.exports=forEach},7795:function(module){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString,funcType="[object Function]";module.exports=function(that){var bound,target=this;if("function"!=typeof target||toStr.call(target)!==funcType)throw TypeError(ERROR_MESSAGE+target);for(var args=slice.call(arguments,1),binder=function(){if(!(this instanceof bound))return target.apply(that,args.concat(slice.call(arguments)));var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},4090:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var implementation=__webpack_require__(7795);module.exports=Function.prototype.bind||implementation},7286:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var undefined,$SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError,hasSymbols=__webpack_require__(2636)(),getProto=Object.getPrototypeOf||function(x){return x.__proto__},needsEval={},TypedArray="undefined"==typeof Uint8Array?undefined:getProto(Uint8Array),INTRINSICS={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto(new Map()[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto(new Set()[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},doEval=function doEval(name){var value;if("%AsyncFunction%"===name)value=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===name)value=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===name)value=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===name){var fn=doEval("%AsyncGeneratorFunction%");fn&&(value=fn.prototype)}else if("%AsyncIteratorPrototype%"===name){var gen=doEval("%AsyncGenerator%");gen&&(value=getProto(gen.prototype))}return INTRINSICS[name]=value,value},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=__webpack_require__(4090),hasOwn=__webpack_require__(3198),$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(string){var first=$strSlice(string,0,1),last=$strSlice(string,-1);if("%"===first&&"%"!==last)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===last&&"%"!==first)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var result=[];return $replace(string,rePropName,function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match}),result},getBaseIntrinsic=function(name,allowMissing){var alias,intrinsicName=name;if(hasOwn(LEGACY_ALIASES,intrinsicName)&&(intrinsicName="%"+(alias=LEGACY_ALIASES[intrinsicName])[0]+"%"),hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval&&(value=doEval(intrinsicName)),void 0===value&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return{alias:alias,name:intrinsicName,value:value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function(name,allowMissing){if("string"!=typeof name||0===name.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new $TypeError('"allowMissing" argument must be a boolean');if(null===$exec(/^%?[^%]*%?$/g,name))throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var parts=stringToPath(name),intrinsicBaseName=parts.length>0?parts[0]:"",intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing),intrinsicRealName=intrinsic.name,value=intrinsic.value,skipFurtherCaching=!1,alias=intrinsic.alias;alias&&(intrinsicBaseName=alias[0],$spliceApply(parts,$concat([0,1],alias)));for(var i=1,isOwn=!0;i<parts.length;i+=1){var part=parts[i],first=$strSlice(part,0,1),last=$strSlice(part,-1);if(('"'===first||"'"===first||"`"===first||'"'===last||"'"===last||"`"===last)&&first!==last)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==part&&isOwn||(skipFurtherCaching=!0),intrinsicBaseName+="."+part,hasOwn(INTRINSICS,intrinsicRealName="%"+intrinsicBaseName+"%"))value=INTRINSICS[intrinsicRealName];else if(null!=value){if(!(part in value)){if(!allowMissing)throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");return}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);value=(isOwn=!!desc)&&"get"in desc&&!("originalValue"in desc.get)?desc.get:value[part]}else isOwn=hasOwn(value,part),value=value[part];isOwn&&!skipFurtherCaching&&(INTRINSICS[intrinsicRealName]=value)}}return value}},2636:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var origSymbol="undefined"!=typeof Symbol&&Symbol,hasSymbolSham=__webpack_require__(6679);module.exports=function(){return"function"==typeof origSymbol&&"function"==typeof Symbol&&"symbol"==typeof origSymbol("foo")&&"symbol"==typeof Symbol("bar")&&hasSymbolSham()}},6679:function(module){"use strict";module.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym||"[object Symbol]"!==Object.prototype.toString.call(sym)||"[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;var symVal=42;for(sym in obj[sym]=symVal,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym||!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(descriptor.value!==symVal||!0!==descriptor.enumerable)return!1}return!0}},7226:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var hasSymbols=__webpack_require__(6679);module.exports=function(){return hasSymbols()&&!!Symbol.toStringTag}},3198:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var bind=__webpack_require__(4090);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},2635:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var hasToStringTag=__webpack_require__(7226)(),$toString=__webpack_require__(2680)("Object.prototype.toString"),isStandardArguments=function(value){return(!hasToStringTag||!value||"object"!=typeof value||!(Symbol.toStringTag in value))&&"[object Arguments]"===$toString(value)},isLegacyArguments=function(value){return!!isStandardArguments(value)||null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==$toString(value)&&"[object Function]"===$toString(value.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},9680:function(module){"use strict";var badArrayLike,isCallableMarker,fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(_){_!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},tryFunctionObject=function(value){try{if(isES6ClassFn(value))return!1;return fnToStr.call(value),!0}catch(e){return!1}},toStr=Object.prototype.toString,fnClass="[object Function]",genClass="[object GeneratorFunction]",hasToStringTag="function"==typeof Symbol&&!!Symbol.toStringTag,documentDotAll="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};module.exports=reflectApply?function(value){if(value===documentDotAll)return!0;if(!value||"function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker)return!1}return!isES6ClassFn(value)}:function(value){if(value===documentDotAll)return!0;if(!value||"function"!=typeof value&&"object"!=typeof value)return!1;if("function"==typeof value&&!value.prototype)return!0;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return strClass===fnClass||strClass===genClass}},3138:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var GeneratorFunction,toStr=Object.prototype.toString,fnToStr=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag=__webpack_require__(7226)(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag)return!1;try{return Function("return function*() {}")()}catch(e){}};module.exports=function(fn){if("function"!=typeof fn)return!1;if(isFnRegex.test(fnToStr.call(fn)))return!0;if(!hasToStringTag)return"[object GeneratorFunction]"===toStr.call(fn);if(!getProto)return!1;if(void 0===GeneratorFunction){var generatorFunc=getGeneratorFunc();GeneratorFunction=!!generatorFunc&&getProto(generatorFunc)}return getProto(fn)===GeneratorFunction}},198:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var forEach=__webpack_require__(3243),availableTypedArrays=__webpack_require__(2191),callBound=__webpack_require__(2680),$toString=callBound("Object.prototype.toString"),hasToStringTag=__webpack_require__(7226)(),g="undefined"==typeof globalThis?__webpack_require__.g:globalThis,typedArrays=availableTypedArrays(),$indexOf=callBound("Array.prototype.indexOf",!0)||function(array,value){for(var i=0;i<array.length;i+=1)if(array[i]===value)return i;return -1},$slice=callBound("String.prototype.slice"),toStrTags={},gOPD=__webpack_require__(9765),getPrototypeOf=Object.getPrototypeOf;hasToStringTag&&gOPD&&getPrototypeOf&&forEach(typedArrays,function(typedArray){var arr=new g[typedArray];if(Symbol.toStringTag in arr){var proto=getPrototypeOf(arr),descriptor=gOPD(proto,Symbol.toStringTag);descriptor||(descriptor=gOPD(getPrototypeOf(proto),Symbol.toStringTag)),toStrTags[typedArray]=descriptor.get}});var tryTypedArrays=function(value){var anyTrue=!1;return forEach(toStrTags,function(getter,typedArray){if(!anyTrue)try{anyTrue=getter.call(value)===typedArray}catch(e){}}),anyTrue};module.exports=function(value){return!!value&&"object"==typeof value&&(hasToStringTag&&Symbol.toStringTag in value?!!gOPD&&tryTypedArrays(value):$indexOf(typedArrays,$slice($toString(value),8,-1))>-1)}},4987:function(module){var __dirname="/";!function(){"use strict";var e={864:function(e){var r,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}r=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function EventEmitter(){EventEmitter.init.call(this)}e.exports=EventEmitter,e.exports.once=once,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var s=10;function checkListener(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,n,r){if(checkListener(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=_getMaxListeners(e))>0&&o.length>i&&!o.warned){o.warned=!0;var i,s,o,f=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=o.length,ProcessEmitWarning(f)}return e}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=onceWrapper.bind(r);return i.listener=n,r.wrapFn=i,i}function _listeners(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?unwrapListeners(i):arrayClone(i,i.length)}function listenerCount(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function arrayClone(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function once(e,t){return new Promise(function(n,r){function errorListener(n){e.removeListener(t,resolver),r(n)}function resolver(){"function"==typeof e.removeListener&&e.removeListener("error",errorListener),n([].slice.call(arguments))}eventTargetAgnosticAddListener(e,t,resolver,{once:!0}),"error"!==t&&addErrorHandlerIfEventEmitter(e,errorListener,{once:!0})})}function addErrorHandlerIfEventEmitter(e,t,n){"function"==typeof e.on&&eventTargetAgnosticAddListener(e,"error",t,n)}function eventTargetAgnosticAddListener(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function wrapListener(i){r.once&&e.removeEventListener(t,wrapListener),n(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,f=Error("Unhandled error."+(o?" ("+o.message+")":""));throw f.context=o,f}var u=s[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else for(var a=u.length,c=arrayClone(u,a),r=0;r<a;++r)n(c[r],this,t);return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,i,s,o;if(checkListener(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():spliceOne(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var s,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(s=i[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}}},t={};function __nccwpck_require__1(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}},s=!0;try{e[n](i,i.exports,__nccwpck_require__1),s=!1}finally{s&&delete t[n]}return i.exports}__nccwpck_require__1.ab=__dirname+"/";var n=__nccwpck_require__1(864);module.exports=n}()},7958:function(module){var n,e,__dirname="/";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/"),(e=n={}).endianness=function(){return"LE"},e.hostname=function(){return"undefined"!=typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"},module.exports=n},7518:function(module,__unused_webpack_exports,__webpack_require__){var __dirname="/",process=__webpack_require__(4406);!function(){var e={782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype,e.prototype=new TempCtor,e.prototype.constructor=e}}},646:function(e){"use strict";let t={};function createErrorType(e,r,n){function getMessage(e,t,n){return"string"==typeof r?r:r(e,t,n)}n||(n=Error);class NodeError extends n{constructor(e,t,r){super(getMessage(e,t,r))}}NodeError.prototype.name=n.name,NodeError.prototype.code=e,t[e]=NodeError}function oneOf(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let r=e.length;return(e=e.map(e=>String(e)),r>2)?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}function startsWith(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}createErrorType("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(e,t,r){let n,i;if("string"==typeof t&&startsWith(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",endsWith(e," argument"))i=`The ${e} ${n} ${oneOf(t,"type")}`;else{let r1=includes(e,".")?"property":"argument";i=`The "${e}" ${r1} ${n} ${oneOf(t,"type")}`}return i+`. Received type ${typeof r}`},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},403:function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=Duplex;var i=r(709),a=r(337);r(782)(Duplex,i);for(var o=n(a.prototype),s=0;s<o.length;s++){var f=o[s];Duplex.prototype[f]||(Duplex.prototype[f]=a.prototype[f])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);i.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},889:function(e,t,r){"use strict";e.exports=PassThrough;var n=r(170);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);n.call(this,e)}r(782)(PassThrough,n),PassThrough.prototype._transform=function(e,t,r){r(null,e)}},709:function(e,t,r){"use strict";e.exports=Readable,Readable.ReadableState=ReadableState,r(361).EventEmitter;var n,u,w,m,S,a=function(e,t){return e.listeners(t).length},o=r(678),s=r(300).Buffer,f=__webpack_require__.g.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return s.from(e)}function _isUint8Array(e){return s.isBuffer(e)||e instanceof f}var l=r(837);u=l&&l.debuglog?l.debuglog("stream"):function(){};var d=r(379),c=r(25),p=r(776).getHighWaterMark,b=r(646).q,g=b.ERR_INVALID_ARG_TYPE,y=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,v=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(782)(Readable,o);var R=c.errorOrDestroy,E=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t,i){n=n||r(403),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=p(this,e,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(w||(w=r(704).s),this.decoder=new w(e.encoding),this.encoding=e.encoding)}function Readable(e){if(n=n||r(403),!(this instanceof Readable))return new Readable(e);var t=this instanceof n;this._readableState=new ReadableState(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function readableAddChunk(e,t,r,n,i){u("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,onEofChunk(e,a);else if(i||(o=chunkInvalid(a,t)),o)R(e,o);else if(a.objectMode||t&&t.length>0){if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=_uint8ArrayToBuffer(t)),n)a.endEmitted?R(e,new v):addChunk(e,a,t,!0);else if(a.ended)R(e,new y);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?addChunk(e,a,t,!1):maybeReadMore(e,a)):addChunk(e,a,t,!1)}}else n||(a.reading=!1,maybeReadMore(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function addChunk(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var r;return _isUint8Array(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new g("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=c.destroy,Readable.prototype._undestroy=c.undestroy,Readable.prototype._destroy=function(e,t){t(e)},Readable.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),readableAddChunk(this,e,t,!1,n)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){w||(w=r(704).s);var t=new w(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function computeNewHighWaterMark(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length)?e:t.ended?t.length:(t.needReadable=!0,0)}function onEofChunk(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_(e)))}}function emitReadable(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_,e))}function emitReadable_(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,flow(e))}}function updateReadableListening(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick(e){u("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_,e,t))}function resume_(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function endReadable(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}Readable.prototype.read=function(e){u("read",e),e=parseInt(e,10);var i,t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n=t.needReadable;return u("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",n=!0),t.ended||t.reading?u("reading or ended",n=!1):n&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(i=e>0?fromList(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==i&&this.emit("data",i),i},Readable.prototype._read=function(e){R(this,new _("_read()"))},Readable.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,u("pipe count=%d opts=%j",n.pipesCount,t);var o=t&&!1===t.end||e===process.stdout||e===process.stderr?unpipe:onend;function onunpipe(e,t){u("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,cleanup())}function onend(){u("onend"),e.end()}n.endEmitted?process.nextTick(o):r.once("end",o),e.on("unpipe",onunpipe);var s=pipeOnDrain(r);e.on("drain",s);var f=!1;function cleanup(){u("cleanup"),e.removeListener("close",onclose),e.removeListener("finish",onfinish),e.removeListener("drain",s),e.removeListener("error",onerror),e.removeListener("unpipe",onunpipe),r.removeListener("end",onend),r.removeListener("end",unpipe),r.removeListener("data",ondata),f=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&s()}function ondata(t){u("ondata");var i=e.write(t);u("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf(n.pipes,e))&&!f&&(u("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function onerror(t){u("onerror",t),unpipe(),e.removeListener("error",onerror),0===a(e,"error")&&R(e,t)}function onclose(){e.removeListener("finish",onfinish),unpipe()}function onfinish(){u("onfinish"),e.removeListener("close",onclose),unpipe()}function unpipe(){u("unpipe"),r.unpipe(e)}return r.on("data",ondata),prependListener(e,"error",onerror),e.once("close",onclose),e.once("finish",onfinish),e.emit("pipe",r),n.flowing||(u("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=indexOf(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},Readable.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,u("on readable",n.length,n.reading),n.length?emitReadable(this):n.reading||process.nextTick(nReadingNextTick,this)),r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening,this),r},Readable.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&process.nextTick(updateReadableListening,this),t},Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,resume(this,e)),e.paused=!1,this},Readable.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!=i)&&(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===m&&(m=r(871)),m(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(e,t){return void 0===S&&(S=r(727)),S(Readable,e,t)})},170:function(e,t,r){"use strict";e.exports=Transform;var n=r(646).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,a=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,f=r(403);function afterTransform(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new a);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);f.call(this,e),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function prefinish(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush(function(t,r){done(e,t,r)})}function done(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}r(782)(Transform,f),Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,f.prototype.push.call(this,e,t)},Transform.prototype._transform=function(e,t,r){r(new i("_transform()"))},Transform.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Transform.prototype._destroy=function(e,t){f.prototype._destroy.call(this,e,function(e){t(e)})}},337:function(e,t,r){"use strict";function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}e.exports=Writable,Writable.WritableState=WritableState;var n,m,i={deprecate:r(769)},a=r(678),o=r(300).Buffer,s=__webpack_require__.g.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return o.from(e)}function _isUint8Array(e){return o.isBuffer(e)||e instanceof s}var f=r(25),u=r(776).getHighWaterMark,d=r(646).q,c=d.ERR_INVALID_ARG_TYPE,h=d.ERR_METHOD_NOT_IMPLEMENTED,p=d.ERR_MULTIPLE_CALLBACK,b=d.ERR_STREAM_CANNOT_PIPE,g=d.ERR_STREAM_DESTROYED,y=d.ERR_STREAM_NULL_VALUES,_=d.ERR_STREAM_WRITE_AFTER_END,v=d.ERR_UNKNOWN_ENCODING,w=f.errorOrDestroy;function nop(){}function WritableState(e,t,i){n=n||r(403),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){var t=this instanceof(n=n||r(403));if(!t&&!m.call(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function writeAfterEnd(e,t){var r=new _;w(e,r),process.nextTick(t,r)}function validChunk(e,t,r,n){var i;return null===r?i=new y:"string"==typeof r||t.objectMode||(i=new c("chunk",["string","Buffer"],r)),!i||(w(e,i),process.nextTick(n,i),!1)}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,r)),t}function writeOrBuffer(e,t,r,n,i,a){if(!r){var o=decodeChunk(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,s,n,i,a);return f}function doWrite(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function onwriteError(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,w(e,n)):(i(n),e._writableState.errorEmitted=!0,w(e,n),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new p;if(onwriteStateUpdate(r),t)onwriteError(e,r,n,t,i);else{var a=needFinish(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),n?process.nextTick(afterWrite,e,r,a,i):afterWrite(e,r,a,i)}}function afterWrite(e,t,r,n){r||onwriteDrain(e,t),t.pendingcb--,n(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=Array(t.bufferedRequestCount),a=t.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)i[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,doWrite(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,l=r.encoding,u=r.callback,d=t.objectMode?1:f.length;if(doWrite(e,t,!1,d,f,l,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal,e,t)))}function finishMaybe(e,t){var r=needFinish(t);if(r&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}r(782)(Writable,a),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!m.call(this,e)||this===Writable&&e&&e._writableState instanceof WritableState}})):m=function(e){return e instanceof this},Writable.prototype.pipe=function(){w(this,new b)},Writable.prototype.write=function(e,t,r){var n=this._writableState,i=!1,a=!n.objectMode&&_isUint8Array(e);return a&&!o.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop),n.ending?writeAfterEnd(this,r):(a||validChunk(this,n,e,r))&&(n.pendingcb++,i=writeOrBuffer(this,n,a,e,t,r)),i},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new h("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||endWritable(this,n,r),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=f.destroy,Writable.prototype._undestroy=f.undestroy,Writable.prototype._destroy=function(e,t){t(e)}},871:function(e,t,r){"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n,i=r(698),a=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),f=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),d=Symbol("stream");function createIterResult(e,t){return{value:e,done:t}}function readAndResolve(e){var t=e[a];if(null!==t){var r=e[d].read();null!==r&&(e[l]=null,e[a]=null,e[o]=null,t(createIterResult(r,!1)))}}function onReadable(e){process.nextTick(readAndResolve,e)}function wrapForNext(e,t){return function(r,n){e.then(function(){if(t[f]){r(createIterResult(void 0,!0));return}t[u](r,n)},n)}}var c=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((_defineProperty(n={get stream(){return this[d]},next:function(){var n,e=this,t=this[s];if(null!==t)return Promise.reject(t);if(this[f])return Promise.resolve(createIterResult(void 0,!0));if(this[d].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[s]?r(e[s]):t(createIterResult(void 0,!0))})});var r=this[l];if(r)n=new Promise(wrapForNext(r,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(createIterResult(i,!1));n=new Promise(this[u])}return this[l]=n,n}},Symbol.asyncIterator,function(){return this}),_defineProperty(n,"return",function(){var e=this;return new Promise(function(t,r){e[d].destroy(null,function(e){if(e){r(e);return}t(createIterResult(void 0,!0))})})}),n),c),p=function(e){var t,r=Object.create(h,(_defineProperty(t={},d,{value:e,writable:!0}),_defineProperty(t,a,{value:null,writable:!0}),_defineProperty(t,o,{value:null,writable:!0}),_defineProperty(t,s,{value:null,writable:!0}),_defineProperty(t,f,{value:e._readableState.endEmitted,writable:!0}),_defineProperty(t,u,{value:function(e,t){var n=r[d].read();n?(r[l]=null,r[a]=null,r[o]=null,e(createIterResult(n,!1))):(r[a]=e,r[o]=t)},writable:!0}),t));return r[l]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[o];null!==t&&(r[l]=null,r[a]=null,r[o]=null,t(e)),r[s]=e;return}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[o]=null,n(createIterResult(void 0,!0))),r[f]=!0}),e.on("readable",onReadable.bind(null,r)),r};e.exports=p},379:function(e,t,r){"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var i=r(300).Buffer,o=r(837).inspect,s=o&&o.custom||"inspect";function copyBuffer(e,t,r){i.prototype.copy.call(e,t,r)}e.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return _createClass(BufferList,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)copyBuffer(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0==(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,o),0==(e-=o)){o===a.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=a.slice(o));break}++n}return this.length-=n,t}},{key:s,value:function(e,t){return o(this,_objectSpread({},t,{depth:0,customInspect:!1}))}}]),BufferList}()},25:function(e){"use strict";function destroy(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,e)):process.nextTick(emitErrorNT,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?process.nextTick(emitCloseNT,r):(r._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,r,e)):process.nextTick(emitErrorAndCloseNT,r,e):t?(process.nextTick(emitCloseNT,r),t(e)):process.nextTick(emitCloseNT,r)}),this)}function emitErrorAndCloseNT(e,t){emitErrorNT(e,t),emitCloseNT(e)}function emitCloseNT(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(e,t){e.emit("error",t)}function errorOrDestroy(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}},698:function(e,t,r){"use strict";var n=r(646).q.ERR_STREAM_PREMATURE_CLOSE;function once(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function noop(){}function isRequest(e){return e.setHeader&&"function"==typeof e.abort}function eos(e,t,r){if("function"==typeof t)return eos(e,null,t);t||(t={}),r=once(r||noop);var i=t.readable||!1!==t.readable&&e.readable,a=t.writable||!1!==t.writable&&e.writable,o=function(){e.writable||f()},s=e._writableState&&e._writableState.finished,f=function(){a=!1,s=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,a||r.call(e)},d=function(t){r.call(e,t)},c=function(){var t;return i&&!l?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):a&&!s?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},h=function(){e.req.on("finish",f)};return isRequest(e)?(e.on("complete",f),e.on("abort",c),e.req?h():e.on("request",h)):a&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",f),!1!==t.error&&e.on("error",d),e.on("close",c),function(){e.removeListener("complete",f),e.removeListener("abort",c),e.removeListener("request",h),e.req&&e.req.removeListener("finish",f),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",f),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",c)}}e.exports=eos},727:function(e,t,r){"use strict";function asyncGeneratorStep(e,t,r,n,i,a,o){try{var s=e[a](o),f=s.value}catch(e1){r(e1);return}s.done?t(f):Promise.resolve(f).then(n,i)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,n,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,i,_next,_throw,"throw",e)}_next(void 0)})}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=r(646).q.ERR_INVALID_ARG_TYPE;function from(e,t,r){if(t&&"function"==typeof t.next)i=t;else if(t&&t[Symbol.asyncIterator])i=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])i=t[Symbol.iterator]();else throw new n("iterable",["Iterable"],t);var i,a=new e(_objectSpread({objectMode:!0},r)),o=!1;function next(){return _next2.apply(this,arguments)}function _next2(){return(_next2=_asyncToGenerator(function*(){try{var e=yield i.next(),t=e.value;e.done?a.push(null):a.push((yield t))?next():o=!1}catch(e1){a.destroy(e1)}})).apply(this,arguments)}return a._read=function(){o||(o=!0,next())},a}e.exports=from},442:function(e,t,r){"use strict";function once(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var n,i=r(646).q,a=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&"function"==typeof e.abort}function destroyer(e,t,i,a){a=once(a);var s=!1;e.on("close",function(){s=!0}),void 0===n&&(n=r(698)),n(e,{readable:t,writable:i},function(e){if(e)return a(e);s=!0,a()});var f=!1;return function(t){if(!s&&!f){if(f=!0,isRequest(e))return e.abort();if("function"==typeof e.destroy)return e.destroy();a(t||new o("pipe"))}}}function call(e){e()}function pipe(e,t){return e.pipe(t)}function popCallback(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():noop}function pipeline(){for(var i,e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=popCallback(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var o=t.map(function(e,r){var a=r<t.length-1;return destroyer(e,a,r>0,function(e){i||(i=e),e&&o.forEach(call),a||(o.forEach(call),n(i))})});return t.reduce(pipe)}e.exports=pipeline},776:function(e,t,r){"use strict";var n=r(646).q.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getHighWaterMark(e,t,r,i){var a=highWaterMarkFrom(t,i,r);if(null!=a){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var o=i?r:"highWaterMark";throw new n(o,a)}return Math.floor(a)}return e.objectMode?16:16384}e.exports={getHighWaterMark:getHighWaterMark}},678:function(e,t,r){e.exports=r(781)},55:function(e,t,r){var n=r(300),i=n.Buffer;function copyProps(e,t){for(var r in e)t[r]=e[r]}function SafeBuffer(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(copyProps(n,t),t.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(i.prototype),copyProps(i,SafeBuffer),SafeBuffer.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},SafeBuffer.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},173:function(e,t,r){e.exports=Stream;var n=r(361).EventEmitter;function Stream(){n.call(this)}r(782)(Stream,n),Stream.Readable=r(709),Stream.Writable=r(337),Stream.Duplex=r(403),Stream.Transform=r(170),Stream.PassThrough=r(889),Stream.finished=r(698),Stream.pipeline=r(442),Stream.Stream=Stream,Stream.prototype.pipe=function(e,t){var r=this;function ondata(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function ondrain(){r.readable&&r.resume&&r.resume()}r.on("data",ondata),e.on("drain",ondrain),e._isStdio||t&&!1===t.end||(r.on("end",onend),r.on("close",onclose));var i=!1;function onend(){i||(i=!0,e.end())}function onclose(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function onerror(e){if(cleanup(),0===n.listenerCount(this,"error"))throw e}function cleanup(){r.removeListener("data",ondata),e.removeListener("drain",ondrain),r.removeListener("end",onend),r.removeListener("close",onclose),r.removeListener("error",onerror),e.removeListener("error",onerror),r.removeListener("end",cleanup),r.removeListener("close",cleanup),e.removeListener("close",cleanup)}return r.on("error",onerror),e.on("error",onerror),r.on("end",cleanup),r.on("close",cleanup),e.on("close",cleanup),e.emit("pipe",r),e}},704:function(e,t,r){"use strict";var n=r(55).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}function StringDecoder(e){var t;switch(this.encoding=normalizeEncoding(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(n<r)return 0;var i=utf8CheckByte(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=utf8CheckByte(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=utf8CheckByte(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function utf8CheckExtraBytes(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}t.s=StringDecoder,StringDecoder.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},769:function(e){function deprecate(e,t){if(config("noDeprecation"))return e;var r=!1;return function(){if(!r){if(config("throwDeprecation"))throw Error(t);config("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}function config(e){try{if(!__webpack_require__.g.localStorage)return!1}catch(e1){return!1}var t=__webpack_require__.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=deprecate},300:function(e){"use strict";e.exports=__webpack_require__(8834)},361:function(e){"use strict";e.exports=__webpack_require__(4987)},781:function(e){"use strict";e.exports=__webpack_require__(4987).EventEmitter},837:function(e){"use strict";e.exports=__webpack_require__(3335)}},t={};function __nccwpck_require__1(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}},a=!0;try{e[r](i,i.exports,__nccwpck_require__1),a=!1}finally{a&&delete t[r]}return i.exports}__nccwpck_require__1.ab=__dirname+"/";var r=__nccwpck_require__1(173);module.exports=r}()},4339:function(module){var __webpack_modules__,__webpack_exports__,__dirname="/";__webpack_modules__={950:function(__unused_webpack_module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return -1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,o=r.execScript;!n&&o&&(o.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var c=Object_keys(r),i=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(c,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),i},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}}},"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/"),__webpack_exports__={},__webpack_modules__[950](0,__webpack_exports__),module.exports=__webpack_exports__},9782:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";let QrCode,QrSegment;__webpack_require__.d(__webpack_exports__,{tv:function(){return QRCodeSVG}});var qrcodegen2,qrcodegen21,qrcodegen,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2784),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&0>exclude.indexOf(prop)&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))0>exclude.indexOf(prop)&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target};(qrcodegen2=>{let _QrCode=class{constructor(version,errorCorrectionLevel,dataCodewords,msk){if(this.version=version,this.errorCorrectionLevel=errorCorrectionLevel,this.modules=[],this.isFunction=[],version<_QrCode.MIN_VERSION||version>_QrCode.MAX_VERSION)throw RangeError("Version value out of range");if(msk<-1||msk>7)throw RangeError("Mask value out of range");this.size=4*version+17;let row=[];for(let i=0;i<this.size;i++)row.push(!1);for(let i1=0;i1<this.size;i1++)this.modules.push(row.slice()),this.isFunction.push(row.slice());this.drawFunctionPatterns();let allCodewords=this.addEccAndInterleave(dataCodewords);if(this.drawCodewords(allCodewords),-1==msk){let minPenalty=1e9;for(let i2=0;i2<8;i2++){this.applyMask(i2),this.drawFormatBits(i2);let penalty=this.getPenaltyScore();penalty<minPenalty&&(msk=i2,minPenalty=penalty),this.applyMask(i2)}}assert(0<=msk&&msk<=7),this.mask=msk,this.applyMask(msk),this.drawFormatBits(msk),this.isFunction=[]}static encodeText(text,ecl){let segs=qrcodegen2.QrSegment.makeSegments(text);return _QrCode.encodeSegments(segs,ecl)}static encodeBinary(data,ecl){let seg=qrcodegen2.QrSegment.makeBytes(data);return _QrCode.encodeSegments([seg],ecl)}static encodeSegments(segs,ecl,minVersion=1,maxVersion=40,mask=-1,boostEcl=!0){let version,dataUsedBits;if(!(_QrCode.MIN_VERSION<=minVersion&&minVersion<=maxVersion&&maxVersion<=_QrCode.MAX_VERSION)||mask<-1||mask>7)throw RangeError("Invalid value");for(version=minVersion;;version++){let dataCapacityBits2=8*_QrCode.getNumDataCodewords(version,ecl),usedBits=QrSegment.getTotalBits(segs,version);if(usedBits<=dataCapacityBits2){dataUsedBits=usedBits;break}if(version>=maxVersion)throw RangeError("Data too long")}for(let newEcl of[_QrCode.Ecc.MEDIUM,_QrCode.Ecc.QUARTILE,_QrCode.Ecc.HIGH])boostEcl&&dataUsedBits<=8*_QrCode.getNumDataCodewords(version,newEcl)&&(ecl=newEcl);let bb=[];for(let seg of segs)for(let b of(appendBits(seg.mode.modeBits,4,bb),appendBits(seg.numChars,seg.mode.numCharCountBits(version),bb),seg.getData()))bb.push(b);assert(bb.length==dataUsedBits);let dataCapacityBits=8*_QrCode.getNumDataCodewords(version,ecl);assert(bb.length<=dataCapacityBits),appendBits(0,Math.min(4,dataCapacityBits-bb.length),bb),appendBits(0,(8-bb.length%8)%8,bb),assert(bb.length%8==0);for(let padByte=236;bb.length<dataCapacityBits;padByte^=253)appendBits(padByte,8,bb);let dataCodewords=[];for(;8*dataCodewords.length<bb.length;)dataCodewords.push(0);return bb.forEach((b,i)=>dataCodewords[i>>>3]|=b<<7-(7&i)),new _QrCode(version,ecl,dataCodewords,mask)}getModule(x,y){return 0<=x&&x<this.size&&0<=y&&y<this.size&&this.modules[y][x]}getModules(){return this.modules}drawFunctionPatterns(){for(let i=0;i<this.size;i++)this.setFunctionModule(6,i,i%2==0),this.setFunctionModule(i,6,i%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let alignPatPos=this.getAlignmentPatternPositions(),numAlign=alignPatPos.length;for(let i1=0;i1<numAlign;i1++)for(let j=0;j<numAlign;j++)0==i1&&0==j||0==i1&&j==numAlign-1||i1==numAlign-1&&0==j||this.drawAlignmentPattern(alignPatPos[i1],alignPatPos[j]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(mask){let data=this.errorCorrectionLevel.formatBits<<3|mask,rem=data;for(let i=0;i<10;i++)rem=rem<<1^(rem>>>9)*1335;let bits=(data<<10|rem)^21522;assert(bits>>>15==0);for(let i1=0;i1<=5;i1++)this.setFunctionModule(8,i1,getBit(bits,i1));this.setFunctionModule(8,7,getBit(bits,6)),this.setFunctionModule(8,8,getBit(bits,7)),this.setFunctionModule(7,8,getBit(bits,8));for(let i2=9;i2<15;i2++)this.setFunctionModule(14-i2,8,getBit(bits,i2));for(let i3=0;i3<8;i3++)this.setFunctionModule(this.size-1-i3,8,getBit(bits,i3));for(let i4=8;i4<15;i4++)this.setFunctionModule(8,this.size-15+i4,getBit(bits,i4));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let rem=this.version;for(let i=0;i<12;i++)rem=rem<<1^(rem>>>11)*7973;let bits=this.version<<12|rem;assert(bits>>>18==0);for(let i1=0;i1<18;i1++){let color=getBit(bits,i1),a=this.size-11+i1%3,b=Math.floor(i1/3);this.setFunctionModule(a,b,color),this.setFunctionModule(b,a,color)}}drawFinderPattern(x,y){for(let dy=-4;dy<=4;dy++)for(let dx=-4;dx<=4;dx++){let dist=Math.max(Math.abs(dx),Math.abs(dy)),xx=x+dx,yy=y+dy;0<=xx&&xx<this.size&&0<=yy&&yy<this.size&&this.setFunctionModule(xx,yy,2!=dist&&4!=dist)}}drawAlignmentPattern(x,y){for(let dy=-2;dy<=2;dy++)for(let dx=-2;dx<=2;dx++)this.setFunctionModule(x+dx,y+dy,1!=Math.max(Math.abs(dx),Math.abs(dy)))}setFunctionModule(x,y,isDark){this.modules[y][x]=isDark,this.isFunction[y][x]=!0}addEccAndInterleave(data){let ver=this.version,ecl=this.errorCorrectionLevel;if(data.length!=_QrCode.getNumDataCodewords(ver,ecl))throw RangeError("Invalid argument");let numBlocks=_QrCode.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver],blockEccLen=_QrCode.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver],rawCodewords=Math.floor(_QrCode.getNumRawDataModules(ver)/8),numShortBlocks=numBlocks-rawCodewords%numBlocks,shortBlockLen=Math.floor(rawCodewords/numBlocks),blocks=[],rsDiv=_QrCode.reedSolomonComputeDivisor(blockEccLen);for(let i=0,k=0;i<numBlocks;i++){let dat=data.slice(k,k+shortBlockLen-blockEccLen+(i<numShortBlocks?0:1));k+=dat.length;let ecc=_QrCode.reedSolomonComputeRemainder(dat,rsDiv);i<numShortBlocks&&dat.push(0),blocks.push(dat.concat(ecc))}let result=[];for(let i1=0;i1<blocks[0].length;i1++)blocks.forEach((block,j)=>{(i1!=shortBlockLen-blockEccLen||j>=numShortBlocks)&&result.push(block[i1])});return assert(result.length==rawCodewords),result}drawCodewords(data){if(data.length!=Math.floor(_QrCode.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let i=0;for(let right=this.size-1;right>=1;right-=2){6==right&&(right=5);for(let vert=0;vert<this.size;vert++)for(let j=0;j<2;j++){let x=right-j,upward=(right+1&2)==0,y=upward?this.size-1-vert:vert;!this.isFunction[y][x]&&i<8*data.length&&(this.modules[y][x]=getBit(data[i>>>3],7-(7&i)),i++)}}assert(i==8*data.length)}applyMask(mask){if(mask<0||mask>7)throw RangeError("Mask value out of range");for(let y=0;y<this.size;y++)for(let x=0;x<this.size;x++){let invert;switch(mask){case 0:invert=(x+y)%2==0;break;case 1:invert=y%2==0;break;case 2:invert=x%3==0;break;case 3:invert=(x+y)%3==0;break;case 4:invert=(Math.floor(x/3)+Math.floor(y/2))%2==0;break;case 5:invert=x*y%2+x*y%3==0;break;case 6:invert=(x*y%2+x*y%3)%2==0;break;case 7:invert=((x+y)%2+x*y%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[y][x]&&invert&&(this.modules[y][x]=!this.modules[y][x])}}getPenaltyScore(){let result=0;for(let y=0;y<this.size;y++){let runColor=!1,runX=0,runHistory=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[y][x]==runColor?5==++runX?result+=_QrCode.PENALTY_N1:runX>5&&result++:(this.finderPenaltyAddHistory(runX,runHistory),runColor||(result+=this.finderPenaltyCountPatterns(runHistory)*_QrCode.PENALTY_N3),runColor=this.modules[y][x],runX=1);result+=this.finderPenaltyTerminateAndCount(runColor,runX,runHistory)*_QrCode.PENALTY_N3}for(let x1=0;x1<this.size;x1++){let runColor1=!1,runY=0,runHistory1=[0,0,0,0,0,0,0];for(let y1=0;y1<this.size;y1++)this.modules[y1][x1]==runColor1?5==++runY?result+=_QrCode.PENALTY_N1:runY>5&&result++:(this.finderPenaltyAddHistory(runY,runHistory1),runColor1||(result+=this.finderPenaltyCountPatterns(runHistory1)*_QrCode.PENALTY_N3),runColor1=this.modules[y1][x1],runY=1);result+=this.finderPenaltyTerminateAndCount(runColor1,runY,runHistory1)*_QrCode.PENALTY_N3}for(let y2=0;y2<this.size-1;y2++)for(let x2=0;x2<this.size-1;x2++){let color=this.modules[y2][x2];color==this.modules[y2][x2+1]&&color==this.modules[y2+1][x2]&&color==this.modules[y2+1][x2+1]&&(result+=_QrCode.PENALTY_N2)}let dark=0;for(let row of this.modules)dark=row.reduce((sum,color)=>sum+(color?1:0),dark);let total=this.size*this.size,k=Math.ceil(Math.abs(20*dark-10*total)/total)-1;return assert(0<=k&&k<=9),assert(0<=(result+=k*_QrCode.PENALTY_N4)&&result<=2568888),result}getAlignmentPatternPositions(){if(1==this.version)return[];{let numAlign=Math.floor(this.version/7)+2,step=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*numAlign-2)),result=[6];for(let pos=this.size-7;result.length<numAlign;pos-=step)result.splice(1,0,pos);return result}}static getNumRawDataModules(ver){if(ver<_QrCode.MIN_VERSION||ver>_QrCode.MAX_VERSION)throw RangeError("Version number out of range");let result=(16*ver+128)*ver+64;if(ver>=2){let numAlign=Math.floor(ver/7)+2;result-=(25*numAlign-10)*numAlign-55,ver>=7&&(result-=36)}return assert(208<=result&&result<=29648),result}static getNumDataCodewords(ver,ecl){return Math.floor(_QrCode.getNumRawDataModules(ver)/8)-_QrCode.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver]*_QrCode.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver]}static reedSolomonComputeDivisor(degree){if(degree<1||degree>255)throw RangeError("Degree out of range");let result=[];for(let i=0;i<degree-1;i++)result.push(0);result.push(1);let root=1;for(let i1=0;i1<degree;i1++){for(let j=0;j<result.length;j++)result[j]=_QrCode.reedSolomonMultiply(result[j],root),j+1<result.length&&(result[j]^=result[j+1]);root=_QrCode.reedSolomonMultiply(root,2)}return result}static reedSolomonComputeRemainder(data,divisor){let result=divisor.map(_=>0);for(let b of data){let factor=b^result.shift();result.push(0),divisor.forEach((coef,i)=>result[i]^=_QrCode.reedSolomonMultiply(coef,factor))}return result}static reedSolomonMultiply(x,y){if(x>>>8!=0||y>>>8!=0)throw RangeError("Byte out of range");let z=0;for(let i=7;i>=0;i--)z=z<<1^(z>>>7)*285^(y>>>i&1)*x;return assert(z>>>8==0),z}finderPenaltyCountPatterns(runHistory){let n=runHistory[1];assert(n<=3*this.size);let core=n>0&&runHistory[2]==n&&runHistory[3]==3*n&&runHistory[4]==n&&runHistory[5]==n;return(core&&runHistory[0]>=4*n&&runHistory[6]>=n?1:0)+(core&&runHistory[6]>=4*n&&runHistory[0]>=n?1:0)}finderPenaltyTerminateAndCount(currentRunColor,currentRunLength,runHistory){return currentRunColor&&(this.finderPenaltyAddHistory(currentRunLength,runHistory),currentRunLength=0),currentRunLength+=this.size,this.finderPenaltyAddHistory(currentRunLength,runHistory),this.finderPenaltyCountPatterns(runHistory)}finderPenaltyAddHistory(currentRunLength,runHistory){0==runHistory[0]&&(currentRunLength+=this.size),runHistory.pop(),runHistory.unshift(currentRunLength)}},QrCode=_QrCode;function appendBits(val,len,bb){if(len<0||len>31||val>>>len!=0)throw RangeError("Value out of range");for(let i=len-1;i>=0;i--)bb.push(val>>>i&1)}function getBit(x,i){return(x>>>i&1)!=0}function assert(cond){if(!cond)throw Error("Assertion error")}QrCode.MIN_VERSION=1,QrCode.MAX_VERSION=40,QrCode.PENALTY_N1=3,QrCode.PENALTY_N2=3,QrCode.PENALTY_N3=40,QrCode.PENALTY_N4=10,QrCode.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],QrCode.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],qrcodegen2.QrCode=QrCode;let _QrSegment=class{constructor(mode,numChars,bitData){if(this.mode=mode,this.numChars=numChars,this.bitData=bitData,numChars<0)throw RangeError("Invalid argument");this.bitData=bitData.slice()}static makeBytes(data){let bb=[];for(let b of data)appendBits(b,8,bb);return new _QrSegment(_QrSegment.Mode.BYTE,data.length,bb)}static makeNumeric(digits){if(!_QrSegment.isNumeric(digits))throw RangeError("String contains non-numeric characters");let bb=[];for(let i=0;i<digits.length;){let n=Math.min(digits.length-i,3);appendBits(parseInt(digits.substr(i,n),10),3*n+1,bb),i+=n}return new _QrSegment(_QrSegment.Mode.NUMERIC,digits.length,bb)}static makeAlphanumeric(text){let i;if(!_QrSegment.isAlphanumeric(text))throw RangeError("String contains unencodable characters in alphanumeric mode");let bb=[];for(i=0;i+2<=text.length;i+=2){let temp=45*_QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i));appendBits(temp+=_QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i+1)),11,bb)}return i<text.length&&appendBits(_QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i)),6,bb),new _QrSegment(_QrSegment.Mode.ALPHANUMERIC,text.length,bb)}static makeSegments(text){return""==text?[]:_QrSegment.isNumeric(text)?[_QrSegment.makeNumeric(text)]:_QrSegment.isAlphanumeric(text)?[_QrSegment.makeAlphanumeric(text)]:[_QrSegment.makeBytes(_QrSegment.toUtf8ByteArray(text))]}static makeEci(assignVal){let bb=[];if(assignVal<0)throw RangeError("ECI assignment value out of range");if(assignVal<128)appendBits(assignVal,8,bb);else if(assignVal<16384)appendBits(2,2,bb),appendBits(assignVal,14,bb);else if(assignVal<1e6)appendBits(6,3,bb),appendBits(assignVal,21,bb);else throw RangeError("ECI assignment value out of range");return new _QrSegment(_QrSegment.Mode.ECI,0,bb)}static isNumeric(text){return _QrSegment.NUMERIC_REGEX.test(text)}static isAlphanumeric(text){return _QrSegment.ALPHANUMERIC_REGEX.test(text)}getData(){return this.bitData.slice()}static getTotalBits(segs,version){let result=0;for(let seg of segs){let ccbits=seg.mode.numCharCountBits(version);if(seg.numChars>=1<<ccbits)return 1/0;result+=4+ccbits+seg.bitData.length}return result}static toUtf8ByteArray(str){str=encodeURI(str);let result=[];for(let i=0;i<str.length;i++)"%"!=str.charAt(i)?result.push(str.charCodeAt(i)):(result.push(parseInt(str.substr(i+1,2),16)),i+=2);return result}},QrSegment=_QrSegment;QrSegment.NUMERIC_REGEX=/^[0-9]*$/,QrSegment.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,QrSegment.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",qrcodegen2.QrSegment=QrSegment})(qrcodegen||(qrcodegen={})),(QrCode2=>{let _Ecc=class{constructor(ordinal,formatBits){this.ordinal=ordinal,this.formatBits=formatBits}},Ecc=_Ecc;Ecc.LOW=new _Ecc(0,1),Ecc.MEDIUM=new _Ecc(1,0),Ecc.QUARTILE=new _Ecc(2,3),Ecc.HIGH=new _Ecc(3,2),QrCode2.Ecc=Ecc})(QrCode=(qrcodegen2=qrcodegen||(qrcodegen={})).QrCode||(qrcodegen2.QrCode={})),(QrSegment2=>{let _Mode=class{constructor(modeBits,numBitsCharCount){this.modeBits=modeBits,this.numBitsCharCount=numBitsCharCount}numCharCountBits(ver){return this.numBitsCharCount[Math.floor((ver+7)/17)]}},Mode=_Mode;Mode.NUMERIC=new _Mode(1,[10,12,14]),Mode.ALPHANUMERIC=new _Mode(2,[9,11,13]),Mode.BYTE=new _Mode(4,[8,16,16]),Mode.KANJI=new _Mode(8,[8,10,12]),Mode.ECI=new _Mode(7,[0,0,0]),QrSegment2.Mode=Mode})(QrSegment=(qrcodegen21=qrcodegen||(qrcodegen={})).QrSegment||(qrcodegen21.QrSegment={}));var qrcodegen_default=qrcodegen,ERROR_LEVEL_MAP={L:qrcodegen_default.QrCode.Ecc.LOW,M:qrcodegen_default.QrCode.Ecc.MEDIUM,Q:qrcodegen_default.QrCode.Ecc.QUARTILE,H:qrcodegen_default.QrCode.Ecc.HIGH},DEFAULT_SIZE=128,DEFAULT_LEVEL="L",DEFAULT_BGCOLOR="#FFFFFF",DEFAULT_FGCOLOR="#000000",DEFAULT_INCLUDEMARGIN=!1,MARGIN_SIZE=4,DEFAULT_IMG_SCALE=.1;function generatePath(modules,margin=0){let ops=[];return modules.forEach(function(row,y){let start=null;row.forEach(function(cell,x){if(!cell&&null!==start){ops.push(`M${start+margin} ${y+margin}h${x-start}v1H${start+margin}z`),start=null;return}if(x===row.length-1){if(!cell)return;null===start?ops.push(`M${x+margin},${y+margin} h1v1H${x+margin}z`):ops.push(`M${start+margin},${y+margin} h${x+1-start}v1H${start+margin}z`);return}cell&&null===start&&(start=x)})}),ops.join("")}function excavateModules(modules,excavation){return modules.slice().map((row,y)=>y<excavation.y||y>=excavation.y+excavation.h?row:row.map((cell,x)=>(x<excavation.x||x>=excavation.x+excavation.w)&&cell))}function getImageSettings(cells,size,includeMargin,imageSettings){if(null==imageSettings)return null;let margin=includeMargin?MARGIN_SIZE:0,numCells=cells.length+2*margin,defaultSize=Math.floor(size*DEFAULT_IMG_SCALE),scale=numCells/size,w=(imageSettings.width||defaultSize)*scale,h=(imageSettings.height||defaultSize)*scale,x=null==imageSettings.x?cells.length/2-w/2:imageSettings.x*scale,y=null==imageSettings.y?cells.length/2-h/2:imageSettings.y*scale,excavation=null;if(imageSettings.excavate){let floorX=Math.floor(x),floorY=Math.floor(y),ceilW=Math.ceil(w+x-floorX),ceilH=Math.ceil(h+y-floorY);excavation={x:floorX,y:floorY,w:ceilW,h:ceilH}}return{x,y,h,w,excavation}}function QRCodeSVG(props){let _a=props,{value,size=DEFAULT_SIZE,level=DEFAULT_LEVEL,bgColor=DEFAULT_BGCOLOR,fgColor=DEFAULT_FGCOLOR,includeMargin=DEFAULT_INCLUDEMARGIN,imageSettings}=_a,otherProps=__objRest(_a,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),cells=qrcodegen_default.QrCode.encodeText(value,ERROR_LEVEL_MAP[level]).getModules(),margin=includeMargin?MARGIN_SIZE:0,numCells=cells.length+2*margin,calculatedImageSettings=getImageSettings(cells,size,includeMargin,imageSettings),image=null;null!=imageSettings&&null!=calculatedImageSettings&&(null!=calculatedImageSettings.excavation&&(cells=excavateModules(cells,calculatedImageSettings.excavation)),image=react__WEBPACK_IMPORTED_MODULE_0__.createElement("image",{xlinkHref:imageSettings.src,height:calculatedImageSettings.h,width:calculatedImageSettings.w,x:calculatedImageSettings.x+margin,y:calculatedImageSettings.y+margin,preserveAspectRatio:"none"}));let fgPath=generatePath(cells,margin);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",__spreadValues({height:size,width:size,viewBox:`0 0 ${numCells} ${numCells}`},otherProps),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:bgColor,d:`M0,0 h${numCells}v${numCells}H0z`,shapeRendering:"crispEdges"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:fgColor,d:fgPath,shapeRendering:"crispEdges"}),image)}!function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}}()},214:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(7805).Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(enc){var retried;if(!enc)return"utf8";for(;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw Error("Unknown encoding: "+enc);return nenc||enc}function StringDecoder(encoding){var nb;switch(this.encoding=normalizeEncoding(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8CheckIncomplete(self1,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);return nb>=0?(nb>0&&(self1.lastNeed=nb-1),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]))>=0?(nb>0&&(self1.lastNeed=nb-2),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]))>=0?(nb>0&&(2===nb?nb=0:self1.lastNeed=nb-3),nb):0}function utf8CheckExtraBytes(self1,buf,p){if((192&buf[0])!=128)return self1.lastNeed=0,"";if(self1.lastNeed>1&&buf.length>1){if((192&buf[1])!=128)return self1.lastNeed=1,"";if(self1.lastNeed>2&&buf.length>2&&(192&buf[2])!=128)return self1.lastNeed=2,""}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,buf,p);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(buf.copy(this.lastChar,p,0,buf.length),this.lastNeed-=buf.length)}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"":r}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(buf){var r,i;if(0===buf.length)return"";if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},7805:function(module,exports,__webpack_require__){var buffer=__webpack_require__(8834),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},82:function(module){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},4895:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var isArgumentsObject=__webpack_require__(2635),isGeneratorFunction=__webpack_require__(3138),whichTypedArray=__webpack_require__(9565),isTypedArray=__webpack_require__(198);function uncurryThis(f){return f.call.bind(f)}var BigIntSupported="undefined"!=typeof BigInt,SymbolSupported="undefined"!=typeof Symbol,ObjectToString=uncurryThis(Object.prototype.toString),numberValue=uncurryThis(Number.prototype.valueOf),stringValue=uncurryThis(String.prototype.valueOf),booleanValue=uncurryThis(Boolean.prototype.valueOf);if(BigIntSupported)var bigIntValue=uncurryThis(BigInt.prototype.valueOf);if(SymbolSupported)var symbolValue=uncurryThis(Symbol.prototype.valueOf);function checkBoxedPrimitive(value,prototypeValueOf){if("object"!=typeof value)return!1;try{return prototypeValueOf(value),!0}catch(e){return!1}}function isPromise(input){return"undefined"!=typeof Promise&&input instanceof Promise||null!==input&&"object"==typeof input&&"function"==typeof input.then&&"function"==typeof input.catch}function isArrayBufferView(value){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(value):isTypedArray(value)||isDataView(value)}function isUint8Array(value){return"Uint8Array"===whichTypedArray(value)}function isUint8ClampedArray(value){return"Uint8ClampedArray"===whichTypedArray(value)}function isUint16Array(value){return"Uint16Array"===whichTypedArray(value)}function isUint32Array(value){return"Uint32Array"===whichTypedArray(value)}function isInt8Array(value){return"Int8Array"===whichTypedArray(value)}function isInt16Array(value){return"Int16Array"===whichTypedArray(value)}function isInt32Array(value){return"Int32Array"===whichTypedArray(value)}function isFloat32Array(value){return"Float32Array"===whichTypedArray(value)}function isFloat64Array(value){return"Float64Array"===whichTypedArray(value)}function isBigInt64Array(value){return"BigInt64Array"===whichTypedArray(value)}function isBigUint64Array(value){return"BigUint64Array"===whichTypedArray(value)}function isMapToString(value){return"[object Map]"===ObjectToString(value)}function isMap(value){return"undefined"!=typeof Map&&(isMapToString.working?isMapToString(value):value instanceof Map)}function isSetToString(value){return"[object Set]"===ObjectToString(value)}function isSet(value){return"undefined"!=typeof Set&&(isSetToString.working?isSetToString(value):value instanceof Set)}function isWeakMapToString(value){return"[object WeakMap]"===ObjectToString(value)}function isWeakMap(value){return"undefined"!=typeof WeakMap&&(isWeakMapToString.working?isWeakMapToString(value):value instanceof WeakMap)}function isWeakSetToString(value){return"[object WeakSet]"===ObjectToString(value)}function isWeakSet(value){return isWeakSetToString(value)}function isArrayBufferToString(value){return"[object ArrayBuffer]"===ObjectToString(value)}function isArrayBuffer(value){return"undefined"!=typeof ArrayBuffer&&(isArrayBufferToString.working?isArrayBufferToString(value):value instanceof ArrayBuffer)}function isDataViewToString(value){return"[object DataView]"===ObjectToString(value)}function isDataView(value){return"undefined"!=typeof DataView&&(isDataViewToString.working?isDataViewToString(value):value instanceof DataView)}exports.isArgumentsObject=isArgumentsObject,exports.isGeneratorFunction=isGeneratorFunction,exports.isTypedArray=isTypedArray,exports.isPromise=isPromise,exports.isArrayBufferView=isArrayBufferView,exports.isUint8Array=isUint8Array,exports.isUint8ClampedArray=isUint8ClampedArray,exports.isUint16Array=isUint16Array,exports.isUint32Array=isUint32Array,exports.isInt8Array=isInt8Array,exports.isInt16Array=isInt16Array,exports.isInt32Array=isInt32Array,exports.isFloat32Array=isFloat32Array,exports.isFloat64Array=isFloat64Array,exports.isBigInt64Array=isBigInt64Array,exports.isBigUint64Array=isBigUint64Array,isMapToString.working="undefined"!=typeof Map&&isMapToString(new Map),exports.isMap=isMap,isSetToString.working="undefined"!=typeof Set&&isSetToString(new Set),exports.isSet=isSet,isWeakMapToString.working="undefined"!=typeof WeakMap&&isWeakMapToString(new WeakMap),exports.isWeakMap=isWeakMap,isWeakSetToString.working="undefined"!=typeof WeakSet&&isWeakSetToString(new WeakSet),exports.isWeakSet=isWeakSet,isArrayBufferToString.working="undefined"!=typeof ArrayBuffer&&isArrayBufferToString(new ArrayBuffer),exports.isArrayBuffer=isArrayBuffer,isDataViewToString.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1)),exports.isDataView=isDataView;var SharedArrayBufferCopy="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function isSharedArrayBufferToString(value){return"[object SharedArrayBuffer]"===ObjectToString(value)}function isSharedArrayBuffer(value){return void 0!==SharedArrayBufferCopy&&(void 0===isSharedArrayBufferToString.working&&(isSharedArrayBufferToString.working=isSharedArrayBufferToString(new SharedArrayBufferCopy)),isSharedArrayBufferToString.working?isSharedArrayBufferToString(value):value instanceof SharedArrayBufferCopy)}function isAsyncFunction(value){return"[object AsyncFunction]"===ObjectToString(value)}function isMapIterator(value){return"[object Map Iterator]"===ObjectToString(value)}function isSetIterator(value){return"[object Set Iterator]"===ObjectToString(value)}function isGeneratorObject(value){return"[object Generator]"===ObjectToString(value)}function isWebAssemblyCompiledModule(value){return"[object WebAssembly.Module]"===ObjectToString(value)}function isNumberObject(value){return checkBoxedPrimitive(value,numberValue)}function isStringObject(value){return checkBoxedPrimitive(value,stringValue)}function isBooleanObject(value){return checkBoxedPrimitive(value,booleanValue)}function isBigIntObject(value){return BigIntSupported&&checkBoxedPrimitive(value,bigIntValue)}function isSymbolObject(value){return SymbolSupported&&checkBoxedPrimitive(value,symbolValue)}function isBoxedPrimitive(value){return isNumberObject(value)||isStringObject(value)||isBooleanObject(value)||isBigIntObject(value)||isSymbolObject(value)}function isAnyArrayBuffer(value){return"undefined"!=typeof Uint8Array&&(isArrayBuffer(value)||isSharedArrayBuffer(value))}exports.isSharedArrayBuffer=isSharedArrayBuffer,exports.isAsyncFunction=isAsyncFunction,exports.isMapIterator=isMapIterator,exports.isSetIterator=isSetIterator,exports.isGeneratorObject=isGeneratorObject,exports.isWebAssemblyCompiledModule=isWebAssemblyCompiledModule,exports.isNumberObject=isNumberObject,exports.isStringObject=isStringObject,exports.isBooleanObject=isBooleanObject,exports.isBigIntObject=isBigIntObject,exports.isSymbolObject=isSymbolObject,exports.isBoxedPrimitive=isBoxedPrimitive,exports.isAnyArrayBuffer=isAnyArrayBuffer,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(method){Object.defineProperty(exports,method,{enumerable:!1,value:function(){throw Error(method+" is not supported in userland")}})})},3335:function(__unused_webpack_module,exports,__webpack_require__){var process=__webpack_require__(4406),getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(obj){for(var keys=Object.keys(obj),descriptors={},i=0;i<keys.length;i++)descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i]);return descriptors},formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])isNull(x)||!isObject(x)?str+=" "+x:str+=" "+inspect(x);return str},exports.deprecate=function(fn,msg){if(void 0!==process&&!0===process.noDeprecation)return fn;if(void 0===process)return function(){return exports.deprecate(fn,msg).apply(this,arguments)};var warned=!1;return function(){if(!warned){if(process.throwDeprecation)throw Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}};var debugs={},debugEnvRegex=/^$/;if(process.env.NODE_DEBUG){var debugEnv=process.env.NODE_DEBUG;debugEnvRegex=RegExp("^"+(debugEnv=debugEnv.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"\x1b["+inspect.colors[style][0]+"m"+str+"\x1b["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var output,ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];return(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)&&(base=" [Function"+(value.name?": "+value.name:"")+"]"),isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0!==keys.length||array&&0!=value.length)?recurseTimes<0?isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special"):(ctx.seen.push(value),output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)):braces[0]+base+braces[1]}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if((desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]}).get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),!str&&(0>ctx.seen.indexOf(desc.value)?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1)).indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").slice(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;(name=JSON.stringify(""+key)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.slice(1,-1),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;return output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}exports.debuglog=function(set){if(!debugs[set=set.toUpperCase()]){if(debugEnvRegex.test(set)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){}}return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.types=__webpack_require__(4895),exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.types.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.types.isDate=isDate,exports.isError=isError,exports.types.isNativeError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=__webpack_require__(82);var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=__webpack_require__(1285),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin};var kCustomPromisifiedSymbol="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=Error("Promise was rejected with a falsy value");newReason.reason=reason,reason=newReason}return cb(reason)}function callbackify(original){if("function"!=typeof original)throw TypeError('The "original" argument must be of type Function');function callbackified(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);var maybeCb=args.pop();if("function"!=typeof maybeCb)throw TypeError("The last argument must be of type Function");var self1=this,cb=function(){return maybeCb.apply(self1,arguments)};original.apply(this,args).then(function(ret){process.nextTick(cb.bind(null,null,ret))},function(rej){process.nextTick(callbackifyOnRejected.bind(null,rej,cb))})}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original)),Object.defineProperties(callbackified,getOwnPropertyDescriptors(original)),callbackified}exports.promisify=function(original){if("function"!=typeof original)throw TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn=original[kCustomPromisifiedSymbol];if("function"!=typeof fn)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),fn}function fn(){for(var promiseResolve,promiseReject,promise=new Promise(function(resolve,reject){promiseResolve=resolve,promiseReject=reject}),args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);args.push(function(err,value){err?promiseReject(err):promiseResolve(value)});try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}return Object.setPrototypeOf(fn,Object.getPrototypeOf(original)),kCustomPromisifiedSymbol&&Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fn,getOwnPropertyDescriptors(original))},exports.promisify.custom=kCustomPromisifiedSymbol,exports.callbackify=callbackify},1493:function(module,__unused_webpack_exports,__webpack_require__){module.exports.buildBn128=__webpack_require__(8093),module.exports.buildBls12381=__webpack_require__(7652),__webpack_require__(3792)},9106:function(module){function compare(a,b){return a===b?0:a>b?1:-1}function square(n){return n*n}function isOdd(n){return n%2n!==0n}function isEven(n){return n%2n===0n}function isNegative(n){return n<0n}function isPositive(n){return n>0n}function bitLength(n){return isNegative(n)?n.toString(2).length-1:n.toString(2).length}function abs(n){return n<0n?-n:n}function isUnit(n){return 1n===abs(n)}function modInv(a,n){for(var q,lastT,lastR,t=0n,newT=1n,r=n,newR=abs(a);0n!==newR;)q=r/newR,lastT=t,lastR=r,t=newT,r=newR,newT=lastT-q*newT,newR=lastR-q*newR;if(!isUnit(r))throw Error(a.toString()+" and "+n.toString()+" are not co-prime");return(-1===compare(t,0n)&&(t+=n),isNegative(a))?-t:t}function modPow(n,exp,mod){if(0n===mod)throw Error("Cannot take modPow with modulus 0");var r=1n,base=n%mod;for(isNegative(exp)&&(exp=-(1n*exp),base=modInv(base,mod));isPositive(exp);){if(0n===base)return 0n;isOdd(exp)&&(r=r*base%mod),exp/=2n,base=square(base)%mod}return r}function compareAbs(a,b){return(a=a>=0n?a:-a)===(b=b>=0n?b:-b)?0:a>b?1:-1}function isDivisibleBy(a,n){return 0n!==n&&(!!isUnit(n)||(0===compareAbs(n,2n)?isEven(a):a%n===0n))}function isBasicPrime(v){var n=abs(v);return!isUnit(n)&&(2n===n||3n===n||5n===n||!(isEven(n)||isDivisibleBy(n,3n)||isDivisibleBy(n,5n))&&(n<49n||void 0))}function prev(n){return n-1n}function millerRabinTest(n,a){for(var d,i,x,nPrev=prev(n),b=nPrev,r=0;isEven(b);)b/=2n,r++;next:for(i=0;i<a.length;i++)if(!(n<a[i])&&!isUnit(x=modPow(BigInt(a[i]),b,n))&&x!==nPrev){for(d=r-1;0!=d&&!isUnit(x=square(x)%n);d--)if(x===nPrev)continue next;return!1}return!0}function isPrime(p){var isPrime=isBasicPrime(p);if(void 0!==isPrime)return isPrime;var n=abs(p),bits=bitLength(n);if(bits<=64)return millerRabinTest(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var t=Math.ceil(Math.log(2)*Number(bits)),a=[],i=0;i<t;i++)a.push(BigInt(i+2));return millerRabinTest(n,a)}module.exports.bitLength=bitLength,module.exports.isOdd=isOdd,module.exports.isNegative=isNegative,module.exports.abs=abs,module.exports.isUnit=isUnit,module.exports.compare=compare,module.exports.modInv=modInv,module.exports.modPow=modPow,module.exports.isPrime=isPrime,module.exports.square=square},7652:function(module,__unused_webpack_exports,__webpack_require__){let utils=__webpack_require__(5830),buildF1m=__webpack_require__(3792),buildF1=__webpack_require__(9329),buildF2m=__webpack_require__(4673),buildF3m=__webpack_require__(6019),buildCurve=__webpack_require__(6319),buildFFT=__webpack_require__(6588),buildPol=__webpack_require__(3234),buildQAP=__webpack_require__(2217),buildApplyKey=__webpack_require__(8236),{bitLength,isOdd,isNegative}=__webpack_require__(9106);module.exports=function(module,_prefix){let prefix=_prefix||"bls12381";if(module.modules[prefix])return prefix;let q=0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,r=0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,n64q=Math.floor((bitLength(q-1n)-1)/64)+1,n8q=8*n64q,f1size=n8q,f2size=2*f1size,ftsize=12*f1size,n64r=Math.floor((bitLength(r-1n)-1)/64)+1,n8r=8*n64r,frsize=n8r,pr=module.alloc(utils.bigInt2BytesLE(r,frsize)),f1mPrefix=buildF1m(module,q,"f1m","intq");buildF1(module,r,"fr","frm","intr");let pG1b=module.alloc(utils.bigInt2BytesLE(toMontgomery(4n),f1size)),g1mPrefix=buildCurve(module,"g1m","f1m",pG1b);buildFFT(module,"frm","frm","frm","frm_mul"),buildPol(module,"pol","frm"),buildQAP(module,"qap","frm");let f2mPrefix=buildF2m(module,"f1m_neg","f2m","f1m"),pG2b=module.alloc([...utils.bigInt2BytesLE(toMontgomery(4n),f1size),...utils.bigInt2BytesLE(toMontgomery(4n),f1size)]),g2mPrefix=buildCurve(module,"g2m","f2m",pG2b);function buildGTimesFr(fnName,opMul){let f=module.addFunction(fnName);f.addParam("pG","i32"),f.addParam("pFr","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(n8r));f.addCode(c.call("frm_fromMontgomery",c.getLocal("pFr"),AUX),c.call(opMul,c.getLocal("pG"),AUX,c.i32_const(n8r),c.getLocal("pr"))),module.exportFunction(fnName)}function toMontgomery(a){return BigInt(a)*(1n<<BigInt(8*f1size))%q}buildGTimesFr("g1m_timesFr","g1m_timesScalar"),buildFFT(module,"g1m","g1m","frm","g1m_timesFr"),buildGTimesFr("g2m_timesFr","g2m_timesScalar"),buildFFT(module,"g2m","g2m","frm","g2m_timesFr"),buildGTimesFr("g1m_timesFrAffine","g1m_timesScalarAffine"),buildGTimesFr("g2m_timesFrAffine","g2m_timesScalarAffine"),buildApplyKey(module,"frm_batchApplyKey","fmr","frm",n8r,n8r,n8r,"frm_mul"),buildApplyKey(module,"g1m_batchApplyKey","g1m","frm",3*n8q,3*n8q,n8r,"g1m_timesFr"),buildApplyKey(module,"g1m_batchApplyKeyMixed","g1m","frm",2*n8q,3*n8q,n8r,"g1m_timesFrAffine"),buildApplyKey(module,"g2m_batchApplyKey","g2m","frm",6*n8q,6*n8q,n8r,"g2m_timesFr"),buildApplyKey(module,"g2m_batchApplyKeyMixed","g2m","frm",4*n8q,6*n8q,n8r,"g2m_timesFrAffine");let G1gen=[0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bbn,0x8b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1n,1n],pG1gen=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G1gen[0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1gen[1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1gen[2]),f1size)]),G1zero=[0n,1n,0n],pG1zero=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G1zero[0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1zero[1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1zero[2]),f1size)]),G2gen=[[0x24aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8n,0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7en],[0xce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801n,0x606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79ben],[1n,0n]],pG2gen=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G2gen[0][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[0][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[1][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[1][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[2][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[2][1]),f1size)]),G2zero=[[0n,0n],[1n,0n],[0n,0n]],pG2zero=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G2zero[0][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[0][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[1][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[1][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[2][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[2][1]),f1size)]),pOneT=module.alloc([...utils.bigInt2BytesLE(toMontgomery(1n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size),...utils.bigInt2BytesLE(toMontgomery(0n),f1size)]),pBls12381Twist=module.alloc([...utils.bigInt2BytesLE(toMontgomery(1n),f1size),...utils.bigInt2BytesLE(toMontgomery(1n),f1size)]);!function(){let f=module.addFunction(f2mPrefix+"_mulNR");f.addParam("x","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x0c=c.i32_const(module.alloc(f1size)),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1size)),r0=c.getLocal("pr"),r1=c.i32_add(c.getLocal("pr"),c.i32_const(f1size));f.addCode(c.call(f1mPrefix+"_copy",x0,x0c),c.call(f1mPrefix+"_sub",x0,x1,r0),c.call(f1mPrefix+"_add",x0c,x1,r1))}();let f6mPrefix=buildF3m(module,f2mPrefix+"_mulNR","f6m","f2m");!function(){let f=module.addFunction(f6mPrefix+"_mulNR");f.addParam("x","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),c0copy=c.i32_const(module.alloc(2*f1size));f.addCode(c.call(f2mPrefix+"_copy",c.getLocal("x"),c0copy),c.call(f2mPrefix+"_mulNR",c.i32_add(c.getLocal("x"),c.i32_const(4*n8q)),c.getLocal("pr")),c.call(f2mPrefix+"_copy",c.i32_add(c.getLocal("x"),c.i32_const(2*n8q)),c.i32_add(c.getLocal("pr"),c.i32_const(4*n8q))),c.call(f2mPrefix+"_copy",c0copy,c.i32_add(c.getLocal("pr"),c.i32_const(2*n8q))))}();let ftmPrefix=buildF2m(module,f6mPrefix+"_mulNR","ftm",f6mPrefix),ateLoopCount=0xd201000000010000n,ateLoopBitBytes=bits(ateLoopCount),pAteLoopBitBytes=module.alloc(ateLoopBitBytes),isLoopNegative=!0,ateCoefSize=3*f2size,ateNDblCoefs=ateLoopBitBytes.length-1,ateNAddCoefs=ateLoopBitBytes.reduce((acc,b)=>acc+(0!=b?1:0),0),ateNCoefs=ateNAddCoefs+ateNDblCoefs+1,prePSize=6*n8q,preQSize=3*n8q*2+ateNCoefs*ateCoefSize,finalExpIsNegative=!0,finalExpZ=0xd201000000010000n;function naf(n){let E=n,res=[];for(;E>0n;){if(isOdd(E)){let z=2-Number(E%4n);res.push(z),E-=BigInt(z)}else res.push(0);E>>=1n}return res}function bits(n){let E=n,res=[];for(;E>0n;)isOdd(E)?res.push(1):res.push(0),E>>=1n;return res}function buildPrepareG1(){let f=module.addFunction(prefix+"_prepareG1");f.addParam("pP","i32"),f.addParam("ppreP","i32");let c=f.getCodeBuilder();f.addCode(c.call(g1mPrefix+"_normalize",c.getLocal("pP"),c.getLocal("ppreP")))}function buildPrepDoubleStep(){let f=module.addFunction(prefix+"_prepDblStep");f.addParam("R","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),Rx=c.getLocal("R"),Ry=c.i32_add(c.getLocal("R"),c.i32_const(2*n8q)),Rz=c.i32_add(c.getLocal("R"),c.i32_const(4*n8q)),t0=c.getLocal("r"),t3=c.i32_add(c.getLocal("r"),c.i32_const(2*n8q)),t6=c.i32_add(c.getLocal("r"),c.i32_const(4*n8q)),zsquared=c.i32_const(module.alloc(f2size)),t1=c.i32_const(module.alloc(f2size)),t2=c.i32_const(module.alloc(f2size)),t4=c.i32_const(module.alloc(f2size)),t5=c.i32_const(module.alloc(f2size));f.addCode(c.call(f2mPrefix+"_square",Rx,t0),c.call(f2mPrefix+"_square",Ry,t1),c.call(f2mPrefix+"_square",t1,t2),c.call(f2mPrefix+"_add",t1,Rx,t3),c.call(f2mPrefix+"_square",t3,t3),c.call(f2mPrefix+"_sub",t3,t0,t3),c.call(f2mPrefix+"_sub",t3,t2,t3),c.call(f2mPrefix+"_add",t3,t3,t3),c.call(f2mPrefix+"_add",t0,t0,t4),c.call(f2mPrefix+"_add",t4,t0,t4),c.call(f2mPrefix+"_add",Rx,t4,t6),c.call(f2mPrefix+"_square",t4,t5),c.call(f2mPrefix+"_square",Rz,zsquared),c.call(f2mPrefix+"_sub",t5,t3,Rx),c.call(f2mPrefix+"_sub",Rx,t3,Rx),c.call(f2mPrefix+"_add",Rz,Ry,Rz),c.call(f2mPrefix+"_square",Rz,Rz),c.call(f2mPrefix+"_sub",Rz,t1,Rz),c.call(f2mPrefix+"_sub",Rz,zsquared,Rz),c.call(f2mPrefix+"_sub",t3,Rx,Ry),c.call(f2mPrefix+"_mul",Ry,t4,Ry),c.call(f2mPrefix+"_add",t2,t2,t2),c.call(f2mPrefix+"_add",t2,t2,t2),c.call(f2mPrefix+"_add",t2,t2,t2),c.call(f2mPrefix+"_sub",Ry,t2,Ry),c.call(f2mPrefix+"_mul",t4,zsquared,t3),c.call(f2mPrefix+"_add",t3,t3,t3),c.call(f2mPrefix+"_neg",t3,t3),c.call(f2mPrefix+"_square",t6,t6),c.call(f2mPrefix+"_sub",t6,t0,t6),c.call(f2mPrefix+"_sub",t6,t5,t6),c.call(f2mPrefix+"_add",t1,t1,t1),c.call(f2mPrefix+"_add",t1,t1,t1),c.call(f2mPrefix+"_sub",t6,t1,t6),c.call(f2mPrefix+"_mul",Rz,zsquared,t0),c.call(f2mPrefix+"_add",t0,t0,t0))}function buildPrepAddStep(){let f=module.addFunction(prefix+"_prepAddStep");f.addParam("R","i32"),f.addParam("Q","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),Rx=c.getLocal("R"),Ry=c.i32_add(c.getLocal("R"),c.i32_const(2*n8q)),Rz=c.i32_add(c.getLocal("R"),c.i32_const(4*n8q)),Qx=c.getLocal("Q"),Qy=c.i32_add(c.getLocal("Q"),c.i32_const(2*n8q)),t10=c.getLocal("r"),t1=c.i32_add(c.getLocal("r"),c.i32_const(2*n8q)),t9=c.i32_add(c.getLocal("r"),c.i32_const(4*n8q)),zsquared=c.i32_const(module.alloc(f2size)),ysquared=c.i32_const(module.alloc(f2size)),ztsquared=c.i32_const(module.alloc(f2size)),t0=c.i32_const(module.alloc(f2size)),t2=c.i32_const(module.alloc(f2size)),t3=c.i32_const(module.alloc(f2size)),t4=c.i32_const(module.alloc(f2size)),t5=c.i32_const(module.alloc(f2size)),t6=c.i32_const(module.alloc(f2size)),t7=c.i32_const(module.alloc(f2size)),t8=c.i32_const(module.alloc(f2size));f.addCode(c.call(f2mPrefix+"_square",Rz,zsquared),c.call(f2mPrefix+"_square",Qy,ysquared),c.call(f2mPrefix+"_mul",zsquared,Qx,t0),c.call(f2mPrefix+"_add",Qy,Rz,t1),c.call(f2mPrefix+"_square",t1,t1),c.call(f2mPrefix+"_sub",t1,ysquared,t1),c.call(f2mPrefix+"_sub",t1,zsquared,t1),c.call(f2mPrefix+"_mul",t1,zsquared,t1),c.call(f2mPrefix+"_sub",t0,Rx,t2),c.call(f2mPrefix+"_square",t2,t3),c.call(f2mPrefix+"_add",t3,t3,t4),c.call(f2mPrefix+"_add",t4,t4,t4),c.call(f2mPrefix+"_mul",t4,t2,t5),c.call(f2mPrefix+"_sub",t1,Ry,t6),c.call(f2mPrefix+"_sub",t6,Ry,t6),c.call(f2mPrefix+"_mul",t6,Qx,t9),c.call(f2mPrefix+"_mul",t4,Rx,t7),c.call(f2mPrefix+"_square",t6,Rx),c.call(f2mPrefix+"_sub",Rx,t5,Rx),c.call(f2mPrefix+"_sub",Rx,t7,Rx),c.call(f2mPrefix+"_sub",Rx,t7,Rx),c.call(f2mPrefix+"_add",Rz,t2,Rz),c.call(f2mPrefix+"_square",Rz,Rz),c.call(f2mPrefix+"_sub",Rz,zsquared,Rz),c.call(f2mPrefix+"_sub",Rz,t3,Rz),c.call(f2mPrefix+"_add",Qy,Rz,t10),c.call(f2mPrefix+"_sub",t7,Rx,t8),c.call(f2mPrefix+"_mul",t8,t6,t8),c.call(f2mPrefix+"_mul",Ry,t5,t0),c.call(f2mPrefix+"_add",t0,t0,t0),c.call(f2mPrefix+"_sub",t8,t0,Ry),c.call(f2mPrefix+"_square",t10,t10),c.call(f2mPrefix+"_sub",t10,ysquared,t10),c.call(f2mPrefix+"_square",Rz,ztsquared),c.call(f2mPrefix+"_sub",t10,ztsquared,t10),c.call(f2mPrefix+"_add",t9,t9,t9),c.call(f2mPrefix+"_sub",t9,t10,t9),c.call(f2mPrefix+"_add",Rz,Rz,t10),c.call(f2mPrefix+"_neg",t6,t6),c.call(f2mPrefix+"_add",t6,t6,t1))}function buildPrepareG2(){let f=module.addFunction(prefix+"_prepareG2");f.addParam("pQ","i32"),f.addParam("ppreQ","i32"),f.addLocal("pCoef","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),Q=c.getLocal("pQ"),pR=module.alloc(3*f2size),R=c.i32_const(pR),base=c.getLocal("ppreQ");f.addCode(c.call(g2mPrefix+"_normalize",Q,base),c.if(c.call(g2mPrefix+"_isZero",base),c.ret([])),c.call(g2mPrefix+"_copy",base,R),c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(3*f2size)))),f.addCode(c.setLocal("i",c.i32_const(ateLoopBitBytes.length-2)),c.block(c.loop(c.call(prefix+"_prepDblStep",R,c.getLocal("pCoef")),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))),c.if(c.i32_load8_s(c.getLocal("i"),pAteLoopBitBytes),[...c.call(prefix+"_prepAddStep",R,base,c.getLocal("pCoef")),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize)))]),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildMillerLoop(){let f=module.addFunction(prefix+"_millerLoop");f.addParam("ppreP","i32"),f.addParam("ppreQ","i32"),f.addParam("r","i32"),f.addLocal("pCoef","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),preP=c.getLocal("ppreP"),coefs=c.getLocal("pCoef"),F=c.getLocal("r");f.addCode(c.call(ftmPrefix+"_one",F),c.if(c.call(g1mPrefix+"_isZero",preP),c.ret([])),c.if(c.call(g1mPrefix+"_isZero",c.getLocal("ppreQ")),c.ret([])),c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(3*f2size))),c.setLocal("i",c.i32_const(ateLoopBitBytes.length-2)),c.block(c.loop(c.call(prefix+"_ell",preP,coefs,F),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))),c.if(c.i32_load8_s(c.getLocal("i"),pAteLoopBitBytes),[...c.call(prefix+"_ell",preP,coefs,F),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize)))]),c.call(ftmPrefix+"_square",F,F),c.br_if(1,c.i32_eq(c.getLocal("i"),c.i32_const(1))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.call(prefix+"_ell",preP,coefs,F)),isLoopNegative&&f.addCode(c.call(ftmPrefix+"_conjugate",F,F))}function buildFrobeniusMap(n){let F12=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n,0xfc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0n],[0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n,0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n,0x5b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0n],[0xfc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n,0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n,0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0n],[0x5b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n,0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n]]],F6=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0n,0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0n,1n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0n,0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen]],[[1n,0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0n]]],f=module.addFunction(ftmPrefix+"_frobeniusMap"+n);f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();for(let i=0;i<6;i++){let X=0==i?c.getLocal("x"):c.i32_add(c.getLocal("x"),c.i32_const(i*f2size)),Xc0=X,Xc1=c.i32_add(c.getLocal("x"),c.i32_const(i*f2size+f1size)),R=0==i?c.getLocal("r"):c.i32_add(c.getLocal("r"),c.i32_const(i*f2size)),Rc0=R,Rc1=c.i32_add(c.getLocal("r"),c.i32_const(i*f2size+f1size)),coef=mul2(F12[Math.floor(i/3)][n%12],F6[i%3][n%6]),pCoef=module.alloc([...utils.bigInt2BytesLE(toMontgomery(coef[0]),n8q),...utils.bigInt2BytesLE(toMontgomery(coef[1]),n8q)]);n%2==1?f.addCode(c.call(f1mPrefix+"_copy",Xc0,Rc0),c.call(f1mPrefix+"_neg",Xc1,Rc1),c.call(f2mPrefix+"_mul",R,c.i32_const(pCoef),R)):f.addCode(c.call(f2mPrefix+"_mul",X,c.i32_const(pCoef),R))}function mul2(a,b){let ac0=a[0],ac1=a[1],bc0=b[0],bc1=b[1],res=[(ac0*bc0-ac1*bc1)%q,(ac0*bc1+ac1*bc0)%q];return isNegative(res[0])&&(res[0]=res[0]+q),res}}function buildCyclotomicSquare(){let f=module.addFunction(prefix+"__cyclotomicSquare");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x4=c.i32_add(c.getLocal("x"),c.i32_const(f2size)),x3=c.i32_add(c.getLocal("x"),c.i32_const(2*f2size)),x2=c.i32_add(c.getLocal("x"),c.i32_const(3*f2size)),x1=c.i32_add(c.getLocal("x"),c.i32_const(4*f2size)),x5=c.i32_add(c.getLocal("x"),c.i32_const(5*f2size)),r0=c.getLocal("r"),r4=c.i32_add(c.getLocal("r"),c.i32_const(f2size)),r3=c.i32_add(c.getLocal("r"),c.i32_const(2*f2size)),r2=c.i32_add(c.getLocal("r"),c.i32_const(3*f2size)),r1=c.i32_add(c.getLocal("r"),c.i32_const(4*f2size)),r5=c.i32_add(c.getLocal("r"),c.i32_const(5*f2size)),t0=c.i32_const(module.alloc(f2size)),t1=c.i32_const(module.alloc(f2size)),t2=c.i32_const(module.alloc(f2size)),t3=c.i32_const(module.alloc(f2size)),t4=c.i32_const(module.alloc(f2size)),t5=c.i32_const(module.alloc(f2size)),tmp=c.i32_const(module.alloc(f2size)),AUX=c.i32_const(module.alloc(f2size));f.addCode(c.call(f2mPrefix+"_mul",x0,x1,tmp),c.call(f2mPrefix+"_mulNR",x1,t0),c.call(f2mPrefix+"_add",x0,t0,t0),c.call(f2mPrefix+"_add",x0,x1,AUX),c.call(f2mPrefix+"_mul",AUX,t0,t0),c.call(f2mPrefix+"_mulNR",tmp,AUX),c.call(f2mPrefix+"_add",tmp,AUX,AUX),c.call(f2mPrefix+"_sub",t0,AUX,t0),c.call(f2mPrefix+"_add",tmp,tmp,t1),c.call(f2mPrefix+"_mul",x2,x3,tmp),c.call(f2mPrefix+"_mulNR",x3,t2),c.call(f2mPrefix+"_add",x2,t2,t2),c.call(f2mPrefix+"_add",x2,x3,AUX),c.call(f2mPrefix+"_mul",AUX,t2,t2),c.call(f2mPrefix+"_mulNR",tmp,AUX),c.call(f2mPrefix+"_add",tmp,AUX,AUX),c.call(f2mPrefix+"_sub",t2,AUX,t2),c.call(f2mPrefix+"_add",tmp,tmp,t3),c.call(f2mPrefix+"_mul",x4,x5,tmp),c.call(f2mPrefix+"_mulNR",x5,t4),c.call(f2mPrefix+"_add",x4,t4,t4),c.call(f2mPrefix+"_add",x4,x5,AUX),c.call(f2mPrefix+"_mul",AUX,t4,t4),c.call(f2mPrefix+"_mulNR",tmp,AUX),c.call(f2mPrefix+"_add",tmp,AUX,AUX),c.call(f2mPrefix+"_sub",t4,AUX,t4),c.call(f2mPrefix+"_add",tmp,tmp,t5),c.call(f2mPrefix+"_sub",t0,x0,r0),c.call(f2mPrefix+"_add",r0,r0,r0),c.call(f2mPrefix+"_add",t0,r0,r0),c.call(f2mPrefix+"_add",t1,x1,r1),c.call(f2mPrefix+"_add",r1,r1,r1),c.call(f2mPrefix+"_add",t1,r1,r1),c.call(f2mPrefix+"_mul",t5,c.i32_const(pBls12381Twist),AUX),c.call(f2mPrefix+"_add",AUX,x2,r2),c.call(f2mPrefix+"_add",r2,r2,r2),c.call(f2mPrefix+"_add",AUX,r2,r2),c.call(f2mPrefix+"_sub",t4,x3,r3),c.call(f2mPrefix+"_add",r3,r3,r3),c.call(f2mPrefix+"_add",t4,r3,r3),c.call(f2mPrefix+"_sub",t2,x4,r4),c.call(f2mPrefix+"_add",r4,r4,r4),c.call(f2mPrefix+"_add",t2,r4,r4),c.call(f2mPrefix+"_add",t3,x5,r5),c.call(f2mPrefix+"_add",r5,r5,r5),c.call(f2mPrefix+"_add",t3,r5,r5))}function buildCyclotomicExp(exponent,isExpNegative,fnName){let exponentNafBytes=naf(exponent).map(b=>-1==b?255:b),pExponentNafBytes=module.alloc(exponentNafBytes),f=module.addFunction(prefix+"__cyclotomicExp_"+fnName);f.addParam("x","i32"),f.addParam("r","i32"),f.addLocal("bit","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),x=c.getLocal("x"),res=c.getLocal("r"),inverse=c.i32_const(module.alloc(ftsize));f.addCode(c.call(ftmPrefix+"_conjugate",x,inverse),c.call(ftmPrefix+"_one",res),c.if(c.teeLocal("bit",c.i32_load8_s(c.i32_const(exponentNafBytes.length-1),pExponentNafBytes)),c.if(c.i32_eq(c.getLocal("bit"),c.i32_const(1)),c.call(ftmPrefix+"_mul",res,x,res),c.call(ftmPrefix+"_mul",res,inverse,res))),c.setLocal("i",c.i32_const(exponentNafBytes.length-2)),c.block(c.loop(c.call(prefix+"__cyclotomicSquare",res,res),c.if(c.teeLocal("bit",c.i32_load8_s(c.getLocal("i"),pExponentNafBytes)),c.if(c.i32_eq(c.getLocal("bit"),c.i32_const(1)),c.call(ftmPrefix+"_mul",res,x,res),c.call(ftmPrefix+"_mul",res,inverse,res))),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0)))),isExpNegative&&f.addCode(c.call(ftmPrefix+"_conjugate",res,res))}function buildFinalExponentiation(){buildCyclotomicSquare(),buildCyclotomicExp(finalExpZ,finalExpIsNegative,"w0");let f=module.addFunction(prefix+"_finalExponentiation");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),elt=c.getLocal("x"),res=c.getLocal("r"),t0=c.i32_const(module.alloc(ftsize)),t1=c.i32_const(module.alloc(ftsize)),t2=c.i32_const(module.alloc(ftsize)),t3=c.i32_const(module.alloc(ftsize)),t4=c.i32_const(module.alloc(ftsize)),t5=c.i32_const(module.alloc(ftsize)),t6=c.i32_const(module.alloc(ftsize));f.addCode(c.call(ftmPrefix+"_frobeniusMap6",elt,t0),c.call(ftmPrefix+"_inverse",elt,t1),c.call(ftmPrefix+"_mul",t0,t1,t2),c.call(ftmPrefix+"_copy",t2,t1),c.call(ftmPrefix+"_frobeniusMap2",t2,t2),c.call(ftmPrefix+"_mul",t2,t1,t2),c.call(prefix+"__cyclotomicSquare",t2,t1),c.call(ftmPrefix+"_conjugate",t1,t1),c.call(prefix+"__cyclotomicExp_w0",t2,t3),c.call(prefix+"__cyclotomicSquare",t3,t4),c.call(ftmPrefix+"_mul",t1,t3,t5),c.call(prefix+"__cyclotomicExp_w0",t5,t1),c.call(prefix+"__cyclotomicExp_w0",t1,t0),c.call(prefix+"__cyclotomicExp_w0",t0,t6),c.call(ftmPrefix+"_mul",t6,t4,t6),c.call(prefix+"__cyclotomicExp_w0",t6,t4),c.call(ftmPrefix+"_conjugate",t5,t5),c.call(ftmPrefix+"_mul",t4,t5,t4),c.call(ftmPrefix+"_mul",t4,t2,t4),c.call(ftmPrefix+"_conjugate",t2,t5),c.call(ftmPrefix+"_mul",t1,t2,t1),c.call(ftmPrefix+"_frobeniusMap3",t1,t1),c.call(ftmPrefix+"_mul",t6,t5,t6),c.call(ftmPrefix+"_frobeniusMap1",t6,t6),c.call(ftmPrefix+"_mul",t3,t0,t3),c.call(ftmPrefix+"_frobeniusMap2",t3,t3),c.call(ftmPrefix+"_mul",t3,t1,t3),c.call(ftmPrefix+"_mul",t3,t6,t3),c.call(ftmPrefix+"_mul",t3,t4,res))}function buildFinalExponentiationOld(){let f=module.addFunction(prefix+"_finalExponentiationOld");f.addParam("x","i32"),f.addParam("r","i32");let exponent=0x2ee1db5dcc825b7e1bda9c0496a1c0a89ee0193d4977b3f7d4507d07363baa13f8d14a917848517badc3a43d1073776ab353f2c30698e8cc7deada9c0aadff5e9cfee9a074e43b9a660835cc872ee83ff3a0f0f1c0ad0d6106feaf4e347aa68ad49466fa927e7bb9375331807a0dce2630d9aa4b113f414386b0e8819328148978e2b0dd39099b86e1ab656d2670d93e4d7acdd350da5359bc73ab61a0c5bf24c374693c49f570bcd2b01f3077ffb10bf24dde41064837f27611212596bc293c8d4c01f25118790f4684d0b9c40a68eb74bb22a40ee7169cdc1041296532fef459f12438dfc8e2886ef965e61a474c5c85b0129127a1b5ad0463434724538411d1676a53b5a62eb34c05739334f46c02c3f0bd0c55d3109cd15948d0a1fad20044ce6ad4c6bec3ec03ef19592004cedd556952c6d8823b19dadd7c2498345c6e5308f1c511291097db60b1749bf9b71a9f9e0100418a3ef0bc627751bbd81367066bca6a4c1b6dcfc5cceb73fc56947a403577dfa9e13c24ea820b09c1d9f7c31759c3635de3f7a3639991708e88adce88177456c49637fd7961be1a4c7e79fb02faa732e2f3ec2bea83d196283313492caa9d4aff1c910e9622d2a73f62537f2701aaef6539314043f7bbce5b78c7869aeb2181a67e49eeed2161daf3f881bd88592d767f67c4717489119226c2f011d4cab803e9d71650a6f80698e2f8491d12191a04406fbc8fbd5f48925f98630e68bfb24c0bcb9b55df57510n,pExponent=module.alloc(utils.bigInt2BytesLE(exponent,544)),c=f.getCodeBuilder();f.addCode(c.call(ftmPrefix+"_exp",c.getLocal("x"),c.i32_const(pExponent),c.i32_const(544),c.getLocal("r")))}module.modules[prefix]={n64q:n64q,n64r:n64r,n8q:n8q,n8r:n8r,pG1gen:pG1gen,pG1zero:pG1zero,pG1b:pG1b,pG2gen:pG2gen,pG2zero:pG2zero,pG2b:pG2b,pq:module.modules.f1m.pq,pr:pr,pOneT:pOneT,r:r,q:q,prePSize:prePSize,preQSize:preQSize},function(){let f=module.addFunction(f6mPrefix+"_mul1");f.addParam("pA","i32"),f.addParam("pC1","i32"),f.addParam("pR","i32");let c=f.getCodeBuilder(),A_c0=c.getLocal("pA"),A_c1=c.i32_add(c.getLocal("pA"),c.i32_const(2*f1size)),A_c2=c.i32_add(c.getLocal("pA"),c.i32_const(4*f1size)),c1=c.getLocal("pC1"),t1=c.getLocal("pR"),t2=c.i32_add(c.getLocal("pR"),c.i32_const(2*f1size)),b_b=c.i32_add(c.getLocal("pR"),c.i32_const(4*f1size)),Ac0_Ac1=c.i32_const(module.alloc(2*f1size)),Ac1_Ac2=c.i32_const(module.alloc(2*f1size));f.addCode(c.call(f2mPrefix+"_add",A_c0,A_c1,Ac0_Ac1),c.call(f2mPrefix+"_add",A_c1,A_c2,Ac1_Ac2),c.call(f2mPrefix+"_mul",A_c1,c1,b_b),c.call(f2mPrefix+"_mul",Ac1_Ac2,c1,t1),c.call(f2mPrefix+"_sub",t1,b_b,t1),c.call(f2mPrefix+"_mulNR",t1,t1),c.call(f2mPrefix+"_mul",Ac0_Ac1,c1,t2),c.call(f2mPrefix+"_sub",t2,b_b,t2))}(),function(){let f=module.addFunction(f6mPrefix+"_mul01");f.addParam("pA","i32"),f.addParam("pC0","i32"),f.addParam("pC1","i32"),f.addParam("pR","i32");let c=f.getCodeBuilder(),A_c0=c.getLocal("pA"),A_c1=c.i32_add(c.getLocal("pA"),c.i32_const(2*f1size)),A_c2=c.i32_add(c.getLocal("pA"),c.i32_const(4*f1size)),c0=c.getLocal("pC0"),c1=c.getLocal("pC1"),t1=c.getLocal("pR"),t2=c.i32_add(c.getLocal("pR"),c.i32_const(2*f1size)),t3=c.i32_add(c.getLocal("pR"),c.i32_const(4*f1size)),a_a=c.i32_const(module.alloc(2*f1size)),b_b=c.i32_const(module.alloc(2*f1size)),Ac0_Ac1=c.i32_const(module.alloc(2*f1size)),Ac0_Ac2=c.i32_const(module.alloc(2*f1size));f.addCode(c.call(f2mPrefix+"_mul",A_c0,c0,a_a),c.call(f2mPrefix+"_mul",A_c1,c1,b_b),c.call(f2mPrefix+"_add",A_c0,A_c1,Ac0_Ac1),c.call(f2mPrefix+"_add",A_c0,A_c2,Ac0_Ac2),c.call(f2mPrefix+"_add",A_c1,A_c2,t1),c.call(f2mPrefix+"_mul",t1,c1,t1),c.call(f2mPrefix+"_sub",t1,b_b,t1),c.call(f2mPrefix+"_mulNR",t1,t1),c.call(f2mPrefix+"_add",t1,a_a,t1),c.call(f2mPrefix+"_add",c0,c1,t2),c.call(f2mPrefix+"_mul",t2,Ac0_Ac1,t2),c.call(f2mPrefix+"_sub",t2,a_a,t2),c.call(f2mPrefix+"_sub",t2,b_b,t2),c.call(f2mPrefix+"_mul",Ac0_Ac2,c0,t3),c.call(f2mPrefix+"_sub",t3,a_a,t3),c.call(f2mPrefix+"_add",t3,b_b,t3))}(),function(){let f=module.addFunction(ftmPrefix+"_mul014");f.addParam("pA","i32"),f.addParam("pC0","i32"),f.addParam("pC1","i32"),f.addParam("pC4","i32"),f.addParam("pR","i32");let c=f.getCodeBuilder(),A_c0=c.getLocal("pA"),A_c1=c.i32_add(c.getLocal("pA"),c.i32_const(6*f1size)),c0=c.getLocal("pC0"),c1=c.getLocal("pC1"),c4=c.getLocal("pC4"),aa=c.i32_const(module.alloc(6*f1size)),bb=c.i32_const(module.alloc(6*f1size)),o=c.i32_const(module.alloc(2*f1size)),R_c0=c.getLocal("pR"),R_c1=c.i32_add(c.getLocal("pR"),c.i32_const(6*f1size));f.addCode(c.call(f6mPrefix+"_mul01",A_c0,c0,c1,aa),c.call(f6mPrefix+"_mul1",A_c1,c4,bb),c.call(f2mPrefix+"_add",c1,c4,o),c.call(f6mPrefix+"_add",A_c1,A_c0,R_c1),c.call(f6mPrefix+"_mul01",R_c1,c0,o,R_c1),c.call(f6mPrefix+"_sub",R_c1,aa,R_c1),c.call(f6mPrefix+"_sub",R_c1,bb,R_c1),c.call(f6mPrefix+"_copy",bb,R_c0),c.call(f6mPrefix+"_mulNR",R_c0,R_c0),c.call(f6mPrefix+"_add",R_c0,aa,R_c0))}(),function(){let f=module.addFunction(prefix+"_ell");f.addParam("pP","i32"),f.addParam("pCoefs","i32"),f.addParam("pF","i32");let c=f.getCodeBuilder(),Px=c.getLocal("pP"),Py=c.i32_add(c.getLocal("pP"),c.i32_const(n8q)),F=c.getLocal("pF"),coef0_0=c.getLocal("pCoefs"),coef0_1=c.i32_add(c.getLocal("pCoefs"),c.i32_const(f1size)),coef1_0=c.i32_add(c.getLocal("pCoefs"),c.i32_const(2*f1size)),coef1_1=c.i32_add(c.getLocal("pCoefs"),c.i32_const(3*f1size)),coef2=c.i32_add(c.getLocal("pCoefs"),c.i32_const(4*f1size)),pc0=module.alloc(2*f1size),c0=c.i32_const(pc0),c0_c0=c.i32_const(pc0),c0_c1=c.i32_const(pc0+f1size),pc1=module.alloc(2*f1size),c1=c.i32_const(pc1),c1_c0=c.i32_const(pc1),c1_c1=c.i32_const(pc1+f1size);f.addCode(c.call(f1mPrefix+"_mul",coef0_0,Py,c0_c0),c.call(f1mPrefix+"_mul",coef0_1,Py,c0_c1),c.call(f1mPrefix+"_mul",coef1_0,Px,c1_c0),c.call(f1mPrefix+"_mul",coef1_1,Px,c1_c1),c.call(ftmPrefix+"_mul014",F,coef2,c1,c0,F))}();let pPreP=module.alloc(prePSize),pPreQ=module.alloc(preQSize);function buildPairingEquation(nPairings){let f=module.addFunction(prefix+"_pairingEq"+nPairings);for(let i=0;i<nPairings;i++)f.addParam("p_"+i,"i32"),f.addParam("q_"+i,"i32");f.addParam("c","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),resT=c.i32_const(module.alloc(ftsize)),auxT=c.i32_const(module.alloc(ftsize));f.addCode(c.call(ftmPrefix+"_one",resT));for(let i1=0;i1<nPairings;i1++)f.addCode(c.call(prefix+"_prepareG1",c.getLocal("p_"+i1),c.i32_const(pPreP))),f.addCode(c.call(prefix+"_prepareG2",c.getLocal("q_"+i1),c.i32_const(pPreQ))),f.addCode(c.if(c.i32_eqz(c.call(g1mPrefix+"_inGroupAffine",c.i32_const(pPreP))),c.ret(c.i32_const(0))),c.if(c.i32_eqz(c.call(g2mPrefix+"_inGroupAffine",c.i32_const(pPreQ))),c.ret(c.i32_const(0)))),f.addCode(c.call(prefix+"_millerLoop",c.i32_const(pPreP),c.i32_const(pPreQ),auxT)),f.addCode(c.call(ftmPrefix+"_mul",resT,auxT,resT));f.addCode(c.call(prefix+"_finalExponentiation",resT,resT)),f.addCode(c.call(ftmPrefix+"_eq",resT,c.getLocal("c")))}function buildPairing(){let f=module.addFunction(prefix+"_pairing");f.addParam("p","i32"),f.addParam("q","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),resT=c.i32_const(module.alloc(ftsize));f.addCode(c.call(prefix+"_prepareG1",c.getLocal("p"),c.i32_const(pPreP))),f.addCode(c.call(prefix+"_prepareG2",c.getLocal("q"),c.i32_const(pPreQ))),f.addCode(c.call(prefix+"_millerLoop",c.i32_const(pPreP),c.i32_const(pPreQ),resT)),f.addCode(c.call(prefix+"_finalExponentiation",resT,c.getLocal("r")))}function buildInGroupG2(){let f=module.addFunction(g2mPrefix+"_inGroupAffine");f.addParam("p","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),WINV=[0xd0088f51cbff34d258dd3db21a5d66bb23ba5c279c2895fb39869507b587b120f55ffff58a9ffffdcff7fffffffd556n,0xd0088f51cbff34d258dd3db21a5d66bb23ba5c279c2895fb39869507b587b120f55ffff58a9ffffdcff7fffffffd555n],FROB2X=0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,FROB3Y=[0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n,0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n],wInv=c.i32_const(module.alloc([...utils.bigInt2BytesLE(toMontgomery(WINV[0]),n8q),...utils.bigInt2BytesLE(toMontgomery(WINV[1]),n8q)])),frob2X=c.i32_const(module.alloc(utils.bigInt2BytesLE(toMontgomery(FROB2X),n8q))),frob3Y=c.i32_const(module.alloc([...utils.bigInt2BytesLE(toMontgomery(FROB3Y[0]),n8q),...utils.bigInt2BytesLE(toMontgomery(FROB3Y[1]),n8q)])),z=c.i32_const(module.alloc(utils.bigInt2BytesLE(finalExpZ,8))),px=c.getLocal("p"),py=c.i32_add(c.getLocal("p"),c.i32_const(f2size)),aux=c.i32_const(module.alloc(f1size)),x_winv=c.i32_const(module.alloc(f2size)),y_winv=c.i32_const(module.alloc(f2size)),pf2=module.alloc(2*f2size),f2=c.i32_const(pf2),f2x=c.i32_const(pf2),f2x_c1=c.i32_const(pf2),f2x_c2=c.i32_const(pf2+f1size),f2y=c.i32_const(pf2+f2size),f2y_c1=c.i32_const(pf2+f2size),f2y_c2=c.i32_const(pf2+f2size+f1size),pf3=module.alloc(3*f2size),f3=c.i32_const(pf3),f3x=c.i32_const(pf3),f3x_c1=c.i32_const(pf3),f3x_c2=c.i32_const(pf3+f1size),f3y=c.i32_const(pf3+f2size),f3y_c1=c.i32_const(pf3+f2size),f3y_c2=c.i32_const(pf3+f2size+f1size),f3z=c.i32_const(pf3+2*f2size);f.addCode(c.if(c.call(g2mPrefix+"_isZeroAffine",c.getLocal("p")),c.ret(c.i32_const(1))),c.if(c.i32_eqz(c.call(g2mPrefix+"_inCurveAffine",c.getLocal("p"))),c.ret(c.i32_const(0))),c.call(f2mPrefix+"_mul",px,wInv,x_winv),c.call(f2mPrefix+"_mul",py,wInv,y_winv),c.call(f2mPrefix+"_mul1",x_winv,frob2X,f2x),c.call(f2mPrefix+"_neg",y_winv,f2y),c.call(f2mPrefix+"_neg",x_winv,f3x),c.call(f2mPrefix+"_mul",y_winv,frob3Y,f3y),c.call(f1mPrefix+"_sub",f2x_c1,f2x_c2,aux),c.call(f1mPrefix+"_add",f2x_c1,f2x_c2,f2x_c2),c.call(f1mPrefix+"_copy",aux,f2x_c1),c.call(f1mPrefix+"_sub",f2y_c1,f2y_c2,aux),c.call(f1mPrefix+"_add",f2y_c1,f2y_c2,f2y_c2),c.call(f1mPrefix+"_copy",aux,f2y_c1),c.call(f1mPrefix+"_add",f3x_c1,f3x_c2,aux),c.call(f1mPrefix+"_sub",f3x_c1,f3x_c2,f3x_c2),c.call(f1mPrefix+"_copy",aux,f3x_c1),c.call(f1mPrefix+"_sub",f3y_c2,f3y_c1,aux),c.call(f1mPrefix+"_add",f3y_c1,f3y_c2,f3y_c2),c.call(f1mPrefix+"_copy",aux,f3y_c1),c.call(f2mPrefix+"_one",f3z),c.call(g2mPrefix+"_timesScalar",f3,z,c.i32_const(8),f3),c.call(g2mPrefix+"_addMixed",f3,f2,f3),c.ret(c.call(g2mPrefix+"_eqMixed",f3,c.getLocal("p"))));let fInGroup=module.addFunction(g2mPrefix+"_inGroup");fInGroup.addParam("pIn","i32"),fInGroup.setReturnType("i32");let c2=fInGroup.getCodeBuilder(),aux2=c2.i32_const(module.alloc(2*f2size));fInGroup.addCode(c2.call(g2mPrefix+"_toAffine",c2.getLocal("pIn"),aux2),c2.ret(c2.call(g2mPrefix+"_inGroupAffine",aux2)))}function buildInGroupG1(){let f=module.addFunction(g1mPrefix+"_inGroupAffine");f.addParam("p","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),BETA=0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,BETA2=0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,Z2M1D3=(finalExpZ*finalExpZ-1n)/3n,beta=c.i32_const(module.alloc(utils.bigInt2BytesLE(toMontgomery(BETA),n8q))),beta2=c.i32_const(module.alloc(utils.bigInt2BytesLE(toMontgomery(BETA2),n8q))),z2m1d3=c.i32_const(module.alloc(utils.bigInt2BytesLE(Z2M1D3,16))),px=c.getLocal("p"),py=c.i32_add(c.getLocal("p"),c.i32_const(f1size)),psp=module.alloc(3*f1size),sp=c.i32_const(psp),spx=c.i32_const(psp),spy=c.i32_const(psp+f1size),ps2p=module.alloc(2*f1size),s2p=c.i32_const(ps2p),s2px=c.i32_const(ps2p),s2py=c.i32_const(ps2p+f1size);f.addCode(c.if(c.call(g1mPrefix+"_isZeroAffine",c.getLocal("p")),c.ret(c.i32_const(1))),c.if(c.i32_eqz(c.call(g1mPrefix+"_inCurveAffine",c.getLocal("p"))),c.ret(c.i32_const(0))),c.call(f1mPrefix+"_mul",px,beta,spx),c.call(f1mPrefix+"_copy",py,spy),c.call(f1mPrefix+"_mul",px,beta2,s2px),c.call(f1mPrefix+"_copy",py,s2py),c.call(g1mPrefix+"_doubleAffine",sp,sp),c.call(g1mPrefix+"_subMixed",sp,c.getLocal("p"),sp),c.call(g1mPrefix+"_subMixed",sp,s2p,sp),c.call(g1mPrefix+"_timesScalar",sp,z2m1d3,c.i32_const(16),sp),c.ret(c.call(g1mPrefix+"_eqMixed",sp,s2p)));let fInGroup=module.addFunction(g1mPrefix+"_inGroup");fInGroup.addParam("pIn","i32"),fInGroup.setReturnType("i32");let c2=fInGroup.getCodeBuilder(),aux2=c2.i32_const(module.alloc(2*f1size));fInGroup.addCode(c2.call(g1mPrefix+"_toAffine",c2.getLocal("pIn"),aux2),c2.ret(c2.call(g1mPrefix+"_inGroupAffine",aux2)))}for(let i=0;i<10;i++)buildFrobeniusMap(i),module.exportFunction(ftmPrefix+"_frobeniusMap"+i);buildInGroupG1(),buildInGroupG2(),buildPrepAddStep(),buildPrepDoubleStep(),buildPrepareG1(),buildPrepareG2(),buildMillerLoop(),buildFinalExponentiationOld(),buildFinalExponentiation();for(let i1=1;i1<=5;i1++)buildPairingEquation(i1),module.exportFunction(prefix+"_pairingEq"+i1);buildPairing(),module.exportFunction(prefix+"_pairing"),module.exportFunction(prefix+"_prepareG1"),module.exportFunction(prefix+"_prepareG2"),module.exportFunction(prefix+"_millerLoop"),module.exportFunction(prefix+"_finalExponentiation"),module.exportFunction(prefix+"_finalExponentiationOld"),module.exportFunction(prefix+"__cyclotomicSquare"),module.exportFunction(prefix+"__cyclotomicExp_w0"),module.exportFunction(f6mPrefix+"_mul1"),module.exportFunction(f6mPrefix+"_mul01"),module.exportFunction(ftmPrefix+"_mul014"),module.exportFunction(g1mPrefix+"_inGroupAffine"),module.exportFunction(g1mPrefix+"_inGroup"),module.exportFunction(g2mPrefix+"_inGroupAffine"),module.exportFunction(g2mPrefix+"_inGroup")}},8093:function(module,__unused_webpack_exports,__webpack_require__){let utils=__webpack_require__(5830),buildF1m=__webpack_require__(3792),buildF1=__webpack_require__(9329),buildF2m=__webpack_require__(4673),buildF3m=__webpack_require__(6019),buildCurve=__webpack_require__(6319),buildFFT=__webpack_require__(6588),buildPol=__webpack_require__(3234),buildQAP=__webpack_require__(2217),buildApplyKey=__webpack_require__(8236),{bitLength,modInv,isOdd,isNegative}=__webpack_require__(9106);module.exports=function(module,_prefix){let prefix=_prefix||"bn128";if(module.modules[prefix])return prefix;let q=0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n,r=0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001n,n64=Math.floor((bitLength(q-1n)-1)/64)+1,n8=8*n64,frsize=n8,f1size=n8,f2size=2*f1size,ftsize=12*f1size,pr=module.alloc(utils.bigInt2BytesLE(r,frsize)),f1mPrefix=buildF1m(module,q,"f1m");buildF1(module,r,"fr","frm");let pG1b=module.alloc(utils.bigInt2BytesLE(toMontgomery(3n),f1size)),g1mPrefix=buildCurve(module,"g1m","f1m",pG1b);buildFFT(module,"frm","frm","frm","frm_mul"),buildPol(module,"pol","frm"),buildQAP(module,"qap","frm");let f2mPrefix=buildF2m(module,"f1m_neg","f2m","f1m"),pG2b=module.alloc([...utils.bigInt2BytesLE(toMontgomery(0x2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e5n),f1size),...utils.bigInt2BytesLE(toMontgomery(0x9713b03af0fed4cd2cafadeed8fdf4a74fa084e52d1852e4a2bd0685c315d2n),f1size)]),g2mPrefix=buildCurve(module,"g2m","f2m",pG2b);function buildGTimesFr(fnName,opMul){let f=module.addFunction(fnName);f.addParam("pG","i32"),f.addParam("pFr","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(n8));f.addCode(c.call("frm_fromMontgomery",c.getLocal("pFr"),AUX),c.call(opMul,c.getLocal("pG"),AUX,c.i32_const(n8),c.getLocal("pr"))),module.exportFunction(fnName)}function toMontgomery(a){return BigInt(a)*(1n<<BigInt(8*f1size))%q}buildGTimesFr("g1m_timesFr","g1m_timesScalar"),buildFFT(module,"g1m","g1m","frm","g1m_timesFr"),buildGTimesFr("g2m_timesFr","g2m_timesScalar"),buildFFT(module,"g2m","g2m","frm","g2m_timesFr"),buildGTimesFr("g1m_timesFrAffine","g1m_timesScalarAffine"),buildGTimesFr("g2m_timesFrAffine","g2m_timesScalarAffine"),buildApplyKey(module,"frm_batchApplyKey","fmr","frm",n8,n8,n8,"frm_mul"),buildApplyKey(module,"g1m_batchApplyKey","g1m","frm",3*n8,3*n8,n8,"g1m_timesFr"),buildApplyKey(module,"g1m_batchApplyKeyMixed","g1m","frm",2*n8,3*n8,n8,"g1m_timesFrAffine"),buildApplyKey(module,"g2m_batchApplyKey","g2m","frm",6*n8,6*n8,n8,"g2m_timesFr"),buildApplyKey(module,"g2m_batchApplyKeyMixed","g2m","frm",4*n8,6*n8,n8,"g2m_timesFrAffine");let G1gen=[1n,2n,1n],pG1gen=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G1gen[0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1gen[1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1gen[2]),f1size)]),G1zero=[0n,1n,0n],pG1zero=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G1zero[0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1zero[1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G1zero[2]),f1size)]),G2gen=[[0x1800deef121f1e76426a00665e5c4479674322d4f75edadd46debd5cd992f6edn,0x198e9393920d483a7260bfb731fb5d25f1aa493335a9e71297e485b7aef312c2n],[0x12c85ea5db8c6deb4aab71808dcb408fe3d1e7690c43d37b4ce6cc0166fa7daan,0x90689d0585ff075ec9e99ad690c3395bc4b313370b38ef355acdadcd122975bn],[1n,0n]],pG2gen=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G2gen[0][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[0][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[1][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[1][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[2][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2gen[2][1]),f1size)]),G2zero=[[0n,0n],[1n,0n],[0n,0n]],pG2zero=module.alloc([...utils.bigInt2BytesLE(toMontgomery(G2zero[0][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[0][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[1][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[1][1]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[2][0]),f1size),...utils.bigInt2BytesLE(toMontgomery(G2zero[2][1]),f1size)]),pOneT=module.alloc([...utils.bigInt2BytesLE(toMontgomery(1),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size),...utils.bigInt2BytesLE(toMontgomery(0),f1size)]),pNonResidueF6=module.alloc([...utils.bigInt2BytesLE(toMontgomery(9),f1size),...utils.bigInt2BytesLE(toMontgomery(1),f1size)]),pTwoInv=module.alloc([...utils.bigInt2BytesLE(toMontgomery(modInv(2n,q)),f1size),...utils.bigInt2BytesLE(0n,f1size)]),pAltBn128Twist=pNonResidueF6,pTwistCoefB=module.alloc([...utils.bigInt2BytesLE(toMontgomery(0x2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e5n),f1size),...utils.bigInt2BytesLE(toMontgomery(0x9713b03af0fed4cd2cafadeed8fdf4a74fa084e52d1852e4a2bd0685c315d2n),f1size)]);!function(){let f=module.addFunction(prefix+"_mulNR6");f.addParam("x","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),c.getLocal("x"),c.getLocal("pr")))}();let f6mPrefix=buildF3m(module,prefix+"_mulNR6","f6m","f2m");!function(){let f=module.addFunction(prefix+"_mulNR12");f.addParam("x","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),c.i32_add(c.getLocal("x"),c.i32_const(4*n8)),c.getLocal("pr")),c.call(f2mPrefix+"_copy",c.getLocal("x"),c.i32_add(c.getLocal("pr"),c.i32_const(2*n8))),c.call(f2mPrefix+"_copy",c.i32_add(c.getLocal("x"),c.i32_const(2*n8)),c.i32_add(c.getLocal("pr"),c.i32_const(4*n8))))}();let ftmPrefix=buildF2m(module,prefix+"_mulNR12","ftm",f6mPrefix),ateLoopCount=0x19d797039be763ba8n,ateLoopBitBytes=bits(ateLoopCount),pAteLoopBitBytes=module.alloc(ateLoopBitBytes),isLoopNegative=!1,ateCoefSize=3*f2size,ateNDblCoefs=ateLoopBitBytes.length-1,ateNAddCoefs=ateLoopBitBytes.reduce((acc,b)=>acc+(0!=b?1:0),0),ateNCoefs=ateNAddCoefs+ateNDblCoefs+1,prePSize=6*n8,preQSize=3*n8*2+ateNCoefs*ateCoefSize,finalExpIsNegative=!1;module.modules[prefix]={n64:n64,pG1gen:pG1gen,pG1zero:pG1zero,pG1b:pG1b,pG2gen:pG2gen,pG2zero:pG2zero,pG2b:pG2b,pq:module.modules.f1m.pq,pr:pr,pOneT:pOneT,prePSize:prePSize,preQSize:preQSize,r:r.toString(),q:q.toString()};let finalExpZ=0x44e992b44a6909f1n;function naf(n){let E=n,res=[];for(;E>0n;){if(isOdd(E)){let z=2-Number(E%4n);res.push(z),E-=BigInt(z)}else res.push(0);E>>=1n}return res}function bits(n){let E=n,res=[];for(;E>0n;)isOdd(E)?res.push(1):res.push(0),E>>=1n;return res}function buildPrepareG1(){let f=module.addFunction(prefix+"_prepareG1");f.addParam("pP","i32"),f.addParam("ppreP","i32");let c=f.getCodeBuilder();f.addCode(c.call(g1mPrefix+"_normalize",c.getLocal("pP"),c.getLocal("ppreP")))}function buildPrepAddStep(){let f=module.addFunction(prefix+"_prepAddStep");f.addParam("pQ","i32"),f.addParam("pR","i32"),f.addParam("pCoef","i32");let c=f.getCodeBuilder(),X2=c.getLocal("pQ"),Y2=c.i32_add(c.getLocal("pQ"),c.i32_const(f2size)),X1=c.getLocal("pR"),Y1=c.i32_add(c.getLocal("pR"),c.i32_const(f2size)),Z1=c.i32_add(c.getLocal("pR"),c.i32_const(2*f2size)),ELL_0=c.getLocal("pCoef"),ELL_VW=c.i32_add(c.getLocal("pCoef"),c.i32_const(f2size)),ELL_VV=c.i32_add(c.getLocal("pCoef"),c.i32_const(2*f2size)),D=ELL_VW,E=c.i32_const(module.alloc(f2size)),F=c.i32_const(module.alloc(f2size)),G=c.i32_const(module.alloc(f2size)),H=c.i32_const(module.alloc(f2size)),I=c.i32_const(module.alloc(f2size)),J=c.i32_const(module.alloc(f2size)),AUX=c.i32_const(module.alloc(f2size));f.addCode(c.call(f2mPrefix+"_mul",X2,Z1,D),c.call(f2mPrefix+"_sub",X1,D,D),c.call(f2mPrefix+"_mul",Y2,Z1,E),c.call(f2mPrefix+"_sub",Y1,E,E),c.call(f2mPrefix+"_square",D,F),c.call(f2mPrefix+"_square",E,G),c.call(f2mPrefix+"_mul",D,F,H),c.call(f2mPrefix+"_mul",X1,F,I),c.call(f2mPrefix+"_add",I,I,AUX),c.call(f2mPrefix+"_mul",Z1,G,J),c.call(f2mPrefix+"_add",H,J,J),c.call(f2mPrefix+"_sub",J,AUX,J),c.call(f2mPrefix+"_mul",D,J,X1),c.call(f2mPrefix+"_mul",H,Y1,Y1),c.call(f2mPrefix+"_sub",I,J,AUX),c.call(f2mPrefix+"_mul",E,AUX,AUX),c.call(f2mPrefix+"_sub",AUX,Y1,Y1),c.call(f2mPrefix+"_mul",Z1,H,Z1),c.call(f2mPrefix+"_mul",D,Y2,AUX),c.call(f2mPrefix+"_mul",E,X2,ELL_0),c.call(f2mPrefix+"_sub",ELL_0,AUX,ELL_0),c.call(f2mPrefix+"_mul",ELL_0,c.i32_const(pAltBn128Twist),ELL_0),c.call(f2mPrefix+"_neg",E,ELL_VV))}function buildPrepDoubleStep(){let f=module.addFunction(prefix+"_prepDblStep");f.addParam("pR","i32"),f.addParam("pCoef","i32");let c=f.getCodeBuilder(),X1=c.getLocal("pR"),Y1=c.i32_add(c.getLocal("pR"),c.i32_const(f2size)),Z1=c.i32_add(c.getLocal("pR"),c.i32_const(2*f2size)),ELL_0=c.getLocal("pCoef"),ELL_VW=c.i32_add(c.getLocal("pCoef"),c.i32_const(f2size)),ELL_VV=c.i32_add(c.getLocal("pCoef"),c.i32_const(2*f2size)),A=c.i32_const(module.alloc(f2size)),B=c.i32_const(module.alloc(f2size)),C=c.i32_const(module.alloc(f2size)),D=c.i32_const(module.alloc(f2size)),E=c.i32_const(module.alloc(f2size)),F=c.i32_const(module.alloc(f2size)),G=c.i32_const(module.alloc(f2size)),H=c.i32_const(module.alloc(f2size)),I=c.i32_const(module.alloc(f2size)),J=c.i32_const(module.alloc(f2size)),E2=c.i32_const(module.alloc(f2size)),AUX=c.i32_const(module.alloc(f2size));f.addCode(c.call(f2mPrefix+"_mul",Y1,c.i32_const(pTwoInv),A),c.call(f2mPrefix+"_mul",X1,A,A),c.call(f2mPrefix+"_square",Y1,B),c.call(f2mPrefix+"_square",Z1,C),c.call(f2mPrefix+"_add",C,C,D),c.call(f2mPrefix+"_add",D,C,D),c.call(f2mPrefix+"_mul",c.i32_const(pTwistCoefB),D,E),c.call(f2mPrefix+"_add",E,E,F),c.call(f2mPrefix+"_add",E,F,F),c.call(f2mPrefix+"_add",B,F,G),c.call(f2mPrefix+"_mul",G,c.i32_const(pTwoInv),G),c.call(f2mPrefix+"_add",B,C,AUX),c.call(f2mPrefix+"_add",Y1,Z1,H),c.call(f2mPrefix+"_square",H,H),c.call(f2mPrefix+"_sub",H,AUX,H),c.call(f2mPrefix+"_sub",E,B,I),c.call(f2mPrefix+"_square",X1,J),c.call(f2mPrefix+"_square",E,E2),c.call(f2mPrefix+"_sub",B,F,AUX),c.call(f2mPrefix+"_mul",A,AUX,X1),c.call(f2mPrefix+"_add",E2,E2,AUX),c.call(f2mPrefix+"_add",E2,AUX,AUX),c.call(f2mPrefix+"_square",G,Y1),c.call(f2mPrefix+"_sub",Y1,AUX,Y1),c.call(f2mPrefix+"_mul",B,H,Z1),c.call(f2mPrefix+"_mul",c.i32_const(pAltBn128Twist),I,ELL_0),c.call(f2mPrefix+"_neg",H,ELL_VW),c.call(f2mPrefix+"_add",J,J,ELL_VV),c.call(f2mPrefix+"_add",J,ELL_VV,ELL_VV))}function buildMulByQ(){let f=module.addFunction(prefix+"_mulByQ");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(f2size)),z=c.i32_add(c.getLocal("p1"),c.i32_const(2*f2size)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(f2size)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*f2size)),MulByQX=c.i32_const(module.alloc([...utils.bigInt2BytesLE(toMontgomery("21575463638280843010398324269430826099269044274347216827212613867836435027261"),f1size),...utils.bigInt2BytesLE(toMontgomery("10307601595873709700152284273816112264069230130616436755625194854815875713954"),f1size)])),MulByQY=c.i32_const(module.alloc([...utils.bigInt2BytesLE(toMontgomery("2821565182194536844548159561693502659359617185244120367078079554186484126554"),f1size),...utils.bigInt2BytesLE(toMontgomery("3505843767911556378687030309984248845540243509899259641013678093033130930403"),f1size)]));f.addCode(c.call(f2mPrefix+"_conjugate",x,x3),c.call(f2mPrefix+"_mul",MulByQX,x3,x3),c.call(f2mPrefix+"_conjugate",y,y3),c.call(f2mPrefix+"_mul",MulByQY,y3,y3),c.call(f2mPrefix+"_conjugate",z,z3))}function buildPrepareG2(){buildMulByQ();let f=module.addFunction(prefix+"_prepareG2");f.addParam("pQ","i32"),f.addParam("ppreQ","i32"),f.addLocal("pCoef","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),QX=c.getLocal("pQ"),pR=module.alloc(3*f2size),R=c.i32_const(pR),RX=c.i32_const(pR),RY=c.i32_const(pR+f2size),RZ=c.i32_const(pR+2*f2size),cQX=c.i32_add(c.getLocal("ppreQ"),c.i32_const(0)),cQY=c.i32_add(c.getLocal("ppreQ"),c.i32_const(f2size)),pQ1=module.alloc(3*f2size),Q1=c.i32_const(pQ1),pQ2=module.alloc(3*f2size),Q2=c.i32_const(pQ2),Q2Y=c.i32_const(pQ2+f2size);f.addCode(c.call(g2mPrefix+"_normalize",QX,cQX),c.call(f2mPrefix+"_copy",cQX,RX),c.call(f2mPrefix+"_copy",cQY,RY),c.call(f2mPrefix+"_one",RZ)),f.addCode(c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(3*f2size))),c.setLocal("i",c.i32_const(ateLoopBitBytes.length-2)),c.block(c.loop(c.call(prefix+"_prepDblStep",R,c.getLocal("pCoef")),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))),c.if(c.i32_load8_s(c.getLocal("i"),pAteLoopBitBytes),[...c.call(prefix+"_prepAddStep",cQX,R,c.getLocal("pCoef")),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize)))]),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0)))),f.addCode(c.call(prefix+"_mulByQ",cQX,Q1),c.call(prefix+"_mulByQ",Q1,Q2)),isLoopNegative&&f.addCode(c.call(f2mPrefix+"_neg",RY,RY)),f.addCode(c.call(f2mPrefix+"_neg",Q2Y,Q2Y),c.call(prefix+"_prepAddStep",Q1,R,c.getLocal("pCoef")),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))),c.call(prefix+"_prepAddStep",Q2,R,c.getLocal("pCoef")),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))))}function buildMulBy024Old(){let f=module.addFunction(prefix+"__mulBy024Old");f.addParam("pEll0","i32"),f.addParam("pEllVW","i32"),f.addParam("pEllVV","i32"),f.addParam("pR","i32");let c=f.getCodeBuilder(),x0=c.getLocal("pEll0"),x2=c.getLocal("pEllVV"),x4=c.getLocal("pEllVW"),z0=c.getLocal("pR"),pAUX12=module.alloc(ftsize),AUX12=c.i32_const(pAUX12),AUX12_0=c.i32_const(pAUX12),AUX12_2=c.i32_const(pAUX12+f2size),AUX12_4=c.i32_const(pAUX12+2*f2size),AUX12_6=c.i32_const(pAUX12+3*f2size),AUX12_8=c.i32_const(pAUX12+4*f2size),AUX12_10=c.i32_const(pAUX12+5*f2size);f.addCode(c.call(f2mPrefix+"_copy",x0,AUX12_0),c.call(f2mPrefix+"_zero",AUX12_2),c.call(f2mPrefix+"_copy",x2,AUX12_4),c.call(f2mPrefix+"_zero",AUX12_6),c.call(f2mPrefix+"_copy",x4,AUX12_8),c.call(f2mPrefix+"_zero",AUX12_10),c.call(ftmPrefix+"_mul",AUX12,z0,z0))}function buildMulBy024(){let f=module.addFunction(prefix+"__mulBy024");f.addParam("pEll0","i32"),f.addParam("pEllVW","i32"),f.addParam("pEllVV","i32"),f.addParam("pR","i32");let c=f.getCodeBuilder(),x0=c.getLocal("pEll0"),x2=c.getLocal("pEllVV"),x4=c.getLocal("pEllVW"),z0=c.getLocal("pR"),z1=c.i32_add(c.getLocal("pR"),c.i32_const(2*n8)),z2=c.i32_add(c.getLocal("pR"),c.i32_const(4*n8)),z3=c.i32_add(c.getLocal("pR"),c.i32_const(6*n8)),z4=c.i32_add(c.getLocal("pR"),c.i32_const(8*n8)),z5=c.i32_add(c.getLocal("pR"),c.i32_const(10*n8)),t0=c.i32_const(module.alloc(f2size)),t1=c.i32_const(module.alloc(f2size)),t2=c.i32_const(module.alloc(f2size)),s0=c.i32_const(module.alloc(f2size)),T3=c.i32_const(module.alloc(f2size)),T4=c.i32_const(module.alloc(f2size)),D0=c.i32_const(module.alloc(f2size)),D2=c.i32_const(module.alloc(f2size)),D4=c.i32_const(module.alloc(f2size)),S1=c.i32_const(module.alloc(f2size)),AUX=c.i32_const(module.alloc(f2size));f.addCode(c.call(f2mPrefix+"_mul",z0,x0,D0),c.call(f2mPrefix+"_mul",z2,x2,D2),c.call(f2mPrefix+"_mul",z4,x4,D4),c.call(f2mPrefix+"_add",z0,z4,t2),c.call(f2mPrefix+"_add",z0,z2,t1),c.call(f2mPrefix+"_add",z1,z3,s0),c.call(f2mPrefix+"_add",s0,z5,s0),c.call(f2mPrefix+"_mul",z1,x2,S1),c.call(f2mPrefix+"_add",S1,D4,T3),c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),T3,T4),c.call(f2mPrefix+"_add",T4,D0,z0),c.call(f2mPrefix+"_mul",z5,x4,T3),c.call(f2mPrefix+"_add",S1,T3,S1),c.call(f2mPrefix+"_add",T3,D2,T3),c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),T3,T4),c.call(f2mPrefix+"_mul",z1,x0,T3),c.call(f2mPrefix+"_add",S1,T3,S1),c.call(f2mPrefix+"_add",T4,T3,z1),c.call(f2mPrefix+"_add",x0,x2,t0),c.call(f2mPrefix+"_mul",t1,t0,T3),c.call(f2mPrefix+"_add",D0,D2,AUX),c.call(f2mPrefix+"_sub",T3,AUX,T3),c.call(f2mPrefix+"_mul",z3,x4,T4),c.call(f2mPrefix+"_add",S1,T4,S1),c.call(f2mPrefix+"_add",z2,z4,t0),c.call(f2mPrefix+"_add",T3,T4,z2),c.call(f2mPrefix+"_add",x2,x4,t1),c.call(f2mPrefix+"_mul",t1,t0,T3),c.call(f2mPrefix+"_add",D2,D4,AUX),c.call(f2mPrefix+"_sub",T3,AUX,T3),c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),T3,T4),c.call(f2mPrefix+"_mul",z3,x0,T3),c.call(f2mPrefix+"_add",S1,T3,S1),c.call(f2mPrefix+"_add",T4,T3,z3),c.call(f2mPrefix+"_mul",z5,x2,T3),c.call(f2mPrefix+"_add",S1,T3,S1),c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),T3,T4),c.call(f2mPrefix+"_add",x0,x4,t0),c.call(f2mPrefix+"_mul",t2,t0,T3),c.call(f2mPrefix+"_add",D0,D4,AUX),c.call(f2mPrefix+"_sub",T3,AUX,T3),c.call(f2mPrefix+"_add",T4,T3,z4),c.call(f2mPrefix+"_add",x0,x2,t0),c.call(f2mPrefix+"_add",t0,x4,t0),c.call(f2mPrefix+"_mul",s0,t0,T3),c.call(f2mPrefix+"_sub",T3,S1,z5))}function buildMillerLoop(){let f=module.addFunction(prefix+"_millerLoop");f.addParam("ppreP","i32"),f.addParam("ppreQ","i32"),f.addParam("r","i32"),f.addLocal("pCoef","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),preP_PX=c.getLocal("ppreP"),preP_PY=c.i32_add(c.getLocal("ppreP"),c.i32_const(f1size)),ELL_0=c.getLocal("pCoef"),ELL_VW=c.i32_add(c.getLocal("pCoef"),c.i32_const(f2size)),ELL_VV=c.i32_add(c.getLocal("pCoef"),c.i32_const(2*f2size)),pVW=module.alloc(f2size),VW=c.i32_const(pVW),pVV=module.alloc(f2size),VV=c.i32_const(pVV),F=c.getLocal("r");f.addCode(c.call(ftmPrefix+"_one",F),c.setLocal("pCoef",c.i32_add(c.getLocal("ppreQ"),c.i32_const(3*f2size))),c.setLocal("i",c.i32_const(ateLoopBitBytes.length-2)),c.block(c.loop(c.call(ftmPrefix+"_square",F,F),c.call(f2mPrefix+"_mul1",ELL_VW,preP_PY,VW),c.call(f2mPrefix+"_mul1",ELL_VV,preP_PX,VV),c.call(prefix+"__mulBy024",ELL_0,VW,VV,F),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))),c.if(c.i32_load8_s(c.getLocal("i"),pAteLoopBitBytes),[...c.call(f2mPrefix+"_mul1",ELL_VW,preP_PY,VW),...c.call(f2mPrefix+"_mul1",ELL_VV,preP_PX,VV),...c.call(prefix+"__mulBy024",ELL_0,VW,VV,F),...c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize)))]),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0)))),isLoopNegative&&f.addCode(c.call(ftmPrefix+"_inverse",F,F)),f.addCode(c.call(f2mPrefix+"_mul1",ELL_VW,preP_PY,VW),c.call(f2mPrefix+"_mul1",ELL_VV,preP_PX,VV),c.call(prefix+"__mulBy024",ELL_0,VW,VV,F),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))),c.call(f2mPrefix+"_mul1",ELL_VW,preP_PY,VW),c.call(f2mPrefix+"_mul1",ELL_VV,preP_PX,VV),c.call(prefix+"__mulBy024",ELL_0,VW,VV,F),c.setLocal("pCoef",c.i32_add(c.getLocal("pCoef"),c.i32_const(ateCoefSize))))}function buildFrobeniusMap(n){let F12=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x1284b71c2865a7dfe8b99fdd76e68b605c521e08292f2176d60b35dadcc9e470n,0x246996f3b4fae7e6a6327cfe12150b8e747992778eeec7e5ca5cf05f80f362acn],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd49n,0n],[0x19dc81cfcc82e4bbefe9608cd0acaa90894cb38dbe55d24ae86f7d391ed4a67fn,0xabf8b60be77d7306cbeee33576139d7f03a5e397d439ec7694aa2bf4c0c101n],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x757cab3a41d3cdc072fc0af59c61f302cfa95859526b0d41264475e420ac20fn,0xca6b035381e35b618e9b79ba4e2606ca20b7dfd71573c93e85845e34c4a5b9cn],[0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd46n,0n],[0x1ddf9756b8cbf849cf96a5d90a9accfd3b2f4c893f42a9166615563bfbb318d7n,0xbfab77f2c36b843121dc8b86f6c4ccf2307d819d98302a771c39bb757899a9bn],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0x1687cca314aebb6dc866e529b0d4adcd0e34b703aa1bf84253b10eddb9a856c8n,0x2fb855bcd54a22b6b18456d34c0b44c0187dc4add09d90a0c58be1eae3bc3c46n],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177ffffffn,0n],[0x290c83bf3d14634db120850727bb392d6a86d50bd34b19b929bc44b896723b38n,0x23bd9e3da9136a739f668e1adc9ef7f0f575ec93f71a8df953c846338c32a1abn]]],F6=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x2fb347984f7911f74c0bec3cf559b143b78cc310c2c3330c99e39557176f553dn,0x16c9e55061ebae204ba4cc8bd75a079432ae2a1d0b7c9dce1665d51c640fcba2n],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x856e078b755ef0abaff1c77959f25ac805ffd3d5d6942d37b746ee87bdcfb6dn,0x4f1de41b3d1766fa9f30e6dec26094f0fdf31bf98ff2631380cab2baaa586den],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0x28be74d4bb943f51699582b87809d9caf71614d4b0b71f3a62e913ee1dada9e4n,0x14a88ae0cb747b99c2b86abcbe01477a54f40eb4c3f6068dedae0bcec9c7aac7n]],[[1n,0n],[0x5b54f5e64eea80180f3c0b75a181e84d33365f7be94ec72848a1f55921ea762n,0x2c145edbe7fd8aee9f3a80b03b0b1c923685d2ea1bdec763c13b4711cd2b8126n],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0xbc58c6611c08dab19bee0f7b5b2444ee633094575b06bcb0e1a92bc3ccbf066n,0x23d5e999e1910a12feb0f6ef0cd21d04a44a9e08737f96e55fe3ed9d730c239fn],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x1ee972ae6a826a7d1d9da40771b6f589de1afb54342c724fa97bda050992657fn,0x10de546ff8d4ab51d2b513cdbb25772454326430418536d15721e37e70c255c9n]]],f=module.addFunction(prefix+"__frobeniusMap"+n);f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();for(let i=0;i<6;i++){let X=0==i?c.getLocal("x"):c.i32_add(c.getLocal("x"),c.i32_const(i*f2size)),Xc0=X,Xc1=c.i32_add(c.getLocal("x"),c.i32_const(i*f2size+f1size)),R=0==i?c.getLocal("r"):c.i32_add(c.getLocal("r"),c.i32_const(i*f2size)),Rc0=R,Rc1=c.i32_add(c.getLocal("r"),c.i32_const(i*f2size+f1size)),coef=mul2(F12[Math.floor(i/3)][n%12],F6[i%3][n%6]),pCoef=module.alloc([...utils.bigInt2BytesLE(toMontgomery(coef[0]),32),...utils.bigInt2BytesLE(toMontgomery(coef[1]),32)]);n%2==1?f.addCode(c.call(f1mPrefix+"_copy",Xc0,Rc0),c.call(f1mPrefix+"_neg",Xc1,Rc1),c.call(f2mPrefix+"_mul",R,c.i32_const(pCoef),R)):f.addCode(c.call(f2mPrefix+"_mul",X,c.i32_const(pCoef),R))}function mul2(a,b){let ac0=BigInt(a[0]),ac1=BigInt(a[1]),bc0=BigInt(b[0]),bc1=BigInt(b[1]),res=[(ac0*bc0-ac1*bc1)%q,(ac0*bc1+ac1*bc0)%q];return isNegative(res[0])&&(res[0]=res[0]+q),res}}function buildFinalExponentiationFirstChunk(){let f=module.addFunction(prefix+"__finalExponentiationFirstChunk");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),elt=c.getLocal("x"),eltC0=elt,eltC1=c.i32_add(elt,c.i32_const(6*n8)),r=c.getLocal("r"),pA=module.alloc(ftsize),A=c.i32_const(pA),Ac0=A,Ac1=c.i32_const(pA+6*n8),B=c.i32_const(module.alloc(ftsize)),C=c.i32_const(module.alloc(ftsize)),D=c.i32_const(module.alloc(ftsize));f.addCode(c.call(f6mPrefix+"_copy",eltC0,Ac0),c.call(f6mPrefix+"_neg",eltC1,Ac1),c.call(ftmPrefix+"_inverse",elt,B),c.call(ftmPrefix+"_mul",A,B,C),c.call(prefix+"__frobeniusMap2",C,D),c.call(ftmPrefix+"_mul",C,D,r))}function buildCyclotomicSquare(){let f=module.addFunction(prefix+"__cyclotomicSquare");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x4=c.i32_add(c.getLocal("x"),c.i32_const(f2size)),x3=c.i32_add(c.getLocal("x"),c.i32_const(2*f2size)),x2=c.i32_add(c.getLocal("x"),c.i32_const(3*f2size)),x1=c.i32_add(c.getLocal("x"),c.i32_const(4*f2size)),x5=c.i32_add(c.getLocal("x"),c.i32_const(5*f2size)),r0=c.getLocal("r"),r4=c.i32_add(c.getLocal("r"),c.i32_const(f2size)),r3=c.i32_add(c.getLocal("r"),c.i32_const(2*f2size)),r2=c.i32_add(c.getLocal("r"),c.i32_const(3*f2size)),r1=c.i32_add(c.getLocal("r"),c.i32_const(4*f2size)),r5=c.i32_add(c.getLocal("r"),c.i32_const(5*f2size)),t0=c.i32_const(module.alloc(f2size)),t1=c.i32_const(module.alloc(f2size)),t2=c.i32_const(module.alloc(f2size)),t3=c.i32_const(module.alloc(f2size)),t4=c.i32_const(module.alloc(f2size)),t5=c.i32_const(module.alloc(f2size)),tmp=c.i32_const(module.alloc(f2size)),AUX=c.i32_const(module.alloc(f2size));f.addCode(c.call(f2mPrefix+"_mul",x0,x1,tmp),c.call(f2mPrefix+"_mul",x1,c.i32_const(pNonResidueF6),t0),c.call(f2mPrefix+"_add",x0,t0,t0),c.call(f2mPrefix+"_add",x0,x1,AUX),c.call(f2mPrefix+"_mul",AUX,t0,t0),c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),tmp,AUX),c.call(f2mPrefix+"_add",tmp,AUX,AUX),c.call(f2mPrefix+"_sub",t0,AUX,t0),c.call(f2mPrefix+"_add",tmp,tmp,t1),c.call(f2mPrefix+"_mul",x2,x3,tmp),c.call(f2mPrefix+"_mul",x3,c.i32_const(pNonResidueF6),t2),c.call(f2mPrefix+"_add",x2,t2,t2),c.call(f2mPrefix+"_add",x2,x3,AUX),c.call(f2mPrefix+"_mul",AUX,t2,t2),c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),tmp,AUX),c.call(f2mPrefix+"_add",tmp,AUX,AUX),c.call(f2mPrefix+"_sub",t2,AUX,t2),c.call(f2mPrefix+"_add",tmp,tmp,t3),c.call(f2mPrefix+"_mul",x4,x5,tmp),c.call(f2mPrefix+"_mul",x5,c.i32_const(pNonResidueF6),t4),c.call(f2mPrefix+"_add",x4,t4,t4),c.call(f2mPrefix+"_add",x4,x5,AUX),c.call(f2mPrefix+"_mul",AUX,t4,t4),c.call(f2mPrefix+"_mul",c.i32_const(pNonResidueF6),tmp,AUX),c.call(f2mPrefix+"_add",tmp,AUX,AUX),c.call(f2mPrefix+"_sub",t4,AUX,t4),c.call(f2mPrefix+"_add",tmp,tmp,t5),c.call(f2mPrefix+"_sub",t0,x0,r0),c.call(f2mPrefix+"_add",r0,r0,r0),c.call(f2mPrefix+"_add",t0,r0,r0),c.call(f2mPrefix+"_add",t1,x1,r1),c.call(f2mPrefix+"_add",r1,r1,r1),c.call(f2mPrefix+"_add",t1,r1,r1),c.call(f2mPrefix+"_mul",t5,c.i32_const(pAltBn128Twist),AUX),c.call(f2mPrefix+"_add",AUX,x2,r2),c.call(f2mPrefix+"_add",r2,r2,r2),c.call(f2mPrefix+"_add",AUX,r2,r2),c.call(f2mPrefix+"_sub",t4,x3,r3),c.call(f2mPrefix+"_add",r3,r3,r3),c.call(f2mPrefix+"_add",t4,r3,r3),c.call(f2mPrefix+"_sub",t2,x4,r4),c.call(f2mPrefix+"_add",r4,r4,r4),c.call(f2mPrefix+"_add",t2,r4,r4),c.call(f2mPrefix+"_add",t3,x5,r5),c.call(f2mPrefix+"_add",r5,r5,r5),c.call(f2mPrefix+"_add",t3,r5,r5))}function buildCyclotomicExp(exponent,fnName){let exponentNafBytes=naf(exponent).map(b=>-1==b?255:b),pExponentNafBytes=module.alloc(exponentNafBytes),f=module.addFunction(prefix+"__cyclotomicExp_"+fnName);f.addParam("x","i32"),f.addParam("r","i32"),f.addLocal("bit","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),x=c.getLocal("x"),res=c.getLocal("r"),inverse=c.i32_const(module.alloc(ftsize));f.addCode(c.call(ftmPrefix+"_conjugate",x,inverse),c.call(ftmPrefix+"_one",res),c.if(c.teeLocal("bit",c.i32_load8_s(c.i32_const(exponentNafBytes.length-1),pExponentNafBytes)),c.if(c.i32_eq(c.getLocal("bit"),c.i32_const(1)),c.call(ftmPrefix+"_mul",res,x,res),c.call(ftmPrefix+"_mul",res,inverse,res))),c.setLocal("i",c.i32_const(exponentNafBytes.length-2)),c.block(c.loop(c.call(prefix+"__cyclotomicSquare",res,res),c.if(c.teeLocal("bit",c.i32_load8_s(c.getLocal("i"),pExponentNafBytes)),c.if(c.i32_eq(c.getLocal("bit"),c.i32_const(1)),c.call(ftmPrefix+"_mul",res,x,res),c.call(ftmPrefix+"_mul",res,inverse,res))),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildFinalExponentiationLastChunk(){buildCyclotomicSquare(),buildCyclotomicExp(finalExpZ,"w0");let f=module.addFunction(prefix+"__finalExponentiationLastChunk");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),elt=c.getLocal("x"),result=c.getLocal("r"),A=c.i32_const(module.alloc(ftsize)),B=c.i32_const(module.alloc(ftsize)),C=c.i32_const(module.alloc(ftsize)),D=c.i32_const(module.alloc(ftsize)),E=c.i32_const(module.alloc(ftsize)),F=c.i32_const(module.alloc(ftsize)),G=c.i32_const(module.alloc(ftsize)),H=c.i32_const(module.alloc(ftsize)),I=c.i32_const(module.alloc(ftsize)),J=c.i32_const(module.alloc(ftsize)),K=c.i32_const(module.alloc(ftsize)),L=c.i32_const(module.alloc(ftsize)),M=c.i32_const(module.alloc(ftsize)),N=c.i32_const(module.alloc(ftsize)),O=c.i32_const(module.alloc(ftsize)),P=c.i32_const(module.alloc(ftsize)),Q=c.i32_const(module.alloc(ftsize)),R=c.i32_const(module.alloc(ftsize)),S=c.i32_const(module.alloc(ftsize)),T=c.i32_const(module.alloc(ftsize)),U=c.i32_const(module.alloc(ftsize));f.addCode(c.call(prefix+"__cyclotomicExp_w0",elt,A),finalExpIsNegative?[]:c.call(ftmPrefix+"_conjugate",A,A),c.call(prefix+"__cyclotomicSquare",A,B),c.call(prefix+"__cyclotomicSquare",B,C),c.call(ftmPrefix+"_mul",C,B,D),c.call(prefix+"__cyclotomicExp_w0",D,E),finalExpIsNegative?[]:c.call(ftmPrefix+"_conjugate",E,E),c.call(prefix+"__cyclotomicSquare",E,F),c.call(prefix+"__cyclotomicExp_w0",F,G),finalExpIsNegative?[]:c.call(ftmPrefix+"_conjugate",G,G),c.call(ftmPrefix+"_conjugate",D,H),c.call(ftmPrefix+"_conjugate",G,I),c.call(ftmPrefix+"_mul",I,E,J),c.call(ftmPrefix+"_mul",J,H,K),c.call(ftmPrefix+"_mul",K,B,L),c.call(ftmPrefix+"_mul",K,E,M),c.call(ftmPrefix+"_mul",M,elt,N),c.call(prefix+"__frobeniusMap1",L,O),c.call(ftmPrefix+"_mul",O,N,P),c.call(prefix+"__frobeniusMap2",K,Q),c.call(ftmPrefix+"_mul",Q,P,R),c.call(ftmPrefix+"_conjugate",elt,S),c.call(ftmPrefix+"_mul",S,L,T),c.call(prefix+"__frobeniusMap3",T,U),c.call(ftmPrefix+"_mul",U,R,result))}function buildFinalExponentiation(){buildFinalExponentiationFirstChunk(),buildFinalExponentiationLastChunk();let f=module.addFunction(prefix+"_finalExponentiation");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),elt=c.getLocal("x"),result=c.getLocal("r"),eltToFirstChunk=c.i32_const(module.alloc(ftsize));f.addCode(c.call(prefix+"__finalExponentiationFirstChunk",elt,eltToFirstChunk),c.call(prefix+"__finalExponentiationLastChunk",eltToFirstChunk,result))}function buildFinalExponentiationOld(){let f=module.addFunction(prefix+"_finalExponentiationOld");f.addParam("x","i32"),f.addParam("r","i32");let exponent=0x2f4b6dc97020fddadf107d20bc842d43bf6369b1ff6a1c71015f3f7be2e1e30a73bb94fec0daf15466b2383a5d3ec3d15ad524d8f70c54efee1bd8c3b21377e563a09a1b705887e72eceaddea3790364a61f676baaf977870e88d5c6c8fef0781361e443ae77f5b63a2a2264487f2940a8b1ddb3d15062cd0fb2015dfc6668449aed3cc48a82d0d602d268c7daab6a41294c0cc4ebe5664568dfc50e1648a45a4a1e3a5195846a3ed011a337a02088ec80e0ebae8755cfe107acf3aafb40494e406f804216bb10cf430b0f37856b42db8dc5514724ee93dfb10826f0dd4a0364b9580291d2cd65664814fde37ca80bb4ea44eacc5e641bbadf423f9a2cbf813b8d145da90029baee7ddadda71c7f3811c4105262945bba1668c3be69a3c230974d83561841d766f9c9d570bb7fbe04c7e8a6c3c760c0de81def35692da361102b6b9b2b918837fa97896e84abb40a4efb7e54523a486964b64ca86f120n,pExponent=module.alloc(utils.bigInt2BytesLE(exponent,352)),c=f.getCodeBuilder();f.addCode(c.call(ftmPrefix+"_exp",c.getLocal("x"),c.i32_const(pExponent),c.i32_const(352),c.getLocal("r")))}let pPreP=module.alloc(prePSize),pPreQ=module.alloc(preQSize);function buildPairingEquation(nPairings){let f=module.addFunction(prefix+"_pairingEq"+nPairings);for(let i=0;i<nPairings;i++)f.addParam("p_"+i,"i32"),f.addParam("q_"+i,"i32");f.addParam("c","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),resT=c.i32_const(module.alloc(ftsize)),auxT=c.i32_const(module.alloc(ftsize));f.addCode(c.call(ftmPrefix+"_one",resT));for(let i1=0;i1<nPairings;i1++)f.addCode(c.call(prefix+"_prepareG1",c.getLocal("p_"+i1),c.i32_const(pPreP))),f.addCode(c.call(prefix+"_prepareG2",c.getLocal("q_"+i1),c.i32_const(pPreQ))),f.addCode(c.call(prefix+"_millerLoop",c.i32_const(pPreP),c.i32_const(pPreQ),auxT)),f.addCode(c.call(ftmPrefix+"_mul",resT,auxT,resT));f.addCode(c.call(prefix+"_finalExponentiation",resT,resT)),f.addCode(c.call(ftmPrefix+"_eq",resT,c.getLocal("c")))}function buildPairing(){let f=module.addFunction(prefix+"_pairing");f.addParam("p","i32"),f.addParam("q","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),resT=c.i32_const(module.alloc(ftsize));f.addCode(c.call(prefix+"_prepareG1",c.getLocal("p"),c.i32_const(pPreP))),f.addCode(c.call(prefix+"_prepareG2",c.getLocal("q"),c.i32_const(pPreQ))),f.addCode(c.call(prefix+"_millerLoop",c.i32_const(pPreP),c.i32_const(pPreQ),resT)),f.addCode(c.call(prefix+"_finalExponentiation",resT,c.getLocal("r")))}buildPrepAddStep(),buildPrepDoubleStep(),buildPrepareG1(),buildPrepareG2(),buildMulBy024(),buildMulBy024Old(),buildMillerLoop();for(let i=0;i<10;i++)buildFrobeniusMap(i),module.exportFunction(prefix+"__frobeniusMap"+i);buildFinalExponentiationOld(),buildFinalExponentiation();for(let i1=1;i1<=5;i1++)buildPairingEquation(i1),module.exportFunction(prefix+"_pairingEq"+i1);buildPairing(),module.exportFunction(prefix+"_pairing"),module.exportFunction(prefix+"_prepareG1"),module.exportFunction(prefix+"_prepareG2"),module.exportFunction(prefix+"_millerLoop"),module.exportFunction(prefix+"_finalExponentiation"),module.exportFunction(prefix+"_finalExponentiationOld"),module.exportFunction(prefix+"__mulBy024"),module.exportFunction(prefix+"__mulBy024Old"),module.exportFunction(prefix+"__cyclotomicSquare"),module.exportFunction(prefix+"__cyclotomicExp_w0")}},8236:function(module){module.exports=function(module,fnName,gPrefix,frPrefix,sizeGIn,sizeGOut,sizeF,opGtimesF){let f=module.addFunction(fnName);f.addParam("pIn","i32"),f.addParam("n","i32"),f.addParam("pFirst","i32"),f.addParam("pInc","i32"),f.addParam("pOut","i32"),f.addLocal("pOldFree","i32"),f.addLocal("i","i32"),f.addLocal("pFrom","i32"),f.addLocal("pTo","i32");let c=f.getCodeBuilder(),t=c.i32_const(module.alloc(sizeF));f.addCode(c.setLocal("pFrom",c.getLocal("pIn")),c.setLocal("pTo",c.getLocal("pOut"))),f.addCode(c.call(frPrefix+"_copy",c.getLocal("pFirst"),t)),f.addCode(c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(opGtimesF,c.getLocal("pFrom"),t,c.getLocal("pTo")),c.setLocal("pFrom",c.i32_add(c.getLocal("pFrom"),c.i32_const(sizeGIn))),c.setLocal("pTo",c.i32_add(c.getLocal("pTo"),c.i32_const(sizeGOut))),c.call(frPrefix+"_mul",t,c.getLocal("pInc"),t),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0)))),module.exportFunction(fnName)}},1705:function(module){module.exports=buildBatchConvertion;function buildBatchConvertion(module,fnName,internalFnName,sizeIn,sizeOut,reverse){void 0===reverse&&(reverse=sizeIn<sizeOut);let f=module.addFunction(fnName);f.addParam("pIn","i32"),f.addParam("n","i32"),f.addParam("pOut","i32"),f.addLocal("i","i32"),f.addLocal("itIn","i32"),f.addLocal("itOut","i32");let c=f.getCodeBuilder();reverse?f.addCode(c.setLocal("itIn",c.i32_add(c.getLocal("pIn"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(sizeIn)))),c.setLocal("itOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(sizeOut)))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(internalFnName,c.getLocal("itIn"),c.getLocal("itOut")),c.setLocal("itIn",c.i32_sub(c.getLocal("itIn"),c.i32_const(sizeIn))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.i32_const(sizeOut))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0)))):f.addCode(c.setLocal("itIn",c.getLocal("pIn")),c.setLocal("itOut",c.getLocal("pOut")),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(internalFnName,c.getLocal("itIn"),c.getLocal("itOut")),c.setLocal("itIn",c.i32_add(c.getLocal("itIn"),c.i32_const(sizeIn))),c.setLocal("itOut",c.i32_add(c.getLocal("itOut"),c.i32_const(sizeOut))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}},3554:function(module){module.exports=buildBatchInverse;function buildBatchInverse(module,prefix){let n8=8*module.modules[prefix].n64,f=module.addFunction(prefix+"_batchInverse");f.addParam("pIn","i32"),f.addParam("inStep","i32"),f.addParam("n","i32"),f.addParam("pOut","i32"),f.addParam("outStep","i32"),f.addLocal("itAux","i32"),f.addLocal("itIn","i32"),f.addLocal("itOut","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(n8));f.addCode(c.setLocal("itAux",c.i32_load(c.i32_const(0))),c.i32_store(c.i32_const(0),c.i32_add(c.getLocal("itAux"),c.i32_mul(c.i32_add(c.getLocal("n"),c.i32_const(1)),c.i32_const(n8))))),f.addCode(c.call(prefix+"_one",c.getLocal("itAux")),c.setLocal("itIn",c.getLocal("pIn")),c.setLocal("itAux",c.i32_add(c.getLocal("itAux"),c.i32_const(n8))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.if(c.call(prefix+"_isZero",c.getLocal("itIn")),c.call(prefix+"_copy",c.i32_sub(c.getLocal("itAux"),c.i32_const(n8)),c.getLocal("itAux")),c.call(prefix+"_mul",c.getLocal("itIn"),c.i32_sub(c.getLocal("itAux"),c.i32_const(n8)),c.getLocal("itAux"))),c.setLocal("itIn",c.i32_add(c.getLocal("itIn"),c.getLocal("inStep"))),c.setLocal("itAux",c.i32_add(c.getLocal("itAux"),c.i32_const(n8))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.setLocal("itIn",c.i32_sub(c.getLocal("itIn"),c.getLocal("inStep"))),c.setLocal("itAux",c.i32_sub(c.getLocal("itAux"),c.i32_const(n8))),c.setLocal("itOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.getLocal("outStep")))),c.call(prefix+"_inverse",c.getLocal("itAux"),c.getLocal("itAux")),c.block(c.loop(c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.if(c.call(prefix+"_isZero",c.getLocal("itIn")),[...c.call(prefix+"_copy",c.getLocal("itAux"),c.i32_sub(c.getLocal("itAux"),c.i32_const(n8))),...c.call(prefix+"_zero",c.getLocal("itOut"))],[...c.call(prefix+"_copy",c.i32_sub(c.getLocal("itAux"),c.i32_const(n8)),AUX),...c.call(prefix+"_mul",c.getLocal("itAux"),c.getLocal("itIn"),c.i32_sub(c.getLocal("itAux"),c.i32_const(n8))),...c.call(prefix+"_mul",c.getLocal("itAux"),AUX,c.getLocal("itOut"))]),c.setLocal("itIn",c.i32_sub(c.getLocal("itIn"),c.getLocal("inStep"))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.getLocal("outStep"))),c.setLocal("itAux",c.i32_sub(c.getLocal("itAux"),c.i32_const(n8))),c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.br(0)))),f.addCode(c.i32_store(c.i32_const(0),c.getLocal("itAux")))}},2584:function(module){module.exports=buildBatchConvertion;function buildBatchConvertion(module,fnName,internalFnName,sizeIn,sizeOut,reverse){void 0===reverse&&(reverse=sizeIn<sizeOut);let f=module.addFunction(fnName);f.addParam("pIn1","i32"),f.addParam("pIn2","i32"),f.addParam("n","i32"),f.addParam("pOut","i32"),f.addLocal("i","i32"),f.addLocal("itIn1","i32"),f.addLocal("itIn2","i32"),f.addLocal("itOut","i32");let c=f.getCodeBuilder();reverse?f.addCode(c.setLocal("itIn1",c.i32_add(c.getLocal("pIn1"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(sizeIn)))),c.setLocal("itIn2",c.i32_add(c.getLocal("pIn2"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(sizeIn)))),c.setLocal("itOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(sizeOut)))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(internalFnName,c.getLocal("itIn1"),c.getLocal("itIn2"),c.getLocal("itOut")),c.setLocal("itIn1",c.i32_sub(c.getLocal("itIn1"),c.i32_const(sizeIn))),c.setLocal("itIn2",c.i32_sub(c.getLocal("itIn2"),c.i32_const(sizeIn))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.i32_const(sizeOut))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0)))):f.addCode(c.setLocal("itIn1",c.getLocal("pIn1")),c.setLocal("itIn2",c.getLocal("pIn2")),c.setLocal("itOut",c.getLocal("pOut")),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(internalFnName,c.getLocal("itIn1"),c.getLocal("itIn2"),c.getLocal("itOut")),c.setLocal("itIn1",c.i32_add(c.getLocal("itIn1"),c.i32_const(sizeIn))),c.setLocal("itIn2",c.i32_add(c.getLocal("itIn2"),c.i32_const(sizeIn))),c.setLocal("itOut",c.i32_add(c.getLocal("itOut"),c.i32_const(sizeOut))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}},6319:function(module,__unused_webpack_exports,__webpack_require__){let buildTimesScalarNAF=__webpack_require__(6263),buildBatchConvertion=__webpack_require__(1705),buildMultiexp=__webpack_require__(6676);module.exports=function(module,prefix,prefixField,pB){let n64=module.modules[prefixField].n64,n8=8*n64;if(module.modules[prefix])return prefix;function buildIsZero(){let f=module.addFunction(prefix+"_isZero");f.addParam("p1","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();f.addCode(c.call(prefixField+"_isZero",c.i32_add(c.getLocal("p1"),c.i32_const(2*n8))))}function buildCopy(){let f=module.addFunction(prefix+"_copy");f.addParam("ps","i32"),f.addParam("pd","i32");let c=f.getCodeBuilder();for(let i=0;i<3*n64;i++)f.addCode(c.i64_store(c.getLocal("pd"),8*i,c.i64_load(c.getLocal("ps"),8*i)))}function buildCopyAffine(){let f=module.addFunction(prefix+"_copyAffine");f.addParam("ps","i32"),f.addParam("pd","i32");let c=f.getCodeBuilder();for(let i=0;i<2*n64;i++)f.addCode(c.i64_store(c.getLocal("pd"),8*i,c.i64_load(c.getLocal("ps"),8*i)))}function buildZero(){let f=module.addFunction(prefix+"_zero");f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefixField+"_zero",c.getLocal("pr"))),f.addCode(c.call(prefixField+"_one",c.i32_add(c.getLocal("pr"),c.i32_const(n8)))),f.addCode(c.call(prefixField+"_zero",c.i32_add(c.getLocal("pr"),c.i32_const(2*n8))))}function buildZeroAffine(){let f=module.addFunction(prefix+"_zeroAffine");f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefixField+"_zero",c.getLocal("pr"))),f.addCode(c.call(prefixField+"_zero",c.i32_add(c.getLocal("pr"),c.i32_const(n8))))}function buildEq(){let f=module.addFunction(prefix+"_eq");f.addParam("p1","i32"),f.addParam("p2","i32"),f.setReturnType("i32"),f.addLocal("z1","i32"),f.addLocal("z2","i32");let c=f.getCodeBuilder(),x1=c.getLocal("p1"),y1=c.i32_add(c.getLocal("p1"),c.i32_const(n8));f.addCode(c.setLocal("z1",c.i32_add(c.getLocal("p1"),c.i32_const(2*n8))));let z1=c.getLocal("z1"),x2=c.getLocal("p2"),y2=c.i32_add(c.getLocal("p2"),c.i32_const(n8));f.addCode(c.setLocal("z2",c.i32_add(c.getLocal("p2"),c.i32_const(2*n8))));let z2=c.getLocal("z2"),Z1Z1=c.i32_const(module.alloc(n8)),Z2Z2=c.i32_const(module.alloc(n8)),U1=c.i32_const(module.alloc(n8)),U2=c.i32_const(module.alloc(n8)),Z1_cubed=c.i32_const(module.alloc(n8)),Z2_cubed=c.i32_const(module.alloc(n8)),S1=c.i32_const(module.alloc(n8)),S2=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("p1")),c.ret(c.call(prefix+"_isZero",c.getLocal("p2")))),c.if(c.call(prefix+"_isZero",c.getLocal("p2")),c.ret(c.i32_const(0))),c.if(c.call(prefixField+"_isOne",z1),c.ret(c.call(prefix+"_eqMixed",c.getLocal("p2"),c.getLocal("p1")))),c.if(c.call(prefixField+"_isOne",z2),c.ret(c.call(prefix+"_eqMixed",c.getLocal("p1"),c.getLocal("p2")))),c.call(prefixField+"_square",z1,Z1Z1),c.call(prefixField+"_square",z2,Z2Z2),c.call(prefixField+"_mul",x1,Z2Z2,U1),c.call(prefixField+"_mul",x2,Z1Z1,U2),c.call(prefixField+"_mul",z1,Z1Z1,Z1_cubed),c.call(prefixField+"_mul",z2,Z2Z2,Z2_cubed),c.call(prefixField+"_mul",y1,Z2_cubed,S1),c.call(prefixField+"_mul",y2,Z1_cubed,S2),c.if(c.call(prefixField+"_eq",U1,U2),c.if(c.call(prefixField+"_eq",S1,S2),c.ret(c.i32_const(1)))),c.ret(c.i32_const(0)))}function buildEqMixed(){let f=module.addFunction(prefix+"_eqMixed");f.addParam("p1","i32"),f.addParam("p2","i32"),f.setReturnType("i32"),f.addLocal("z1","i32");let c=f.getCodeBuilder(),x1=c.getLocal("p1"),y1=c.i32_add(c.getLocal("p1"),c.i32_const(n8));f.addCode(c.setLocal("z1",c.i32_add(c.getLocal("p1"),c.i32_const(2*n8))));let z1=c.getLocal("z1"),x2=c.getLocal("p2"),y2=c.i32_add(c.getLocal("p2"),c.i32_const(n8)),Z1Z1=c.i32_const(module.alloc(n8)),U2=c.i32_const(module.alloc(n8)),Z1_cubed=c.i32_const(module.alloc(n8)),S2=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("p1")),c.ret(c.call(prefix+"_isZeroAffine",c.getLocal("p2")))),c.if(c.call(prefix+"_isZeroAffine",c.getLocal("p2")),c.ret(c.i32_const(0))),c.if(c.call(prefixField+"_isOne",z1),c.ret(c.call(prefix+"_eqAffine",c.getLocal("p1"),c.getLocal("p2")))),c.call(prefixField+"_square",z1,Z1Z1),c.call(prefixField+"_mul",x2,Z1Z1,U2),c.call(prefixField+"_mul",z1,Z1Z1,Z1_cubed),c.call(prefixField+"_mul",y2,Z1_cubed,S2),c.if(c.call(prefixField+"_eq",x1,U2),c.if(c.call(prefixField+"_eq",y1,S2),c.ret(c.i32_const(1)))),c.ret(c.i32_const(0)))}function buildDouble(){let f=module.addFunction(prefix+"_double");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(n8)),z=c.i32_add(c.getLocal("p1"),c.i32_const(2*n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8)),A=c.i32_const(module.alloc(n8)),B=c.i32_const(module.alloc(n8)),C=c.i32_const(module.alloc(n8)),D=c.i32_const(module.alloc(n8)),E=c.i32_const(module.alloc(n8)),F=c.i32_const(module.alloc(n8)),G=c.i32_const(module.alloc(n8)),eightC=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("p1")),[...c.call(prefix+"_copy",c.getLocal("p1"),c.getLocal("pr")),...c.ret([])]),c.if(c.call(prefixField+"_isOne",z),[...c.ret(c.call(prefix+"_doubleAffine",c.getLocal("p1"),c.getLocal("pr"))),...c.ret([])]),c.call(prefixField+"_square",x,A),c.call(prefixField+"_square",y,B),c.call(prefixField+"_square",B,C),c.call(prefixField+"_add",x,B,D),c.call(prefixField+"_square",D,D),c.call(prefixField+"_sub",D,A,D),c.call(prefixField+"_sub",D,C,D),c.call(prefixField+"_add",D,D,D),c.call(prefixField+"_add",A,A,E),c.call(prefixField+"_add",E,A,E),c.call(prefixField+"_square",E,F),c.call(prefixField+"_mul",y,z,G),c.call(prefixField+"_add",D,D,x3),c.call(prefixField+"_sub",F,x3,x3),c.call(prefixField+"_add",C,C,eightC),c.call(prefixField+"_add",eightC,eightC,eightC),c.call(prefixField+"_add",eightC,eightC,eightC),c.call(prefixField+"_sub",D,x3,y3),c.call(prefixField+"_mul",y3,E,y3),c.call(prefixField+"_sub",y3,eightC,y3),c.call(prefixField+"_add",G,G,z3))}function buildDoubleAffine(){let f=module.addFunction(prefix+"_doubleAffine");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8)),XX=c.i32_const(module.alloc(n8)),YY=c.i32_const(module.alloc(n8)),YYYY=c.i32_const(module.alloc(n8)),S=c.i32_const(module.alloc(n8)),M=c.i32_const(module.alloc(n8)),eightYYYY=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZeroAffine",c.getLocal("p1")),[...c.call(prefix+"_toJacobian",c.getLocal("p1"),c.getLocal("pr")),...c.ret([])]),c.call(prefixField+"_square",x,XX),c.call(prefixField+"_square",y,YY),c.call(prefixField+"_square",YY,YYYY),c.call(prefixField+"_add",x,YY,S),c.call(prefixField+"_square",S,S),c.call(prefixField+"_sub",S,XX,S),c.call(prefixField+"_sub",S,YYYY,S),c.call(prefixField+"_add",S,S,S),c.call(prefixField+"_add",XX,XX,M),c.call(prefixField+"_add",M,XX,M),c.call(prefixField+"_add",y,y,z3),c.call(prefixField+"_square",M,x3),c.call(prefixField+"_sub",x3,S,x3),c.call(prefixField+"_sub",x3,S,x3),c.call(prefixField+"_add",YYYY,YYYY,eightYYYY),c.call(prefixField+"_add",eightYYYY,eightYYYY,eightYYYY),c.call(prefixField+"_add",eightYYYY,eightYYYY,eightYYYY),c.call(prefixField+"_sub",S,x3,y3),c.call(prefixField+"_mul",y3,M,y3),c.call(prefixField+"_sub",y3,eightYYYY,y3))}function buildEqAffine(){let f=module.addFunction(prefix+"_eqAffine");f.addParam("p1","i32"),f.addParam("p2","i32"),f.setReturnType("i32"),f.addLocal("z1","i32");let c=f.getCodeBuilder();f.addCode(c.ret(c.i32_and(c.call(prefixField+"_eq",c.getLocal("p1"),c.getLocal("p2")),c.call(prefixField+"_eq",c.i32_add(c.getLocal("p1"),c.i32_const(n8)),c.i32_add(c.getLocal("p2"),c.i32_const(n8))))))}function buildToMontgomery(){let f=module.addFunction(prefix+"_toMontgomery");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefixField+"_toMontgomery",c.getLocal("p1"),c.getLocal("pr")));for(let i=1;i<3;i++)f.addCode(c.call(prefixField+"_toMontgomery",c.i32_add(c.getLocal("p1"),c.i32_const(i*n8)),c.i32_add(c.getLocal("pr"),c.i32_const(i*n8))))}function buildToMontgomeryAffine(){let f=module.addFunction(prefix+"_toMontgomeryAffine");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefixField+"_toMontgomery",c.getLocal("p1"),c.getLocal("pr")));for(let i=1;i<2;i++)f.addCode(c.call(prefixField+"_toMontgomery",c.i32_add(c.getLocal("p1"),c.i32_const(i*n8)),c.i32_add(c.getLocal("pr"),c.i32_const(i*n8))))}function buildFromMontgomery(){let f=module.addFunction(prefix+"_fromMontgomery");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefixField+"_fromMontgomery",c.getLocal("p1"),c.getLocal("pr")));for(let i=1;i<3;i++)f.addCode(c.call(prefixField+"_fromMontgomery",c.i32_add(c.getLocal("p1"),c.i32_const(i*n8)),c.i32_add(c.getLocal("pr"),c.i32_const(i*n8))))}function buildFromMontgomeryAffine(){let f=module.addFunction(prefix+"_fromMontgomeryAffine");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefixField+"_fromMontgomery",c.getLocal("p1"),c.getLocal("pr")));for(let i=1;i<2;i++)f.addCode(c.call(prefixField+"_fromMontgomery",c.i32_add(c.getLocal("p1"),c.i32_const(i*n8)),c.i32_add(c.getLocal("pr"),c.i32_const(i*n8))))}function buildAdd(){let f=module.addFunction(prefix+"_add");f.addParam("p1","i32"),f.addParam("p2","i32"),f.addParam("pr","i32"),f.addLocal("z1","i32"),f.addLocal("z2","i32");let c=f.getCodeBuilder(),x1=c.getLocal("p1"),y1=c.i32_add(c.getLocal("p1"),c.i32_const(n8));f.addCode(c.setLocal("z1",c.i32_add(c.getLocal("p1"),c.i32_const(2*n8))));let z1=c.getLocal("z1"),x2=c.getLocal("p2"),y2=c.i32_add(c.getLocal("p2"),c.i32_const(n8));f.addCode(c.setLocal("z2",c.i32_add(c.getLocal("p2"),c.i32_const(2*n8))));let z2=c.getLocal("z2"),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8)),Z1Z1=c.i32_const(module.alloc(n8)),Z2Z2=c.i32_const(module.alloc(n8)),U1=c.i32_const(module.alloc(n8)),U2=c.i32_const(module.alloc(n8)),Z1_cubed=c.i32_const(module.alloc(n8)),Z2_cubed=c.i32_const(module.alloc(n8)),S1=c.i32_const(module.alloc(n8)),S2=c.i32_const(module.alloc(n8)),H=c.i32_const(module.alloc(n8)),S2_minus_S1=c.i32_const(module.alloc(n8)),I=c.i32_const(module.alloc(n8)),J=c.i32_const(module.alloc(n8)),r=c.i32_const(module.alloc(n8)),r2=c.i32_const(module.alloc(n8)),V=c.i32_const(module.alloc(n8)),V2=c.i32_const(module.alloc(n8)),S1_J2=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("p1")),[...c.call(prefix+"_copy",c.getLocal("p2"),c.getLocal("pr")),...c.ret([])]),c.if(c.call(prefix+"_isZero",c.getLocal("p2")),[...c.call(prefix+"_copy",c.getLocal("p1"),c.getLocal("pr")),...c.ret([])]),c.if(c.call(prefixField+"_isOne",z1),[...c.call(prefix+"_addMixed",x2,x1,x3),...c.ret([])]),c.if(c.call(prefixField+"_isOne",z2),[...c.call(prefix+"_addMixed",x1,x2,x3),...c.ret([])]),c.call(prefixField+"_square",z1,Z1Z1),c.call(prefixField+"_square",z2,Z2Z2),c.call(prefixField+"_mul",x1,Z2Z2,U1),c.call(prefixField+"_mul",x2,Z1Z1,U2),c.call(prefixField+"_mul",z1,Z1Z1,Z1_cubed),c.call(prefixField+"_mul",z2,Z2Z2,Z2_cubed),c.call(prefixField+"_mul",y1,Z2_cubed,S1),c.call(prefixField+"_mul",y2,Z1_cubed,S2),c.if(c.call(prefixField+"_eq",U1,U2),c.if(c.call(prefixField+"_eq",S1,S2),[...c.call(prefix+"_double",c.getLocal("p1"),c.getLocal("pr")),...c.ret([])])),c.call(prefixField+"_sub",U2,U1,H),c.call(prefixField+"_sub",S2,S1,S2_minus_S1),c.call(prefixField+"_add",H,H,I),c.call(prefixField+"_square",I,I),c.call(prefixField+"_mul",H,I,J),c.call(prefixField+"_add",S2_minus_S1,S2_minus_S1,r),c.call(prefixField+"_mul",U1,I,V),c.call(prefixField+"_square",r,r2),c.call(prefixField+"_add",V,V,V2),c.call(prefixField+"_sub",r2,J,x3),c.call(prefixField+"_sub",x3,V2,x3),c.call(prefixField+"_mul",S1,J,S1_J2),c.call(prefixField+"_add",S1_J2,S1_J2,S1_J2),c.call(prefixField+"_sub",V,x3,y3),c.call(prefixField+"_mul",y3,r,y3),c.call(prefixField+"_sub",y3,S1_J2,y3),c.call(prefixField+"_add",z1,z2,z3),c.call(prefixField+"_square",z3,z3),c.call(prefixField+"_sub",z3,Z1Z1,z3),c.call(prefixField+"_sub",z3,Z2Z2,z3),c.call(prefixField+"_mul",z3,H,z3))}function buildAddMixed(){let f=module.addFunction(prefix+"_addMixed");f.addParam("p1","i32"),f.addParam("p2","i32"),f.addParam("pr","i32"),f.addLocal("z1","i32");let c=f.getCodeBuilder(),x1=c.getLocal("p1"),y1=c.i32_add(c.getLocal("p1"),c.i32_const(n8));f.addCode(c.setLocal("z1",c.i32_add(c.getLocal("p1"),c.i32_const(2*n8))));let z1=c.getLocal("z1"),x2=c.getLocal("p2"),y2=c.i32_add(c.getLocal("p2"),c.i32_const(n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8)),Z1Z1=c.i32_const(module.alloc(n8)),U2=c.i32_const(module.alloc(n8)),Z1_cubed=c.i32_const(module.alloc(n8)),S2=c.i32_const(module.alloc(n8)),H=c.i32_const(module.alloc(n8)),HH=c.i32_const(module.alloc(n8)),S2_minus_y1=c.i32_const(module.alloc(n8)),I=c.i32_const(module.alloc(n8)),J=c.i32_const(module.alloc(n8)),r=c.i32_const(module.alloc(n8)),r2=c.i32_const(module.alloc(n8)),V=c.i32_const(module.alloc(n8)),V2=c.i32_const(module.alloc(n8)),y1_J2=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("p1")),[...c.call(prefix+"_copyAffine",c.getLocal("p2"),c.getLocal("pr")),...c.call(prefixField+"_one",c.i32_add(c.getLocal("pr"),c.i32_const(2*n8))),...c.ret([])]),c.if(c.call(prefix+"_isZeroAffine",c.getLocal("p2")),[...c.call(prefix+"_copy",c.getLocal("p1"),c.getLocal("pr")),...c.ret([])]),c.if(c.call(prefixField+"_isOne",z1),[...c.call(prefix+"_addAffine",x1,x2,x3),...c.ret([])]),c.call(prefixField+"_square",z1,Z1Z1),c.call(prefixField+"_mul",x2,Z1Z1,U2),c.call(prefixField+"_mul",z1,Z1Z1,Z1_cubed),c.call(prefixField+"_mul",y2,Z1_cubed,S2),c.if(c.call(prefixField+"_eq",x1,U2),c.if(c.call(prefixField+"_eq",y1,S2),[...c.call(prefix+"_doubleAffine",c.getLocal("p2"),c.getLocal("pr")),...c.ret([])])),c.call(prefixField+"_sub",U2,x1,H),c.call(prefixField+"_sub",S2,y1,S2_minus_y1),c.call(prefixField+"_square",H,HH),c.call(prefixField+"_add",HH,HH,I),c.call(prefixField+"_add",I,I,I),c.call(prefixField+"_mul",H,I,J),c.call(prefixField+"_add",S2_minus_y1,S2_minus_y1,r),c.call(prefixField+"_mul",x1,I,V),c.call(prefixField+"_square",r,r2),c.call(prefixField+"_add",V,V,V2),c.call(prefixField+"_sub",r2,J,x3),c.call(prefixField+"_sub",x3,V2,x3),c.call(prefixField+"_mul",y1,J,y1_J2),c.call(prefixField+"_add",y1_J2,y1_J2,y1_J2),c.call(prefixField+"_sub",V,x3,y3),c.call(prefixField+"_mul",y3,r,y3),c.call(prefixField+"_sub",y3,y1_J2,y3),c.call(prefixField+"_add",z1,H,z3),c.call(prefixField+"_square",z3,z3),c.call(prefixField+"_sub",z3,Z1Z1,z3),c.call(prefixField+"_sub",z3,HH,z3))}function buildAddAffine(){let f=module.addFunction(prefix+"_addAffine");f.addParam("p1","i32"),f.addParam("p2","i32"),f.addParam("pr","i32"),f.addLocal("z1","i32");let c=f.getCodeBuilder(),x1=c.getLocal("p1"),y1=c.i32_add(c.getLocal("p1"),c.i32_const(n8));f.addCode(c.setLocal("z1",c.i32_add(c.getLocal("p1"),c.i32_const(2*n8))));let x2=c.getLocal("p2"),y2=c.i32_add(c.getLocal("p2"),c.i32_const(n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8)),H=c.i32_const(module.alloc(n8)),HH=c.i32_const(module.alloc(n8)),y2_minus_y1=c.i32_const(module.alloc(n8)),I=c.i32_const(module.alloc(n8)),J=c.i32_const(module.alloc(n8)),r=c.i32_const(module.alloc(n8)),r2=c.i32_const(module.alloc(n8)),V=c.i32_const(module.alloc(n8)),V2=c.i32_const(module.alloc(n8)),y1_J2=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZeroAffine",c.getLocal("p1")),[...c.call(prefix+"_copyAffine",c.getLocal("p2"),c.getLocal("pr")),...c.call(prefixField+"_one",c.i32_add(c.getLocal("pr"),c.i32_const(2*n8))),...c.ret([])]),c.if(c.call(prefix+"_isZeroAffine",c.getLocal("p2")),[...c.call(prefix+"_copyAffine",c.getLocal("p1"),c.getLocal("pr")),...c.call(prefixField+"_one",c.i32_add(c.getLocal("pr"),c.i32_const(2*n8))),...c.ret([])]),c.if(c.call(prefixField+"_eq",x1,x2),c.if(c.call(prefixField+"_eq",y1,y2),[...c.call(prefix+"_doubleAffine",c.getLocal("p2"),c.getLocal("pr")),...c.ret([])])),c.call(prefixField+"_sub",x2,x1,H),c.call(prefixField+"_sub",y2,y1,y2_minus_y1),c.call(prefixField+"_square",H,HH),c.call(prefixField+"_add",HH,HH,I),c.call(prefixField+"_add",I,I,I),c.call(prefixField+"_mul",H,I,J),c.call(prefixField+"_add",y2_minus_y1,y2_minus_y1,r),c.call(prefixField+"_mul",x1,I,V),c.call(prefixField+"_square",r,r2),c.call(prefixField+"_add",V,V,V2),c.call(prefixField+"_sub",r2,J,x3),c.call(prefixField+"_sub",x3,V2,x3),c.call(prefixField+"_mul",y1,J,y1_J2),c.call(prefixField+"_add",y1_J2,y1_J2,y1_J2),c.call(prefixField+"_sub",V,x3,y3),c.call(prefixField+"_mul",y3,r,y3),c.call(prefixField+"_sub",y3,y1_J2,y3),c.call(prefixField+"_add",H,H,z3))}function buildNeg(){let f=module.addFunction(prefix+"_neg");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(n8)),z=c.i32_add(c.getLocal("p1"),c.i32_const(2*n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8));f.addCode(c.call(prefixField+"_copy",x,x3),c.call(prefixField+"_neg",y,y3),c.call(prefixField+"_copy",z,z3))}function buildNegAffine(){let f=module.addFunction(prefix+"_negAffine");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8));f.addCode(c.call(prefixField+"_copy",x,x3),c.call(prefixField+"_neg",y,y3))}function buildSub(){let f=module.addFunction(prefix+"_sub");f.addParam("p1","i32"),f.addParam("p2","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(3*n8));f.addCode(c.call(prefix+"_neg",c.getLocal("p2"),AUX),c.call(prefix+"_add",c.getLocal("p1"),AUX,c.getLocal("pr")))}function buildSubMixed(){let f=module.addFunction(prefix+"_subMixed");f.addParam("p1","i32"),f.addParam("p2","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(3*n8));f.addCode(c.call(prefix+"_negAffine",c.getLocal("p2"),AUX),c.call(prefix+"_addMixed",c.getLocal("p1"),AUX,c.getLocal("pr")))}function buildSubAffine(){let f=module.addFunction(prefix+"_subAffine");f.addParam("p1","i32"),f.addParam("p2","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(3*n8));f.addCode(c.call(prefix+"_negAffine",c.getLocal("p2"),AUX),c.call(prefix+"_addAffine",c.getLocal("p1"),AUX,c.getLocal("pr")))}function buildNormalize(){let f=module.addFunction(prefix+"_normalize");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(n8)),z=c.i32_add(c.getLocal("p1"),c.i32_const(2*n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8)),Z_inv=c.i32_const(module.alloc(n8)),Z2_inv=c.i32_const(module.alloc(n8)),Z3_inv=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("p1")),c.call(prefix+"_zero",c.getLocal("pr")),[...c.call(prefixField+"_inverse",z,Z_inv),...c.call(prefixField+"_square",Z_inv,Z2_inv),...c.call(prefixField+"_mul",Z_inv,Z2_inv,Z3_inv),...c.call(prefixField+"_mul",x,Z2_inv,x3),...c.call(prefixField+"_mul",y,Z3_inv,y3),...c.call(prefixField+"_one",z3)]))}function buildToAffine(){let f=module.addFunction(prefix+"_toAffine");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(n8)),z=c.i32_add(c.getLocal("p1"),c.i32_const(2*n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),Z_inv=c.i32_const(module.alloc(n8)),Z2_inv=c.i32_const(module.alloc(n8)),Z3_inv=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("p1")),[...c.call(prefixField+"_zero",x3),...c.call(prefixField+"_zero",y3)],[...c.call(prefixField+"_inverse",z,Z_inv),...c.call(prefixField+"_square",Z_inv,Z2_inv),...c.call(prefixField+"_mul",Z_inv,Z2_inv,Z3_inv),...c.call(prefixField+"_mul",x,Z2_inv,x3),...c.call(prefixField+"_mul",y,Z3_inv,y3)]))}function buildToJacobian(){let f=module.addFunction(prefix+"_toJacobian");f.addParam("p1","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),x=c.getLocal("p1"),y=c.i32_add(c.getLocal("p1"),c.i32_const(n8)),x3=c.getLocal("pr"),y3=c.i32_add(c.getLocal("pr"),c.i32_const(n8)),z3=c.i32_add(c.getLocal("pr"),c.i32_const(2*n8));f.addCode(c.if(c.call(prefix+"_isZeroAffine",c.getLocal("p1")),c.call(prefix+"_zero",c.getLocal("pr")),[...c.call(prefixField+"_one",z3),...c.call(prefixField+"_copy",y,y3),...c.call(prefixField+"_copy",x,x3)]))}function buildBatchToAffine(){let f=module.addFunction(prefix+"_batchToAffine");f.addParam("pIn","i32"),f.addParam("n","i32"),f.addParam("pOut","i32"),f.addLocal("pAux","i32"),f.addLocal("itIn","i32"),f.addLocal("itAux","i32"),f.addLocal("itOut","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),tmp=c.i32_const(module.alloc(n8));f.addCode(c.setLocal("pAux",c.i32_load(c.i32_const(0))),c.i32_store(c.i32_const(0),c.i32_add(c.getLocal("pAux"),c.i32_mul(c.getLocal("n"),c.i32_const(n8)))),c.call(prefixField+"_batchInverse",c.i32_add(c.getLocal("pIn"),c.i32_const(2*n8)),c.i32_const(3*n8),c.getLocal("n"),c.getLocal("pAux"),c.i32_const(n8)),c.setLocal("itIn",c.getLocal("pIn")),c.setLocal("itAux",c.getLocal("pAux")),c.setLocal("itOut",c.getLocal("pOut")),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.if(c.call(prefixField+"_isZero",c.getLocal("itAux")),[...c.call(prefixField+"_zero",c.getLocal("itOut")),...c.call(prefixField+"_zero",c.i32_add(c.getLocal("itOut"),c.i32_const(n8)))],[...c.call(prefixField+"_mul",c.getLocal("itAux"),c.i32_add(c.getLocal("itIn"),c.i32_const(n8)),tmp),...c.call(prefixField+"_square",c.getLocal("itAux"),c.getLocal("itAux")),...c.call(prefixField+"_mul",c.getLocal("itAux"),c.getLocal("itIn"),c.getLocal("itOut")),...c.call(prefixField+"_mul",c.getLocal("itAux"),tmp,c.i32_add(c.getLocal("itOut"),c.i32_const(n8)))]),c.setLocal("itIn",c.i32_add(c.getLocal("itIn"),c.i32_const(3*n8))),c.setLocal("itOut",c.i32_add(c.getLocal("itOut"),c.i32_const(2*n8))),c.setLocal("itAux",c.i32_add(c.getLocal("itAux"),c.i32_const(n8))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.i32_store(c.i32_const(0),c.getLocal("pAux")))}function buildReverseBytes(){let f=module.addFunction(prefix+"__reverseBytes");f.addParam("pIn","i32"),f.addParam("n","i32"),f.addParam("pOut","i32"),f.addLocal("itOut","i32"),f.addLocal("itIn","i32");let c=f.getCodeBuilder();f.addCode(c.setLocal("itOut",c.i32_sub(c.i32_add(c.getLocal("pOut"),c.getLocal("n")),c.i32_const(1))),c.setLocal("itIn",c.getLocal("pIn")),c.block(c.loop(c.br_if(1,c.i32_lt_s(c.getLocal("itOut"),c.getLocal("pOut"))),c.i32_store8(c.getLocal("itOut"),c.i32_load8_u(c.getLocal("itIn"))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.i32_const(1))),c.setLocal("itIn",c.i32_add(c.getLocal("itIn"),c.i32_const(1))),c.br(0))))}function buildLEMtoC(){let f=module.addFunction(prefix+"_LEMtoC");f.addParam("pIn","i32"),f.addParam("pOut","i32");let c=f.getCodeBuilder(),tmp=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZeroAffine",c.getLocal("pIn")),[...c.call(prefixField+"_zero",c.getLocal("pOut")),...c.i32_store8(c.getLocal("pOut"),c.i32_const(64)),...c.ret([])]),c.call(prefixField+"_fromMontgomery",c.getLocal("pIn"),tmp),c.call(prefix+"__reverseBytes",tmp,c.i32_const(n8),c.getLocal("pOut")),c.if(c.i32_eq(c.call(prefixField+"_sign",c.i32_add(c.getLocal("pIn"),c.i32_const(n8))),c.i32_const(-1)),c.i32_store8(c.getLocal("pOut"),c.i32_or(c.i32_load8_u(c.getLocal("pOut")),c.i32_const(128)))))}function buildLEMtoU(){let f=module.addFunction(prefix+"_LEMtoU");f.addParam("pIn","i32"),f.addParam("pOut","i32");let c=f.getCodeBuilder(),pTmp=module.alloc(2*n8),tmp=c.i32_const(pTmp),tmpX=c.i32_const(pTmp),tmpY=c.i32_const(pTmp+n8);f.addCode(c.if(c.call(prefix+"_isZeroAffine",c.getLocal("pIn")),[...c.call(prefix+"_zeroAffine",c.getLocal("pOut")),...c.ret([])]),c.call(prefix+"_fromMontgomeryAffine",c.getLocal("pIn"),tmp),c.call(prefix+"__reverseBytes",tmpX,c.i32_const(n8),c.getLocal("pOut")),c.call(prefix+"__reverseBytes",tmpY,c.i32_const(n8),c.i32_add(c.getLocal("pOut"),c.i32_const(n8))))}function buildUtoLEM(){let f=module.addFunction(prefix+"_UtoLEM");f.addParam("pIn","i32"),f.addParam("pOut","i32");let c=f.getCodeBuilder(),pTmp=module.alloc(2*n8),tmp=c.i32_const(pTmp),tmpX=c.i32_const(pTmp),tmpY=c.i32_const(pTmp+n8);f.addCode(c.if(c.i32_and(c.i32_load8_u(c.getLocal("pIn")),c.i32_const(64)),[...c.call(prefix+"_zeroAffine",c.getLocal("pOut")),...c.ret([])]),c.call(prefix+"__reverseBytes",c.getLocal("pIn"),c.i32_const(n8),tmpX),c.call(prefix+"__reverseBytes",c.i32_add(c.getLocal("pIn"),c.i32_const(n8)),c.i32_const(n8),tmpY),c.call(prefix+"_toMontgomeryAffine",tmp,c.getLocal("pOut")))}function buildCtoLEM(){let f=module.addFunction(prefix+"_CtoLEM");f.addParam("pIn","i32"),f.addParam("pOut","i32"),f.addLocal("firstByte","i32"),f.addLocal("greatest","i32");let c=f.getCodeBuilder(),pTmp=module.alloc(2*n8),tmpX=c.i32_const(pTmp),tmpY=c.i32_const(pTmp+n8);f.addCode(c.setLocal("firstByte",c.i32_load8_u(c.getLocal("pIn"))),c.if(c.i32_and(c.getLocal("firstByte"),c.i32_const(64)),[...c.call(prefix+"_zeroAffine",c.getLocal("pOut")),...c.ret([])]),c.setLocal("greatest",c.i32_and(c.getLocal("firstByte"),c.i32_const(128))),c.call(prefixField+"_copy",c.getLocal("pIn"),tmpY),c.i32_store8(tmpY,c.i32_and(c.getLocal("firstByte"),c.i32_const(63))),c.call(prefix+"__reverseBytes",tmpY,c.i32_const(n8),tmpX),c.call(prefixField+"_toMontgomery",tmpX,c.getLocal("pOut")),c.call(prefixField+"_square",c.getLocal("pOut"),tmpY),c.call(prefixField+"_mul",c.getLocal("pOut"),tmpY,tmpY),c.call(prefixField+"_add",tmpY,c.i32_const(pB),tmpY),c.call(prefixField+"_sqrt",tmpY,tmpY),c.call(prefixField+"_neg",tmpY,tmpX),c.if(c.i32_eq(c.call(prefixField+"_sign",tmpY),c.i32_const(-1)),c.if(c.getLocal("greatest"),c.call(prefixField+"_copy",tmpY,c.i32_add(c.getLocal("pOut"),c.i32_const(n8))),c.call(prefixField+"_neg",tmpY,c.i32_add(c.getLocal("pOut"),c.i32_const(n8)))),c.if(c.getLocal("greatest"),c.call(prefixField+"_neg",tmpY,c.i32_add(c.getLocal("pOut"),c.i32_const(n8))),c.call(prefixField+"_copy",tmpY,c.i32_add(c.getLocal("pOut"),c.i32_const(n8))))))}function buildInCurveAffine(){let f=module.addFunction(prefix+"_inCurveAffine");f.addParam("pIn","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x=c.getLocal("pIn"),y=c.i32_add(c.getLocal("pIn"),c.i32_const(n8)),y2=c.i32_const(module.alloc(n8)),x3b=c.i32_const(module.alloc(n8));f.addCode(c.call(prefixField+"_square",y,y2),c.call(prefixField+"_square",x,x3b),c.call(prefixField+"_mul",x,x3b,x3b),c.call(prefixField+"_add",x3b,c.i32_const(pB),x3b),c.ret(c.call(prefixField+"_eq",y2,x3b)))}function buildInCurve(){let f=module.addFunction(prefix+"_inCurve");f.addParam("pIn","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),aux=c.i32_const(module.alloc(2*n8));f.addCode(c.call(prefix+"_toAffine",c.getLocal("pIn"),aux),c.ret(c.call(prefix+"_inCurveAffine",aux)))}return module.modules[prefix]={n64:3*n64},function(){let f=module.addFunction(prefix+"_isZeroAffine");f.addParam("p1","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();f.addCode(c.i32_and(c.call(prefixField+"_isZero",c.getLocal("p1")),c.call(prefixField+"_isZero",c.i32_add(c.getLocal("p1"),c.i32_const(n8)))))}(),buildIsZero(),buildZeroAffine(),buildZero(),buildCopyAffine(),buildCopy(),buildToJacobian(),buildEqAffine(),buildEqMixed(),buildEq(),buildDoubleAffine(),buildDouble(),buildAddAffine(),buildAddMixed(),buildAdd(),buildNegAffine(),buildNeg(),buildSubAffine(),buildSubMixed(),buildSub(),buildFromMontgomeryAffine(),buildFromMontgomery(),buildToMontgomeryAffine(),buildToMontgomery(),buildToAffine(),buildInCurveAffine(),buildInCurve(),buildBatchToAffine(),buildNormalize(),buildReverseBytes(),buildLEMtoU(),buildLEMtoC(),buildUtoLEM(),buildCtoLEM(),buildBatchConvertion(module,prefix+"_batchLEMtoU",prefix+"_LEMtoU",2*n8,2*n8),buildBatchConvertion(module,prefix+"_batchLEMtoC",prefix+"_LEMtoC",2*n8,n8),buildBatchConvertion(module,prefix+"_batchUtoLEM",prefix+"_UtoLEM",2*n8,2*n8),buildBatchConvertion(module,prefix+"_batchCtoLEM",prefix+"_CtoLEM",n8,2*n8,!0),buildBatchConvertion(module,prefix+"_batchToJacobian",prefix+"_toJacobian",2*n8,3*n8,!0),buildMultiexp(module,prefix,prefix+"_multiexp",prefix+"_add",3*n8),buildMultiexp(module,prefix,prefix+"_multiexpAffine",prefix+"_addMixed",2*n8),buildTimesScalarNAF(module,prefix+"_timesScalar",3*n8,prefix+"_add",prefix+"_double",prefix+"_sub",prefix+"_copy",prefix+"_zero"),buildTimesScalarNAF(module,prefix+"_timesScalarAffine",2*n8,prefix+"_addMixed",prefix+"_double",prefix+"_subMixed",prefix+"_copyAffine",prefix+"_zero"),module.exportFunction(prefix+"_isZero"),module.exportFunction(prefix+"_isZeroAffine"),module.exportFunction(prefix+"_eq"),module.exportFunction(prefix+"_eqMixed"),module.exportFunction(prefix+"_eqAffine"),module.exportFunction(prefix+"_copy"),module.exportFunction(prefix+"_copyAffine"),module.exportFunction(prefix+"_zero"),module.exportFunction(prefix+"_zeroAffine"),module.exportFunction(prefix+"_double"),module.exportFunction(prefix+"_doubleAffine"),module.exportFunction(prefix+"_add"),module.exportFunction(prefix+"_addMixed"),module.exportFunction(prefix+"_addAffine"),module.exportFunction(prefix+"_neg"),module.exportFunction(prefix+"_negAffine"),module.exportFunction(prefix+"_sub"),module.exportFunction(prefix+"_subMixed"),module.exportFunction(prefix+"_subAffine"),module.exportFunction(prefix+"_fromMontgomery"),module.exportFunction(prefix+"_fromMontgomeryAffine"),module.exportFunction(prefix+"_toMontgomery"),module.exportFunction(prefix+"_toMontgomeryAffine"),module.exportFunction(prefix+"_timesScalar"),module.exportFunction(prefix+"_timesScalarAffine"),module.exportFunction(prefix+"_normalize"),module.exportFunction(prefix+"_LEMtoU"),module.exportFunction(prefix+"_LEMtoC"),module.exportFunction(prefix+"_UtoLEM"),module.exportFunction(prefix+"_CtoLEM"),module.exportFunction(prefix+"_batchLEMtoU"),module.exportFunction(prefix+"_batchLEMtoC"),module.exportFunction(prefix+"_batchUtoLEM"),module.exportFunction(prefix+"_batchCtoLEM"),module.exportFunction(prefix+"_toAffine"),module.exportFunction(prefix+"_toJacobian"),module.exportFunction(prefix+"_batchToAffine"),module.exportFunction(prefix+"_batchToJacobian"),module.exportFunction(prefix+"_inCurve"),module.exportFunction(prefix+"_inCurveAffine"),prefix}},9329:function(module,__unused_webpack_exports,__webpack_require__){let buildF1m=__webpack_require__(3792),{bitLength}=__webpack_require__(9106);module.exports=function(module,_q,_prefix,_f1mPrefix,_intPrefix){let q=BigInt(_q),n64=Math.floor((bitLength(q-1n)-1)/64)+1,n8=8*n64,prefix=_prefix||"f1";if(module.modules[prefix])return prefix;module.modules[prefix]={n64:n64};let intPrefix=_intPrefix||"int",f1mPrefix=buildF1m(module,q,_f1mPrefix,intPrefix),pR2=module.modules[f1mPrefix].pR2,pq=module.modules[f1mPrefix].pq,pePlusOne=module.modules[f1mPrefix].pePlusOne;function buildSquare(){let f=module.addFunction(prefix+"_square");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefix+"_mul",c.getLocal("x"),c.getLocal("x"),c.getLocal("r")))}function buildInverse(){let f=module.addFunction(prefix+"_inverse");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(intPrefix+"_inverseMod",c.getLocal("x"),c.i32_const(pq),c.getLocal("r")))}function buildIsNegative(){let f=module.addFunction(prefix+"_isNegative");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();f.addCode(c.call(intPrefix+"_gte",c.getLocal("x"),c.i32_const(pePlusOne)))}return function(){let pAux1=module.alloc(n8),f=module.addFunction(prefix+"_mul");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(f1mPrefix+"_mul",c.getLocal("x"),c.getLocal("y"),c.i32_const(pAux1))),f.addCode(c.call(f1mPrefix+"_mul",c.i32_const(pAux1),c.i32_const(pR2),c.getLocal("r")))}(),buildSquare(),buildInverse(),buildIsNegative(),module.exportFunction(f1mPrefix+"_add",prefix+"_add"),module.exportFunction(f1mPrefix+"_sub",prefix+"_sub"),module.exportFunction(f1mPrefix+"_neg",prefix+"_neg"),module.exportFunction(prefix+"_mul"),module.exportFunction(prefix+"_square"),module.exportFunction(prefix+"_inverse"),module.exportFunction(prefix+"_isNegative"),module.exportFunction(f1mPrefix+"_copy",prefix+"_copy"),module.exportFunction(f1mPrefix+"_zero",prefix+"_zero"),module.exportFunction(f1mPrefix+"_one",prefix+"_one"),module.exportFunction(f1mPrefix+"_isZero",prefix+"_isZero"),module.exportFunction(f1mPrefix+"_eq",prefix+"_eq"),prefix}},3792:function(module,__unused_webpack_exports,__webpack_require__){let buildInt=__webpack_require__(947),utils=__webpack_require__(5830),buildExp=__webpack_require__(9809),buildBatchInverse=__webpack_require__(3554),buildBatchConvertion=__webpack_require__(1705),buildBatchOp=__webpack_require__(2584),{bitLength,modInv,modPow,isPrime,isOdd,square}=__webpack_require__(9106);module.exports=function(module,_q,_prefix,_intPrefix){let q=BigInt(_q),n64=Math.floor((bitLength(q-1n)-1)/64)+1,n32=2*n64,n8=8*n64,prefix=_prefix||"f1m";if(module.modules[prefix])return prefix;let intPrefix=buildInt(module,n64,_intPrefix),pq=module.alloc(n8,utils.bigInt2BytesLE(q,n8)),pR2=module.alloc(utils.bigInt2BytesLE(square(1n<<BigInt(64*n64))%q,n8)),pOne=module.alloc(utils.bigInt2BytesLE((1n<<BigInt(64*n64))%q,n8)),pZero=module.alloc(utils.bigInt2BytesLE(0n,n8)),_minusOne=q-1n,_e=_minusOne>>1n,pe=module.alloc(n8,utils.bigInt2BytesLE(_e,n8)),_ePlusOne=_e+1n,pePlusOne=module.alloc(n8,utils.bigInt2BytesLE(_ePlusOne,n8));function buildOne(){let f=module.addFunction(prefix+"_one");f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.call(intPrefix+"_copy",c.i32_const(pOne),c.getLocal("pr")))}function buildAdd(){let f=module.addFunction(prefix+"_add");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.if(c.call(intPrefix+"_add",c.getLocal("x"),c.getLocal("y"),c.getLocal("r")),c.drop(c.call(intPrefix+"_sub",c.getLocal("r"),c.i32_const(pq),c.getLocal("r"))),c.if(c.call(intPrefix+"_gte",c.getLocal("r"),c.i32_const(pq)),c.drop(c.call(intPrefix+"_sub",c.getLocal("r"),c.i32_const(pq),c.getLocal("r"))))))}function buildSub(){let f=module.addFunction(prefix+"_sub");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.if(c.call(intPrefix+"_sub",c.getLocal("x"),c.getLocal("y"),c.getLocal("r")),c.drop(c.call(intPrefix+"_add",c.getLocal("r"),c.i32_const(pq),c.getLocal("r")))))}function buildNeg(){let f=module.addFunction(prefix+"_neg");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefix+"_sub",c.i32_const(pZero),c.getLocal("x"),c.getLocal("r")))}function buildIsNegative(){let f=module.addFunction(prefix+"_isNegative");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(n8));f.addCode(c.call(prefix+"_fromMontgomery",c.getLocal("x"),AUX),c.call(intPrefix+"_gte",AUX,c.i32_const(pePlusOne)))}function buildSign(){let f=module.addFunction(prefix+"_sign");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(intPrefix+"_isZero",c.getLocal("x")),c.ret(c.i32_const(0))),c.call(prefix+"_fromMontgomery",c.getLocal("x"),AUX),c.if(c.call(intPrefix+"_gte",AUX,c.i32_const(pePlusOne)),c.ret(c.i32_const(-1))),c.ret(c.i32_const(1)))}function buildMReduct(){let carries=module.alloc(n32*n32*8),f=module.addFunction(prefix+"_mReduct");f.addParam("t","i32"),f.addParam("r","i32"),f.addLocal("np32","i64"),f.addLocal("c","i64"),f.addLocal("m","i64");let c=f.getCodeBuilder(),np32=Number(4294967296n-modInv(q,4294967296n));f.addCode(c.setLocal("np32",c.i64_const(np32)));for(let i=0;i<n32;i++){f.addCode(c.setLocal("c",c.i64_const(0))),f.addCode(c.setLocal("m",c.i64_and(c.i64_mul(c.i64_load32_u(c.getLocal("t"),4*i),c.getLocal("np32")),c.i64_const("0xFFFFFFFF"))));for(let j=0;j<n32;j++)f.addCode(c.setLocal("c",c.i64_add(c.i64_add(c.i64_load32_u(c.getLocal("t"),(i+j)*4),c.i64_shr_u(c.getLocal("c"),c.i64_const(32))),c.i64_mul(c.i64_load32_u(c.i32_const(pq),4*j),c.getLocal("m"))))),f.addCode(c.i64_store32(c.getLocal("t"),(i+j)*4,c.getLocal("c")));f.addCode(c.i64_store32(c.i32_const(carries),4*i,c.i64_shr_u(c.getLocal("c"),c.i64_const(32))))}f.addCode(c.call(prefix+"_add",c.i32_const(carries),c.i32_add(c.getLocal("t"),c.i32_const(4*n32)),c.getLocal("r")))}function buildMul(){let f=module.addFunction(prefix+"_mul");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32"),f.addLocal("c0","i64"),f.addLocal("c1","i64"),f.addLocal("np32","i64");for(let i=0;i<n32;i++)f.addLocal("x"+i,"i64"),f.addLocal("y"+i,"i64"),f.addLocal("m"+i,"i64"),f.addLocal("q"+i,"i64");let c=f.getCodeBuilder(),np32=Number(4294967296n-modInv(q,4294967296n));f.addCode(c.setLocal("np32",c.i64_const(np32)));let loadX=[],loadY=[],loadQ=[];function mulij(i,j){let X,Y;return loadX[i]?X=c.getLocal("x"+i):(X=c.teeLocal("x"+i,c.i64_load32_u(c.getLocal("x"),4*i)),loadX[i]=!0),loadY[j]?Y=c.getLocal("y"+j):(Y=c.teeLocal("y"+j,c.i64_load32_u(c.getLocal("y"),4*j)),loadY[j]=!0),c.i64_mul(X,Y)}function mulqm(i,j){let Q,M;return loadQ[i]?Q=c.getLocal("q"+i):(Q=c.teeLocal("q"+i,c.i64_load32_u(c.i32_const(0),pq+4*i)),loadQ[i]=!0),M=c.getLocal("m"+j),c.i64_mul(Q,M)}let c0="c0",c1="c1";for(let k=0;k<2*n32-1;k++){for(let i1=Math.max(0,k-n32+1);i1<=k&&i1<n32;i1++){let j=k-i1;f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulij(i1,j)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))}for(let i2=Math.max(1,k-n32+1);i2<=k&&i2<n32;i2++){let j1=k-i2;f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulqm(i2,j1)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))}k<n32&&(f.addCode(c.setLocal("m"+k,c.i64_and(c.i64_mul(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),c.getLocal("np32")),c.i64_const("0xFFFFFFFF")))),f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulqm(0,k)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))),k>=n32&&f.addCode(c.i64_store32(c.getLocal("r"),(k-n32)*4,c.getLocal(c0))),[c0,c1]=[c1,c0],f.addCode(c.setLocal(c1,c.i64_shr_u(c.getLocal(c0),c.i64_const(32))))}f.addCode(c.i64_store32(c.getLocal("r"),4*n32-4,c.getLocal(c0))),f.addCode(c.if(c.i32_wrap_i64(c.getLocal(c1)),c.drop(c.call(intPrefix+"_sub",c.getLocal("r"),c.i32_const(pq),c.getLocal("r"))),c.if(c.call(intPrefix+"_gte",c.getLocal("r"),c.i32_const(pq)),c.drop(c.call(intPrefix+"_sub",c.getLocal("r"),c.i32_const(pq),c.getLocal("r"))))))}function buildSquare(){let f=module.addFunction(prefix+"_square");f.addParam("x","i32"),f.addParam("r","i32"),f.addLocal("c0","i64"),f.addLocal("c1","i64"),f.addLocal("c0_old","i64"),f.addLocal("c1_old","i64"),f.addLocal("np32","i64");for(let i=0;i<n32;i++)f.addLocal("x"+i,"i64"),f.addLocal("m"+i,"i64"),f.addLocal("q"+i,"i64");let c=f.getCodeBuilder(),np32=Number(4294967296n-modInv(q,4294967296n));f.addCode(c.setLocal("np32",c.i64_const(np32)));let loadX=[],loadQ=[];function mulij(i,j){let X,Y;return loadX[i]?X=c.getLocal("x"+i):(X=c.teeLocal("x"+i,c.i64_load32_u(c.getLocal("x"),4*i)),loadX[i]=!0),loadX[j]?Y=c.getLocal("x"+j):(Y=c.teeLocal("x"+j,c.i64_load32_u(c.getLocal("x"),4*j)),loadX[j]=!0),c.i64_mul(X,Y)}function mulqm(i,j){let Q,M;return loadQ[i]?Q=c.getLocal("q"+i):(Q=c.teeLocal("q"+i,c.i64_load32_u(c.i32_const(0),pq+4*i)),loadQ[i]=!0),M=c.getLocal("m"+j),c.i64_mul(Q,M)}let c0="c0",c1="c1",c0_old="c0_old",c1_old="c1_old";for(let k=0;k<2*n32-1;k++){f.addCode(c.setLocal(c0,c.i64_const(0)),c.setLocal(c1,c.i64_const(0)));for(let i1=Math.max(0,k-n32+1);i1<k+1>>1&&i1<n32;i1++){let j=k-i1;f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulij(i1,j)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))}f.addCode(c.setLocal(c0,c.i64_shl(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),c.i64_const(1)))),f.addCode(c.setLocal(c1,c.i64_add(c.i64_shl(c.getLocal(c1),c.i64_const(1)),c.i64_shr_u(c.getLocal(c0),c.i64_const(32))))),k%2==0&&(f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulij(k>>1,k>>1)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))),k>0&&(f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),c.i64_and(c.getLocal(c0_old),c.i64_const(4294967295))))),f.addCode(c.setLocal(c1,c.i64_add(c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32))),c.getLocal(c1_old)))));for(let i2=Math.max(1,k-n32+1);i2<=k&&i2<n32;i2++){let j1=k-i2;f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulqm(i2,j1)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))}k<n32&&(f.addCode(c.setLocal("m"+k,c.i64_and(c.i64_mul(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),c.getLocal("np32")),c.i64_const("0xFFFFFFFF")))),f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulqm(0,k)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))),k>=n32&&f.addCode(c.i64_store32(c.getLocal("r"),(k-n32)*4,c.getLocal(c0))),f.addCode(c.setLocal(c0_old,c.getLocal(c1)),c.setLocal(c1_old,c.i64_shr_u(c.getLocal(c0_old),c.i64_const(32))))}f.addCode(c.i64_store32(c.getLocal("r"),4*n32-4,c.getLocal(c0_old))),f.addCode(c.if(c.i32_wrap_i64(c.getLocal(c1_old)),c.drop(c.call(intPrefix+"_sub",c.getLocal("r"),c.i32_const(pq),c.getLocal("r"))),c.if(c.call(intPrefix+"_gte",c.getLocal("r"),c.i32_const(pq)),c.drop(c.call(intPrefix+"_sub",c.getLocal("r"),c.i32_const(pq),c.getLocal("r"))))))}function buildSquareOld(){let f=module.addFunction(prefix+"_squareOld");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefix+"_mul",c.getLocal("x"),c.getLocal("x"),c.getLocal("r")))}function buildToMontgomery(){let f=module.addFunction(prefix+"_toMontgomery");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefix+"_mul",c.getLocal("x"),c.i32_const(pR2),c.getLocal("r")))}function buildFromMontgomery(){let pAux2=module.alloc(2*n8),f=module.addFunction(prefix+"_fromMontgomery");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(intPrefix+"_copy",c.getLocal("x"),c.i32_const(pAux2))),f.addCode(c.call(intPrefix+"_zero",c.i32_const(pAux2+n8))),f.addCode(c.call(prefix+"_mReduct",c.i32_const(pAux2),c.getLocal("r")))}function buildInverse(){let f=module.addFunction(prefix+"_inverse");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefix+"_fromMontgomery",c.getLocal("x"),c.getLocal("r"))),f.addCode(c.call(intPrefix+"_inverseMod",c.getLocal("r"),c.i32_const(pq),c.getLocal("r"))),f.addCode(c.call(prefix+"_toMontgomery",c.getLocal("r"),c.getLocal("r")))}module.modules[prefix]={pq:pq,pR2:pR2,n64:n64,q:q,pOne:pOne,pZero:pZero,pePlusOne:pePlusOne};let _nqr=2n;if(isPrime(q))for(;modPow(_nqr,_e,q)!==_minusOne;)_nqr+=1n;let s2=0,_t=_minusOne;for(;!isOdd(_t)&&0n!==_t;)s2++,_t>>=1n;let pt=module.alloc(n8,utils.bigInt2BytesLE(_t,n8)),_nqrToT=modPow(_nqr,_t,q),pNqrToT=module.alloc(utils.bigInt2BytesLE((_nqrToT<<BigInt(64*n64))%q,n8)),_tPlusOneOver2=_t+1n>>1n,ptPlusOneOver2=module.alloc(n8,utils.bigInt2BytesLE(_tPlusOneOver2,n8));function buildSqrt(){let f=module.addFunction(prefix+"_sqrt");f.addParam("n","i32"),f.addParam("r","i32"),f.addLocal("m","i32"),f.addLocal("i","i32"),f.addLocal("j","i32");let c=f.getCodeBuilder(),ONE=c.i32_const(pOne),C=c.i32_const(module.alloc(n8)),T=c.i32_const(module.alloc(n8)),R=c.i32_const(module.alloc(n8)),SQ=c.i32_const(module.alloc(n8)),B=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("n")),c.ret(c.call(prefix+"_zero",c.getLocal("r")))),c.setLocal("m",c.i32_const(s2)),c.call(prefix+"_copy",c.i32_const(pNqrToT),C),c.call(prefix+"_exp",c.getLocal("n"),c.i32_const(pt),c.i32_const(n8),T),c.call(prefix+"_exp",c.getLocal("n"),c.i32_const(ptPlusOneOver2),c.i32_const(n8),R),c.block(c.loop(c.br_if(1,c.call(prefix+"_eq",T,ONE)),c.call(prefix+"_square",T,SQ),c.setLocal("i",c.i32_const(1)),c.block(c.loop(c.br_if(1,c.call(prefix+"_eq",SQ,ONE)),c.call(prefix+"_square",SQ,SQ),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.call(prefix+"_copy",C,B),c.setLocal("j",c.i32_sub(c.i32_sub(c.getLocal("m"),c.getLocal("i")),c.i32_const(1))),c.block(c.loop(c.br_if(1,c.i32_eqz(c.getLocal("j"))),c.call(prefix+"_square",B,B),c.setLocal("j",c.i32_sub(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.setLocal("m",c.getLocal("i")),c.call(prefix+"_square",B,C),c.call(prefix+"_mul",T,C,T),c.call(prefix+"_mul",R,B,R),c.br(0))),c.if(c.call(prefix+"_isNegative",R),c.call(prefix+"_neg",R,c.getLocal("r")),c.call(prefix+"_copy",R,c.getLocal("r"))))}function buildIsSquare(){let f=module.addFunction(prefix+"_isSquare");f.addParam("n","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),ONE=c.i32_const(pOne),AUX=c.i32_const(module.alloc(n8));f.addCode(c.if(c.call(prefix+"_isZero",c.getLocal("n")),c.ret(c.i32_const(1))),c.call(prefix+"_exp",c.getLocal("n"),c.i32_const(pe),c.i32_const(n8),AUX),c.call(prefix+"_eq",AUX,ONE))}function buildLoad(){let f=module.addFunction(prefix+"_load");f.addParam("scalar","i32"),f.addParam("scalarLen","i32"),f.addParam("r","i32"),f.addLocal("p","i32"),f.addLocal("l","i32"),f.addLocal("i","i32"),f.addLocal("j","i32");let c=f.getCodeBuilder(),R=c.i32_const(module.alloc(n8)),pAux=module.alloc(n8),AUX=c.i32_const(pAux);f.addCode(c.call(intPrefix+"_zero",c.getLocal("r")),c.setLocal("i",c.i32_const(n8)),c.setLocal("p",c.getLocal("scalar")),c.block(c.loop(c.br_if(1,c.i32_gt_u(c.getLocal("i"),c.getLocal("scalarLen"))),c.if(c.i32_eq(c.getLocal("i"),c.i32_const(n8)),c.call(prefix+"_one",R),c.call(prefix+"_mul",R,c.i32_const(pR2),R)),c.call(prefix+"_mul",c.getLocal("p"),R,AUX),c.call(prefix+"_add",c.getLocal("r"),AUX,c.getLocal("r")),c.setLocal("p",c.i32_add(c.getLocal("p"),c.i32_const(n8))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(n8))),c.br(0))),c.setLocal("l",c.i32_rem_u(c.getLocal("scalarLen"),c.i32_const(n8))),c.if(c.i32_eqz(c.getLocal("l")),c.ret([])),c.call(intPrefix+"_zero",AUX),c.setLocal("j",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("j"),c.getLocal("l"))),c.i32_store8(c.getLocal("j"),pAux,c.i32_load8_u(c.getLocal("p"))),c.setLocal("p",c.i32_add(c.getLocal("p"),c.i32_const(1))),c.setLocal("j",c.i32_add(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.if(c.i32_eq(c.getLocal("i"),c.i32_const(n8)),c.call(prefix+"_one",R),c.call(prefix+"_mul",R,c.i32_const(pR2),R)),c.call(prefix+"_mul",AUX,R,AUX),c.call(prefix+"_add",c.getLocal("r"),AUX,c.getLocal("r")))}function buildTimesScalar(){let f=module.addFunction(prefix+"_timesScalar");f.addParam("x","i32"),f.addParam("scalar","i32"),f.addParam("scalarLen","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),AUX=c.i32_const(module.alloc(n8));f.addCode(c.call(prefix+"_load",c.getLocal("scalar"),c.getLocal("scalarLen"),AUX),c.call(prefix+"_toMontgomery",AUX,AUX),c.call(prefix+"_mul",c.getLocal("x"),AUX,c.getLocal("r")))}function buildIsOne(){let f=module.addFunction(prefix+"_isOne");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();f.addCode(c.ret(c.call(intPrefix+"_eq",c.getLocal("x"),c.i32_const(pOne))))}return module.exportFunction(intPrefix+"_copy",prefix+"_copy"),module.exportFunction(intPrefix+"_zero",prefix+"_zero"),module.exportFunction(intPrefix+"_isZero",prefix+"_isZero"),module.exportFunction(intPrefix+"_eq",prefix+"_eq"),buildIsOne(),buildAdd(),buildSub(),buildNeg(),buildMReduct(),buildMul(),buildSquare(),buildSquareOld(),buildToMontgomery(),buildFromMontgomery(),buildIsNegative(),buildSign(),buildInverse(),buildOne(),buildLoad(),buildTimesScalar(),buildBatchInverse(module,prefix),buildBatchConvertion(module,prefix+"_batchToMontgomery",prefix+"_toMontgomery",n8,n8),buildBatchConvertion(module,prefix+"_batchFromMontgomery",prefix+"_fromMontgomery",n8,n8),buildBatchConvertion(module,prefix+"_batchNeg",prefix+"_neg",n8,n8),buildBatchOp(module,prefix+"_batchAdd",prefix+"_add",n8,n8),buildBatchOp(module,prefix+"_batchSub",prefix+"_sub",n8,n8),buildBatchOp(module,prefix+"_batchMul",prefix+"_mul",n8,n8),module.exportFunction(prefix+"_add"),module.exportFunction(prefix+"_sub"),module.exportFunction(prefix+"_neg"),module.exportFunction(prefix+"_isNegative"),module.exportFunction(prefix+"_isOne"),module.exportFunction(prefix+"_sign"),module.exportFunction(prefix+"_mReduct"),module.exportFunction(prefix+"_mul"),module.exportFunction(prefix+"_square"),module.exportFunction(prefix+"_squareOld"),module.exportFunction(prefix+"_fromMontgomery"),module.exportFunction(prefix+"_toMontgomery"),module.exportFunction(prefix+"_inverse"),module.exportFunction(prefix+"_one"),module.exportFunction(prefix+"_load"),module.exportFunction(prefix+"_timesScalar"),buildExp(module,prefix+"_exp",n8,prefix+"_mul",prefix+"_square",intPrefix+"_copy",prefix+"_one"),module.exportFunction(prefix+"_exp"),module.exportFunction(prefix+"_batchInverse"),isPrime(q)&&(buildSqrt(),buildIsSquare(),module.exportFunction(prefix+"_sqrt"),module.exportFunction(prefix+"_isSquare")),module.exportFunction(prefix+"_batchToMontgomery"),module.exportFunction(prefix+"_batchFromMontgomery"),prefix}},4673:function(module,__unused_webpack_exports,__webpack_require__){let buildExp=__webpack_require__(9809),buildBatchInverse=__webpack_require__(3554),utils=__webpack_require__(5830);module.exports=function(module,mulNonResidueFn,prefix,f1mPrefix){if(module.modules[prefix])return prefix;let f1n8=8*module.modules[f1mPrefix].n64,q=module.modules[f1mPrefix].q;function buildAdd(){let f=module.addFunction(prefix+"_add");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),y0=c.getLocal("y"),y1=c.i32_add(c.getLocal("y"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_add",x0,y0,r0),c.call(f1mPrefix+"_add",x1,y1,r1))}function buildTimesScalar(){let f=module.addFunction(prefix+"_timesScalar");f.addParam("x","i32"),f.addParam("scalar","i32"),f.addParam("scalarLen","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_timesScalar",x0,c.getLocal("scalar"),c.getLocal("scalarLen"),r0),c.call(f1mPrefix+"_timesScalar",x1,c.getLocal("scalar"),c.getLocal("scalarLen"),r1))}function buildSub(){let f=module.addFunction(prefix+"_sub");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),y0=c.getLocal("y"),y1=c.i32_add(c.getLocal("y"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_sub",x0,y0,r0),c.call(f1mPrefix+"_sub",x1,y1,r1))}function buildNeg(){let f=module.addFunction(prefix+"_neg");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_neg",x0,r0),c.call(f1mPrefix+"_neg",x1,r1))}function buildConjugate(){let f=module.addFunction(prefix+"_conjugate");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_copy",x0,r0),c.call(f1mPrefix+"_neg",x1,r1))}function buildIsNegative(){let f=module.addFunction(prefix+"_isNegative");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8));f.addCode(c.if(c.call(f1mPrefix+"_isZero",x1),c.ret(c.call(f1mPrefix+"_isNegative",x0))),c.ret(c.call(f1mPrefix+"_isNegative",x1)))}function buildMul(){let f=module.addFunction(prefix+"_mul");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),y0=c.getLocal("y"),y1=c.i32_add(c.getLocal("y"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),A=c.i32_const(module.alloc(f1n8)),B=c.i32_const(module.alloc(f1n8)),C=c.i32_const(module.alloc(f1n8)),D=c.i32_const(module.alloc(f1n8));f.addCode(c.call(f1mPrefix+"_mul",x0,y0,A),c.call(f1mPrefix+"_mul",x1,y1,B),c.call(f1mPrefix+"_add",x0,x1,C),c.call(f1mPrefix+"_add",y0,y1,D),c.call(f1mPrefix+"_mul",C,D,C),c.call(mulNonResidueFn,B,r0),c.call(f1mPrefix+"_add",A,r0,r0),c.call(f1mPrefix+"_add",A,B,r1),c.call(f1mPrefix+"_sub",C,r1,r1))}function buildMul1(){let f=module.addFunction(prefix+"_mul1");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),y=c.getLocal("y"),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_mul",x0,y,r0),c.call(f1mPrefix+"_mul",x1,y,r1))}function buildSquare(){let f=module.addFunction(prefix+"_square");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),AB=c.i32_const(module.alloc(f1n8)),APB=c.i32_const(module.alloc(f1n8)),APNB=c.i32_const(module.alloc(f1n8)),ABPNAB=c.i32_const(module.alloc(f1n8));f.addCode(c.call(f1mPrefix+"_mul",x0,x1,AB),c.call(f1mPrefix+"_add",x0,x1,APB),c.call(mulNonResidueFn,x1,APNB),c.call(f1mPrefix+"_add",x0,APNB,APNB),c.call(mulNonResidueFn,AB,ABPNAB),c.call(f1mPrefix+"_add",ABPNAB,AB,ABPNAB),c.call(f1mPrefix+"_mul",APB,APNB,r0),c.call(f1mPrefix+"_sub",r0,ABPNAB,r0),c.call(f1mPrefix+"_add",AB,AB,r1))}function buildToMontgomery(){let f=module.addFunction(prefix+"_toMontgomery");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_toMontgomery",x0,r0),c.call(f1mPrefix+"_toMontgomery",x1,r1))}function buildFromMontgomery(){let f=module.addFunction(prefix+"_fromMontgomery");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_fromMontgomery",x0,r0),c.call(f1mPrefix+"_fromMontgomery",x1,r1))}function buildCopy(){let f=module.addFunction(prefix+"_copy");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_copy",x0,r0),c.call(f1mPrefix+"_copy",x1,r1))}function buildZero(){let f=module.addFunction(prefix+"_zero");f.addParam("x","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_zero",x0),c.call(f1mPrefix+"_zero",x1))}function buildOne(){let f=module.addFunction(prefix+"_one");f.addParam("x","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8));f.addCode(c.call(f1mPrefix+"_one",x0),c.call(f1mPrefix+"_zero",x1))}function buildEq(){let f=module.addFunction(prefix+"_eq");f.addParam("x","i32"),f.addParam("y","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),y0=c.getLocal("y"),y1=c.i32_add(c.getLocal("y"),c.i32_const(f1n8));f.addCode(c.i32_and(c.call(f1mPrefix+"_eq",x0,y0),c.call(f1mPrefix+"_eq",x1,y1)))}function buildInverse(){let f=module.addFunction(prefix+"_inverse");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),t0=c.i32_const(module.alloc(f1n8)),t1=c.i32_const(module.alloc(f1n8)),t2=c.i32_const(module.alloc(f1n8)),t3=c.i32_const(module.alloc(f1n8));f.addCode(c.call(f1mPrefix+"_square",x0,t0),c.call(f1mPrefix+"_square",x1,t1),c.call(mulNonResidueFn,t1,t2),c.call(f1mPrefix+"_sub",t0,t2,t2),c.call(f1mPrefix+"_inverse",t2,t3),c.call(f1mPrefix+"_mul",x0,t3,r0),c.call(f1mPrefix+"_mul",x1,t3,r1),c.call(f1mPrefix+"_neg",r1,r1))}function buildSign(){let f=module.addFunction(prefix+"_sign");f.addParam("x","i32"),f.addLocal("s","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8));f.addCode(c.setLocal("s",c.call(f1mPrefix+"_sign",x1)),c.if(c.getLocal("s"),c.ret(c.getLocal("s"))),c.ret(c.call(f1mPrefix+"_sign",x0)))}function buildIsOne(){let f=module.addFunction(prefix+"_isOne");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8));f.addCode(c.ret(c.i32_and(c.call(f1mPrefix+"_isOne",x0),c.call(f1mPrefix+"_isZero",x1))))}function buildSqrt(){let f=module.addFunction(prefix+"_sqrt");f.addParam("a","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder(),e34=c.i32_const(module.alloc(utils.bigInt2BytesLE((BigInt(q||0)-3n)/4n,f1n8))),e12=c.i32_const(module.alloc(utils.bigInt2BytesLE((BigInt(q||0)-1n)/2n,f1n8))),a=c.getLocal("a"),a1=c.i32_const(module.alloc(2*f1n8)),alpha=c.i32_const(module.alloc(2*f1n8)),a0=c.i32_const(module.alloc(2*f1n8)),pn1=module.alloc(2*f1n8),n1=c.i32_const(pn1),n1a=c.i32_const(pn1),n1b=c.i32_const(pn1+f1n8),x0=c.i32_const(module.alloc(2*f1n8)),b=c.i32_const(module.alloc(2*f1n8));f.addCode(c.call(prefix+"_one",n1),c.call(prefix+"_neg",n1,n1),c.call(prefix+"_exp",a,e34,c.i32_const(f1n8),a1),c.call(prefix+"_square",a1,alpha),c.call(prefix+"_mul",a,alpha,alpha),c.call(prefix+"_conjugate",alpha,a0),c.call(prefix+"_mul",a0,alpha,a0),c.if(c.call(prefix+"_eq",a0,n1),c.unreachable()),c.call(prefix+"_mul",a1,a,x0),c.if(c.call(prefix+"_eq",alpha,n1),[...c.call(f1mPrefix+"_zero",n1a),...c.call(f1mPrefix+"_one",n1b),...c.call(prefix+"_mul",n1,x0,c.getLocal("pr"))],[...c.call(prefix+"_one",b),...c.call(prefix+"_add",b,alpha,b),...c.call(prefix+"_exp",b,e12,c.i32_const(f1n8),b),...c.call(prefix+"_mul",b,x0,c.getLocal("pr"))]))}function buildIsSquare(){let f=module.addFunction(prefix+"_isSquare");f.addParam("a","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),e34=c.i32_const(module.alloc(utils.bigInt2BytesLE((BigInt(q||0)-3n)/4n,f1n8))),a=c.getLocal("a"),a1=c.i32_const(module.alloc(2*f1n8)),alpha=c.i32_const(module.alloc(2*f1n8)),a0=c.i32_const(module.alloc(2*f1n8)),pn1=module.alloc(2*f1n8),n1=c.i32_const(pn1);f.addCode(c.call(prefix+"_one",n1),c.call(prefix+"_neg",n1,n1),c.call(prefix+"_exp",a,e34,c.i32_const(f1n8),a1),c.call(prefix+"_square",a1,alpha),c.call(prefix+"_mul",a,alpha,alpha),c.call(prefix+"_conjugate",alpha,a0),c.call(prefix+"_mul",a0,alpha,a0),c.if(c.call(prefix+"_eq",a0,n1),c.ret(c.i32_const(0))),c.ret(c.i32_const(1)))}return module.modules[prefix]={n64:2*module.modules[f1mPrefix].n64},function(){let f=module.addFunction(prefix+"_isZero");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8));f.addCode(c.i32_and(c.call(f1mPrefix+"_isZero",x0),c.call(f1mPrefix+"_isZero",x1)))}(),buildIsOne(),buildZero(),buildOne(),buildCopy(),buildMul(),buildMul1(),buildSquare(),buildAdd(),buildSub(),buildNeg(),buildConjugate(),buildToMontgomery(),buildFromMontgomery(),buildEq(),buildInverse(),buildTimesScalar(),buildSign(),buildIsNegative(),module.exportFunction(prefix+"_isZero"),module.exportFunction(prefix+"_isOne"),module.exportFunction(prefix+"_zero"),module.exportFunction(prefix+"_one"),module.exportFunction(prefix+"_copy"),module.exportFunction(prefix+"_mul"),module.exportFunction(prefix+"_mul1"),module.exportFunction(prefix+"_square"),module.exportFunction(prefix+"_add"),module.exportFunction(prefix+"_sub"),module.exportFunction(prefix+"_neg"),module.exportFunction(prefix+"_sign"),module.exportFunction(prefix+"_conjugate"),module.exportFunction(prefix+"_fromMontgomery"),module.exportFunction(prefix+"_toMontgomery"),module.exportFunction(prefix+"_eq"),module.exportFunction(prefix+"_inverse"),buildBatchInverse(module,prefix),buildExp(module,prefix+"_exp",2*f1n8,prefix+"_mul",prefix+"_square",prefix+"_copy",prefix+"_one"),buildSqrt(),buildIsSquare(),module.exportFunction(prefix+"_exp"),module.exportFunction(prefix+"_timesScalar"),module.exportFunction(prefix+"_batchInverse"),module.exportFunction(prefix+"_sqrt"),module.exportFunction(prefix+"_isSquare"),module.exportFunction(prefix+"_isNegative"),prefix}},6019:function(module,__unused_webpack_exports,__webpack_require__){let buildExp=__webpack_require__(9809),buildBatchInverse=__webpack_require__(3554);module.exports=function(module,mulNonResidueFn,prefix,f1mPrefix){if(module.modules[prefix])return prefix;let f1n8=8*module.modules[f1mPrefix].n64;function buildAdd(){let f=module.addFunction(prefix+"_add");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),y0=c.getLocal("y"),y1=c.i32_add(c.getLocal("y"),c.i32_const(f1n8)),y2=c.i32_add(c.getLocal("y"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_add",x0,y0,r0),c.call(f1mPrefix+"_add",x1,y1,r1),c.call(f1mPrefix+"_add",x2,y2,r2))}function buildTimesScalar(){let f=module.addFunction(prefix+"_timesScalar");f.addParam("x","i32"),f.addParam("scalar","i32"),f.addParam("scalarLen","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_timesScalar",x0,c.getLocal("scalar"),c.getLocal("scalarLen"),r0),c.call(f1mPrefix+"_timesScalar",x1,c.getLocal("scalar"),c.getLocal("scalarLen"),r1),c.call(f1mPrefix+"_timesScalar",x2,c.getLocal("scalar"),c.getLocal("scalarLen"),r2))}function buildSub(){let f=module.addFunction(prefix+"_sub");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),y0=c.getLocal("y"),y1=c.i32_add(c.getLocal("y"),c.i32_const(f1n8)),y2=c.i32_add(c.getLocal("y"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_sub",x0,y0,r0),c.call(f1mPrefix+"_sub",x1,y1,r1),c.call(f1mPrefix+"_sub",x2,y2,r2))}function buildNeg(){let f=module.addFunction(prefix+"_neg");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_neg",x0,r0),c.call(f1mPrefix+"_neg",x1,r1),c.call(f1mPrefix+"_neg",x2,r2))}function buildIsNegative(){let f=module.addFunction(prefix+"_isNegative");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8));f.addCode(c.if(c.call(f1mPrefix+"_isZero",x2),c.if(c.call(f1mPrefix+"_isZero",x1),c.ret(c.call(f1mPrefix+"_isNegative",x0)),c.ret(c.call(f1mPrefix+"_isNegative",x1)))),c.ret(c.call(f1mPrefix+"_isNegative",x2)))}function buildMul(){let f=module.addFunction(prefix+"_mul");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");let cd=f.getCodeBuilder(),a=cd.getLocal("x"),b=cd.i32_add(cd.getLocal("x"),cd.i32_const(f1n8)),c=cd.i32_add(cd.getLocal("x"),cd.i32_const(2*f1n8)),A=cd.getLocal("y"),B=cd.i32_add(cd.getLocal("y"),cd.i32_const(f1n8)),C=cd.i32_add(cd.getLocal("y"),cd.i32_const(2*f1n8)),r0=cd.getLocal("r"),r1=cd.i32_add(cd.getLocal("r"),cd.i32_const(f1n8)),r2=cd.i32_add(cd.getLocal("r"),cd.i32_const(2*f1n8)),aA=cd.i32_const(module.alloc(f1n8)),bB=cd.i32_const(module.alloc(f1n8)),cC=cd.i32_const(module.alloc(f1n8)),a_b=cd.i32_const(module.alloc(f1n8)),A_B=cd.i32_const(module.alloc(f1n8)),a_c=cd.i32_const(module.alloc(f1n8)),A_C=cd.i32_const(module.alloc(f1n8)),b_c=cd.i32_const(module.alloc(f1n8)),B_C=cd.i32_const(module.alloc(f1n8)),aA_bB=cd.i32_const(module.alloc(f1n8)),aA_cC=cd.i32_const(module.alloc(f1n8)),bB_cC=cd.i32_const(module.alloc(f1n8)),AUX=cd.i32_const(module.alloc(f1n8));f.addCode(cd.call(f1mPrefix+"_mul",a,A,aA),cd.call(f1mPrefix+"_mul",b,B,bB),cd.call(f1mPrefix+"_mul",c,C,cC),cd.call(f1mPrefix+"_add",a,b,a_b),cd.call(f1mPrefix+"_add",A,B,A_B),cd.call(f1mPrefix+"_add",a,c,a_c),cd.call(f1mPrefix+"_add",A,C,A_C),cd.call(f1mPrefix+"_add",b,c,b_c),cd.call(f1mPrefix+"_add",B,C,B_C),cd.call(f1mPrefix+"_add",aA,bB,aA_bB),cd.call(f1mPrefix+"_add",aA,cC,aA_cC),cd.call(f1mPrefix+"_add",bB,cC,bB_cC),cd.call(f1mPrefix+"_mul",b_c,B_C,r0),cd.call(f1mPrefix+"_sub",r0,bB_cC,r0),cd.call(mulNonResidueFn,r0,r0),cd.call(f1mPrefix+"_add",aA,r0,r0),cd.call(f1mPrefix+"_mul",a_b,A_B,r1),cd.call(f1mPrefix+"_sub",r1,aA_bB,r1),cd.call(mulNonResidueFn,cC,AUX),cd.call(f1mPrefix+"_add",r1,AUX,r1),cd.call(f1mPrefix+"_mul",a_c,A_C,r2),cd.call(f1mPrefix+"_sub",r2,aA_cC,r2),cd.call(f1mPrefix+"_add",r2,bB,r2))}function buildSquare(){let f=module.addFunction(prefix+"_square");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),A=c.getLocal("x"),B=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),C=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8)),s0=c.i32_const(module.alloc(f1n8)),ab=c.i32_const(module.alloc(f1n8)),s1=c.i32_const(module.alloc(f1n8)),s2=c.i32_const(module.alloc(f1n8)),bc=c.i32_const(module.alloc(f1n8)),s3=c.i32_const(module.alloc(f1n8)),s4=c.i32_const(module.alloc(f1n8));f.addCode(c.call(f1mPrefix+"_square",A,s0),c.call(f1mPrefix+"_mul",A,B,ab),c.call(f1mPrefix+"_add",ab,ab,s1),c.call(f1mPrefix+"_sub",A,B,s2),c.call(f1mPrefix+"_add",s2,C,s2),c.call(f1mPrefix+"_square",s2,s2),c.call(f1mPrefix+"_mul",B,C,bc),c.call(f1mPrefix+"_add",bc,bc,s3),c.call(f1mPrefix+"_square",C,s4),c.call(mulNonResidueFn,s3,r0),c.call(f1mPrefix+"_add",s0,r0,r0),c.call(mulNonResidueFn,s4,r1),c.call(f1mPrefix+"_add",s1,r1,r1),c.call(f1mPrefix+"_add",s0,s4,r2),c.call(f1mPrefix+"_sub",s3,r2,r2),c.call(f1mPrefix+"_add",s2,r2,r2),c.call(f1mPrefix+"_add",s1,r2,r2))}function buildToMontgomery(){let f=module.addFunction(prefix+"_toMontgomery");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_toMontgomery",x0,r0),c.call(f1mPrefix+"_toMontgomery",x1,r1),c.call(f1mPrefix+"_toMontgomery",x2,r2))}function buildFromMontgomery(){let f=module.addFunction(prefix+"_fromMontgomery");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_fromMontgomery",x0,r0),c.call(f1mPrefix+"_fromMontgomery",x1,r1),c.call(f1mPrefix+"_fromMontgomery",x2,r2))}function buildCopy(){let f=module.addFunction(prefix+"_copy");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_copy",x0,r0),c.call(f1mPrefix+"_copy",x1,r1),c.call(f1mPrefix+"_copy",x2,r2))}function buildZero(){let f=module.addFunction(prefix+"_zero");f.addParam("x","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_zero",x0),c.call(f1mPrefix+"_zero",x1),c.call(f1mPrefix+"_zero",x2))}function buildOne(){let f=module.addFunction(prefix+"_one");f.addParam("x","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8));f.addCode(c.call(f1mPrefix+"_one",x0),c.call(f1mPrefix+"_zero",x1),c.call(f1mPrefix+"_zero",x2))}function buildEq(){let f=module.addFunction(prefix+"_eq");f.addParam("x","i32"),f.addParam("y","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),y0=c.getLocal("y"),y1=c.i32_add(c.getLocal("y"),c.i32_const(f1n8)),y2=c.i32_add(c.getLocal("y"),c.i32_const(2*f1n8));f.addCode(c.i32_and(c.i32_and(c.call(f1mPrefix+"_eq",x0,y0),c.call(f1mPrefix+"_eq",x1,y1)),c.call(f1mPrefix+"_eq",x2,y2)))}function buildInverse(){let f=module.addFunction(prefix+"_inverse");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8)),r0=c.getLocal("r"),r1=c.i32_add(c.getLocal("r"),c.i32_const(f1n8)),r2=c.i32_add(c.getLocal("r"),c.i32_const(2*f1n8)),t0=c.i32_const(module.alloc(f1n8)),t1=c.i32_const(module.alloc(f1n8)),t2=c.i32_const(module.alloc(f1n8)),t3=c.i32_const(module.alloc(f1n8)),t4=c.i32_const(module.alloc(f1n8)),t5=c.i32_const(module.alloc(f1n8)),c0=c.i32_const(module.alloc(f1n8)),c1=c.i32_const(module.alloc(f1n8)),c2=c.i32_const(module.alloc(f1n8)),t6=c.i32_const(module.alloc(f1n8)),AUX=c.i32_const(module.alloc(f1n8));f.addCode(c.call(f1mPrefix+"_square",x0,t0),c.call(f1mPrefix+"_square",x1,t1),c.call(f1mPrefix+"_square",x2,t2),c.call(f1mPrefix+"_mul",x0,x1,t3),c.call(f1mPrefix+"_mul",x0,x2,t4),c.call(f1mPrefix+"_mul",x1,x2,t5),c.call(mulNonResidueFn,t5,c0),c.call(f1mPrefix+"_sub",t0,c0,c0),c.call(mulNonResidueFn,t2,c1),c.call(f1mPrefix+"_sub",c1,t3,c1),c.call(f1mPrefix+"_sub",t1,t4,c2),c.call(f1mPrefix+"_mul",x2,c1,t6),c.call(f1mPrefix+"_mul",x1,c2,AUX),c.call(f1mPrefix+"_add",t6,AUX,t6),c.call(mulNonResidueFn,t6,t6),c.call(f1mPrefix+"_mul",x0,c0,AUX),c.call(f1mPrefix+"_add",AUX,t6,t6),c.call(f1mPrefix+"_inverse",t6,t6),c.call(f1mPrefix+"_mul",t6,c0,r0),c.call(f1mPrefix+"_mul",t6,c1,r1),c.call(f1mPrefix+"_mul",t6,c2,r2))}function buildSign(){let f=module.addFunction(prefix+"_sign");f.addParam("x","i32"),f.addLocal("s","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8));f.addCode(c.setLocal("s",c.call(f1mPrefix+"_sign",x2)),c.if(c.getLocal("s"),c.ret(c.getLocal("s"))),c.setLocal("s",c.call(f1mPrefix+"_sign",x1)),c.if(c.getLocal("s"),c.ret(c.getLocal("s"))),c.ret(c.call(f1mPrefix+"_sign",x0)))}function buildIsOne(){let f=module.addFunction(prefix+"_isOne");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8));f.addCode(c.ret(c.i32_and(c.i32_and(c.call(f1mPrefix+"_isOne",x0),c.call(f1mPrefix+"_isZero",x1)),c.call(f1mPrefix+"_isZero",x2))))}return module.modules[prefix]={n64:3*module.modules[f1mPrefix].n64},function(){let f=module.addFunction(prefix+"_isZero");f.addParam("x","i32"),f.setReturnType("i32");let c=f.getCodeBuilder(),x0=c.getLocal("x"),x1=c.i32_add(c.getLocal("x"),c.i32_const(f1n8)),x2=c.i32_add(c.getLocal("x"),c.i32_const(2*f1n8));f.addCode(c.i32_and(c.i32_and(c.call(f1mPrefix+"_isZero",x0),c.call(f1mPrefix+"_isZero",x1)),c.call(f1mPrefix+"_isZero",x2)))}(),buildIsOne(),buildZero(),buildOne(),buildCopy(),buildMul(),buildSquare(),buildAdd(),buildSub(),buildNeg(),buildSign(),buildToMontgomery(),buildFromMontgomery(),buildEq(),buildInverse(),buildTimesScalar(),buildIsNegative(),module.exportFunction(prefix+"_isZero"),module.exportFunction(prefix+"_isOne"),module.exportFunction(prefix+"_zero"),module.exportFunction(prefix+"_one"),module.exportFunction(prefix+"_copy"),module.exportFunction(prefix+"_mul"),module.exportFunction(prefix+"_square"),module.exportFunction(prefix+"_add"),module.exportFunction(prefix+"_sub"),module.exportFunction(prefix+"_neg"),module.exportFunction(prefix+"_sign"),module.exportFunction(prefix+"_fromMontgomery"),module.exportFunction(prefix+"_toMontgomery"),module.exportFunction(prefix+"_eq"),module.exportFunction(prefix+"_inverse"),buildBatchInverse(module,prefix),buildExp(module,prefix+"_exp",3*f1n8,prefix+"_mul",prefix+"_square",prefix+"_copy",prefix+"_one"),module.exportFunction(prefix+"_exp"),module.exportFunction(prefix+"_timesScalar"),module.exportFunction(prefix+"_batchInverse"),module.exportFunction(prefix+"_isNegative"),prefix}},6588:function(module,__unused_webpack_exports,__webpack_require__){let{isOdd,modInv,modPow}=__webpack_require__(9106),utils=__webpack_require__(5830);module.exports=function(module,prefix,gPrefix,fPrefix,opGtimesF){let n64f=module.modules[fPrefix].n64,n8f=8*n64f,n64g=module.modules[gPrefix].n64,n8g=8*n64g,q=module.modules[fPrefix].q,rem=q-1n,maxBits=0;for(;!isOdd(rem);)maxBits++,rem>>=1n;let nr=2n;for(;1n===modPow(nr,q>>1n,q);)nr+=1n;let w=Array(maxBits+1);w[maxBits]=modPow(nr,rem,q);let n=maxBits-1;for(;n>=0;)w[n]=modPow(w[n+1],2n,q),n--;let bytes=[],R=(1n<<BigInt(8*n8f))%q;for(let i=0;i<w.length;i++){let m=w[i]*R%q;bytes.push(...utils.bigInt2BytesLE(m,n8f))}let ROOTs=module.alloc(bytes),i2=Array(maxBits+1);i2[0]=1n;for(let i1=1;i1<=maxBits;i1++)i2[i1]=2n*i2[i1-1];let bytesi2=[];for(let i3=0;i3<=maxBits;i3++){let m1=modInv(i2[i3],q)*R%q;bytesi2.push(...utils.bigInt2BytesLE(m1,n8f))}let INV2=module.alloc(bytesi2),shift=modPow(nr,2n,q),bytesShiftToSmallM=[],bytesSConst=[];for(let i4=0;i4<=maxBits;i4++){let shiftToSmallM=modPow(shift,2n**BigInt(i4),q),sConst=modInv(q+1n-shiftToSmallM,q);bytesShiftToSmallM.push(...utils.bigInt2BytesLE(shiftToSmallM*R%q,n8f)),bytesSConst.push(...utils.bigInt2BytesLE(sConst*R%q,n8f))}let SHIFT_TO_M=module.alloc(bytesShiftToSmallM),SCONST=module.alloc(bytesSConst);function rev(x){let r=0;for(let i=0;i<8;i++)x&1<<i&&(r|=128>>i);return r}let rtable=Array(256);for(let i5=0;i5<256;i5++)rtable[i5]=rev(i5);let REVTABLE=module.alloc(rtable);function buildLog2(){let f=module.addFunction(prefix+"__log2");f.addParam("n","i32"),f.setReturnType("i32"),f.addLocal("bits","i32"),f.addLocal("aux","i32");let c=f.getCodeBuilder();f.addCode(c.setLocal("aux",c.i32_shr_u(c.getLocal("n"),c.i32_const(1)))),f.addCode(c.setLocal("bits",c.i32_const(0))),f.addCode(c.block(c.loop(c.br_if(1,c.i32_eqz(c.getLocal("aux"))),c.setLocal("aux",c.i32_shr_u(c.getLocal("aux"),c.i32_const(1))),c.setLocal("bits",c.i32_add(c.getLocal("bits"),c.i32_const(1))),c.br(0)))),f.addCode(c.if(c.i32_ne(c.getLocal("n"),c.i32_shl(c.i32_const(1),c.getLocal("bits"))),c.unreachable())),f.addCode(c.if(c.i32_gt_u(c.getLocal("bits"),c.i32_const(maxBits)),c.unreachable())),f.addCode(c.getLocal("bits"))}function buildFFT(){let f=module.addFunction(prefix+"_fft");f.addParam("px","i32"),f.addParam("n","i32"),f.addLocal("bits","i32");let c=f.getCodeBuilder(),One=c.i32_const(module.alloc(n8f));f.addCode(c.setLocal("bits",c.call(prefix+"__log2",c.getLocal("n"))),c.call(fPrefix+"_one",One),c.call(prefix+"_rawfft",c.getLocal("px"),c.getLocal("bits"),c.i32_const(0),One))}function buildIFFT(){let f=module.addFunction(prefix+"_ifft");f.addParam("px","i32"),f.addParam("n","i32"),f.addLocal("bits","i32"),f.addLocal("pInv2","i32");let c=f.getCodeBuilder();f.addCode(c.setLocal("bits",c.call(prefix+"__log2",c.getLocal("n"))),c.setLocal("pInv2",c.i32_add(c.i32_const(INV2),c.i32_mul(c.getLocal("bits"),c.i32_const(n8f)))),c.call(prefix+"_rawfft",c.getLocal("px"),c.getLocal("bits"),c.i32_const(1),c.getLocal("pInv2")))}function buildRawFFT(){let f=module.addFunction(prefix+"_rawfft");f.addParam("px","i32"),f.addParam("bits","i32"),f.addParam("reverse","i32"),f.addParam("mulFactor","i32"),f.addLocal("s","i32"),f.addLocal("k","i32"),f.addLocal("j","i32"),f.addLocal("m","i32"),f.addLocal("mdiv2","i32"),f.addLocal("n","i32"),f.addLocal("pwm","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32");let c=f.getCodeBuilder(),W=c.i32_const(module.alloc(n8f)),T=c.i32_const(module.alloc(n8g)),U=c.i32_const(module.alloc(n8g));f.addCode(c.call(prefix+"__reversePermutation",c.getLocal("px"),c.getLocal("bits")),c.setLocal("n",c.i32_shl(c.i32_const(1),c.getLocal("bits"))),c.setLocal("s",c.i32_const(1)),c.block(c.loop(c.br_if(1,c.i32_gt_u(c.getLocal("s"),c.getLocal("bits"))),c.setLocal("m",c.i32_shl(c.i32_const(1),c.getLocal("s"))),c.setLocal("pwm",c.i32_add(c.i32_const(ROOTs),c.i32_mul(c.getLocal("s"),c.i32_const(n8f)))),c.setLocal("k",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_ge_u(c.getLocal("k"),c.getLocal("n"))),c.call(fPrefix+"_one",W),c.setLocal("mdiv2",c.i32_shr_u(c.getLocal("m"),c.i32_const(1))),c.setLocal("j",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_ge_u(c.getLocal("j"),c.getLocal("mdiv2"))),c.setLocal("idx1",c.i32_add(c.getLocal("px"),c.i32_mul(c.i32_add(c.getLocal("k"),c.getLocal("j")),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("idx1"),c.i32_mul(c.getLocal("mdiv2"),c.i32_const(n8g)))),c.call(opGtimesF,c.getLocal("idx2"),W,T),c.call(gPrefix+"_copy",c.getLocal("idx1"),U),c.call(gPrefix+"_add",U,T,c.getLocal("idx1")),c.call(gPrefix+"_sub",U,T,c.getLocal("idx2")),c.call(fPrefix+"_mul",W,c.getLocal("pwm"),W),c.setLocal("j",c.i32_add(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.setLocal("k",c.i32_add(c.getLocal("k"),c.getLocal("m"))),c.br(0))),c.setLocal("s",c.i32_add(c.getLocal("s"),c.i32_const(1))),c.br(0))),c.call(prefix+"__fftFinal",c.getLocal("px"),c.getLocal("bits"),c.getLocal("reverse"),c.getLocal("mulFactor")))}function buildFinalInverse(){let f=module.addFunction(prefix+"__fftFinal");f.addParam("px","i32"),f.addParam("bits","i32"),f.addParam("reverse","i32"),f.addParam("mulFactor","i32"),f.addLocal("n","i32"),f.addLocal("ndiv2","i32"),f.addLocal("pInv2","i32"),f.addLocal("i","i32"),f.addLocal("mask","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32");let c=f.getCodeBuilder(),T=c.i32_const(module.alloc(n8g));f.addCode(c.if(c.i32_and(c.i32_eqz(c.getLocal("reverse")),c.call(fPrefix+"_isOne",c.getLocal("mulFactor"))),c.ret([])),c.setLocal("n",c.i32_shl(c.i32_const(1),c.getLocal("bits"))),c.setLocal("mask",c.i32_sub(c.getLocal("n"),c.i32_const(1))),c.setLocal("i",c.i32_const(1)),c.setLocal("ndiv2",c.i32_shr_u(c.getLocal("n"),c.i32_const(1))),c.block(c.loop(c.br_if(1,c.i32_ge_u(c.getLocal("i"),c.getLocal("ndiv2"))),c.setLocal("idx1",c.i32_add(c.getLocal("px"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("px"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.getLocal("i")),c.i32_const(n8g)))),c.if(c.getLocal("reverse"),c.if(c.call(fPrefix+"_isOne",c.getLocal("mulFactor")),[...c.call(gPrefix+"_copy",c.getLocal("idx1"),T),...c.call(gPrefix+"_copy",c.getLocal("idx2"),c.getLocal("idx1")),...c.call(gPrefix+"_copy",T,c.getLocal("idx2"))],[...c.call(gPrefix+"_copy",c.getLocal("idx1"),T),...c.call(opGtimesF,c.getLocal("idx2"),c.getLocal("mulFactor"),c.getLocal("idx1")),...c.call(opGtimesF,T,c.getLocal("mulFactor"),c.getLocal("idx2"))]),c.if(c.call(fPrefix+"_isOne",c.getLocal("mulFactor")),[],[...c.call(opGtimesF,c.getLocal("idx1"),c.getLocal("mulFactor"),c.getLocal("idx1")),...c.call(opGtimesF,c.getLocal("idx2"),c.getLocal("mulFactor"),c.getLocal("idx2"))])),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.if(c.call(fPrefix+"_isOne",c.getLocal("mulFactor")),[],[...c.call(opGtimesF,c.getLocal("px"),c.getLocal("mulFactor"),c.getLocal("px")),...c.setLocal("idx2",c.i32_add(c.getLocal("px"),c.i32_mul(c.getLocal("ndiv2"),c.i32_const(n8g)))),...c.call(opGtimesF,c.getLocal("idx2"),c.getLocal("mulFactor"),c.getLocal("idx2"))]))}function buildReversePermutation(){let f=module.addFunction(prefix+"__reversePermutation");f.addParam("px","i32"),f.addParam("bits","i32"),f.addLocal("n","i32"),f.addLocal("i","i32"),f.addLocal("ri","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32");let c=f.getCodeBuilder(),T=c.i32_const(module.alloc(n8g));f.addCode(c.setLocal("n",c.i32_shl(c.i32_const(1),c.getLocal("bits"))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.setLocal("idx1",c.i32_add(c.getLocal("px"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.setLocal("ri",c.call(prefix+"__rev",c.getLocal("i"),c.getLocal("bits"))),c.setLocal("idx2",c.i32_add(c.getLocal("px"),c.i32_mul(c.getLocal("ri"),c.i32_const(n8g)))),c.if(c.i32_lt_u(c.getLocal("i"),c.getLocal("ri")),[...c.call(gPrefix+"_copy",c.getLocal("idx1"),T),...c.call(gPrefix+"_copy",c.getLocal("idx2"),c.getLocal("idx1")),...c.call(gPrefix+"_copy",T,c.getLocal("idx2"))]),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildFFTJoin(){let f=module.addFunction(prefix+"_fftJoin");f.addParam("pBuff1","i32"),f.addParam("pBuff2","i32"),f.addParam("n","i32"),f.addParam("first","i32"),f.addParam("inc","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32"),f.addLocal("i","i32");let c=f.getCodeBuilder(),W=c.i32_const(module.alloc(n8f)),T=c.i32_const(module.alloc(n8g)),U=c.i32_const(module.alloc(n8g));f.addCode(c.call(fPrefix+"_copy",c.getLocal("first"),W),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.setLocal("idx1",c.i32_add(c.getLocal("pBuff1"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("pBuff2"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.call(opGtimesF,c.getLocal("idx2"),W,T),c.call(gPrefix+"_copy",c.getLocal("idx1"),U),c.call(gPrefix+"_add",U,T,c.getLocal("idx1")),c.call(gPrefix+"_sub",U,T,c.getLocal("idx2")),c.call(fPrefix+"_mul",W,c.getLocal("inc"),W),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildFFTJoinExt(){let f=module.addFunction(prefix+"_fftJoinExt");f.addParam("pBuff1","i32"),f.addParam("pBuff2","i32"),f.addParam("n","i32"),f.addParam("first","i32"),f.addParam("inc","i32"),f.addParam("totalBits","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32"),f.addLocal("i","i32"),f.addLocal("pShiftToM","i32");let c=f.getCodeBuilder(),W=c.i32_const(module.alloc(n8f)),U=c.i32_const(module.alloc(n8g));f.addCode(c.setLocal("pShiftToM",c.i32_add(c.i32_const(SHIFT_TO_M),c.i32_mul(c.getLocal("totalBits"),c.i32_const(n8f)))),c.call(fPrefix+"_copy",c.getLocal("first"),W),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.setLocal("idx1",c.i32_add(c.getLocal("pBuff1"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("pBuff2"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.call(gPrefix+"_add",c.getLocal("idx1"),c.getLocal("idx2"),U),c.call(opGtimesF,c.getLocal("idx2"),c.getLocal("pShiftToM"),c.getLocal("idx2")),c.call(gPrefix+"_add",c.getLocal("idx1"),c.getLocal("idx2"),c.getLocal("idx2")),c.call(opGtimesF,c.getLocal("idx2"),W,c.getLocal("idx2")),c.call(gPrefix+"_copy",U,c.getLocal("idx1")),c.call(fPrefix+"_mul",W,c.getLocal("inc"),W),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildFFTJoinExtInv(){let f=module.addFunction(prefix+"_fftJoinExtInv");f.addParam("pBuff1","i32"),f.addParam("pBuff2","i32"),f.addParam("n","i32"),f.addParam("first","i32"),f.addParam("inc","i32"),f.addParam("totalBits","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32"),f.addLocal("i","i32"),f.addLocal("pShiftToM","i32"),f.addLocal("pSConst","i32");let c=f.getCodeBuilder(),W=c.i32_const(module.alloc(n8f)),U=c.i32_const(module.alloc(n8g));f.addCode(c.setLocal("pShiftToM",c.i32_add(c.i32_const(SHIFT_TO_M),c.i32_mul(c.getLocal("totalBits"),c.i32_const(n8f)))),c.setLocal("pSConst",c.i32_add(c.i32_const(SCONST),c.i32_mul(c.getLocal("totalBits"),c.i32_const(n8f)))),c.call(fPrefix+"_copy",c.getLocal("first"),W),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.setLocal("idx1",c.i32_add(c.getLocal("pBuff1"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("pBuff2"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.call(opGtimesF,c.getLocal("idx2"),W,U),c.call(gPrefix+"_sub",c.getLocal("idx1"),U,c.getLocal("idx2")),c.call(opGtimesF,c.getLocal("idx2"),c.getLocal("pSConst"),c.getLocal("idx2")),c.call(opGtimesF,c.getLocal("idx1"),c.getLocal("pShiftToM"),c.getLocal("idx1")),c.call(gPrefix+"_sub",U,c.getLocal("idx1"),c.getLocal("idx1")),c.call(opGtimesF,c.getLocal("idx1"),c.getLocal("pSConst"),c.getLocal("idx1")),c.call(fPrefix+"_mul",W,c.getLocal("inc"),W),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildPrepareLagrangeEvaluation(){let f=module.addFunction(prefix+"_prepareLagrangeEvaluation");f.addParam("pBuff1","i32"),f.addParam("pBuff2","i32"),f.addParam("n","i32"),f.addParam("first","i32"),f.addParam("inc","i32"),f.addParam("totalBits","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32"),f.addLocal("i","i32"),f.addLocal("pShiftToM","i32"),f.addLocal("pSConst","i32");let c=f.getCodeBuilder(),W=c.i32_const(module.alloc(n8f)),U=c.i32_const(module.alloc(n8g));f.addCode(c.setLocal("pShiftToM",c.i32_add(c.i32_const(SHIFT_TO_M),c.i32_mul(c.getLocal("totalBits"),c.i32_const(n8f)))),c.setLocal("pSConst",c.i32_add(c.i32_const(SCONST),c.i32_mul(c.getLocal("totalBits"),c.i32_const(n8f)))),c.call(fPrefix+"_copy",c.getLocal("first"),W),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.setLocal("idx1",c.i32_add(c.getLocal("pBuff1"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("pBuff2"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.call(opGtimesF,c.getLocal("idx1"),c.getLocal("pShiftToM"),U),c.call(gPrefix+"_sub",c.getLocal("idx2"),U,U),c.call(gPrefix+"_sub",c.getLocal("idx1"),c.getLocal("idx2"),c.getLocal("idx2")),c.call(opGtimesF,U,c.getLocal("pSConst"),c.getLocal("idx1")),c.call(opGtimesF,c.getLocal("idx2"),W,c.getLocal("idx2")),c.call(fPrefix+"_mul",W,c.getLocal("inc"),W),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildFFTMix(){let f=module.addFunction(prefix+"_fftMix");f.addParam("pBuff","i32"),f.addParam("n","i32"),f.addParam("exp","i32"),f.addLocal("nGroups","i32"),f.addLocal("nPerGroup","i32"),f.addLocal("nPerGroupDiv2","i32"),f.addLocal("pairOffset","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32"),f.addLocal("i","i32"),f.addLocal("j","i32"),f.addLocal("pwm","i32");let c=f.getCodeBuilder(),W=c.i32_const(module.alloc(n8f)),T=c.i32_const(module.alloc(n8g)),U=c.i32_const(module.alloc(n8g));f.addCode(c.setLocal("nPerGroup",c.i32_shl(c.i32_const(1),c.getLocal("exp"))),c.setLocal("nPerGroupDiv2",c.i32_shr_u(c.getLocal("nPerGroup"),c.i32_const(1))),c.setLocal("nGroups",c.i32_shr_u(c.getLocal("n"),c.getLocal("exp"))),c.setLocal("pairOffset",c.i32_mul(c.getLocal("nPerGroupDiv2"),c.i32_const(n8g))),c.setLocal("pwm",c.i32_add(c.i32_const(ROOTs),c.i32_mul(c.getLocal("exp"),c.i32_const(n8f)))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("nGroups"))),c.call(fPrefix+"_one",W),c.setLocal("j",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("j"),c.getLocal("nPerGroupDiv2"))),c.setLocal("idx1",c.i32_add(c.getLocal("pBuff"),c.i32_mul(c.i32_add(c.i32_mul(c.getLocal("i"),c.getLocal("nPerGroup")),c.getLocal("j")),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("idx1"),c.getLocal("pairOffset"))),c.call(opGtimesF,c.getLocal("idx2"),W,T),c.call(gPrefix+"_copy",c.getLocal("idx1"),U),c.call(gPrefix+"_add",U,T,c.getLocal("idx1")),c.call(gPrefix+"_sub",U,T,c.getLocal("idx2")),c.call(fPrefix+"_mul",W,c.getLocal("pwm"),W),c.setLocal("j",c.i32_add(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}function buildFFTFinal(){let f=module.addFunction(prefix+"_fftFinal");f.addParam("pBuff","i32"),f.addParam("n","i32"),f.addParam("factor","i32"),f.addLocal("idx1","i32"),f.addLocal("idx2","i32"),f.addLocal("i","i32"),f.addLocal("ndiv2","i32");let c=f.getCodeBuilder(),T=c.i32_const(module.alloc(n8g));f.addCode(c.setLocal("ndiv2",c.i32_shr_u(c.getLocal("n"),c.i32_const(1))),c.if(c.i32_and(c.getLocal("n"),c.i32_const(1)),c.call(opGtimesF,c.i32_add(c.getLocal("pBuff"),c.i32_mul(c.getLocal("ndiv2"),c.i32_const(n8g))),c.getLocal("factor"),c.i32_add(c.getLocal("pBuff"),c.i32_mul(c.getLocal("ndiv2"),c.i32_const(n8g))))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_ge_u(c.getLocal("i"),c.getLocal("ndiv2"))),c.setLocal("idx1",c.i32_add(c.getLocal("pBuff"),c.i32_mul(c.getLocal("i"),c.i32_const(n8g)))),c.setLocal("idx2",c.i32_add(c.getLocal("pBuff"),c.i32_mul(c.i32_sub(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.getLocal("i")),c.i32_const(n8g)))),c.call(opGtimesF,c.getLocal("idx2"),c.getLocal("factor"),T),c.call(opGtimesF,c.getLocal("idx1"),c.getLocal("factor"),c.getLocal("idx2")),c.call(gPrefix+"_copy",T,c.getLocal("idx1")),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}(function(){let f=module.addFunction(prefix+"__rev");f.addParam("x","i32"),f.addParam("bits","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();f.addCode(c.i32_rotl(c.i32_add(c.i32_add(c.i32_shl(c.i32_load8_u(c.i32_and(c.getLocal("x"),c.i32_const(255)),REVTABLE,0),c.i32_const(24)),c.i32_shl(c.i32_load8_u(c.i32_and(c.i32_shr_u(c.getLocal("x"),c.i32_const(8)),c.i32_const(255)),REVTABLE,0),c.i32_const(16))),c.i32_add(c.i32_shl(c.i32_load8_u(c.i32_and(c.i32_shr_u(c.getLocal("x"),c.i32_const(16)),c.i32_const(255)),REVTABLE,0),c.i32_const(8)),c.i32_load8_u(c.i32_and(c.i32_shr_u(c.getLocal("x"),c.i32_const(24)),c.i32_const(255)),REVTABLE,0))),c.getLocal("bits")))})(),buildReversePermutation(),buildFinalInverse(),buildRawFFT(),buildLog2(),buildFFT(),buildIFFT(),buildFFTJoin(),buildFFTJoinExt(),buildFFTJoinExtInv(),buildFFTMix(),buildFFTFinal(),buildPrepareLagrangeEvaluation(),module.exportFunction(prefix+"_fft"),module.exportFunction(prefix+"_ifft"),module.exportFunction(prefix+"_rawfft"),module.exportFunction(prefix+"_fftJoin"),module.exportFunction(prefix+"_fftJoinExt"),module.exportFunction(prefix+"_fftJoinExtInv"),module.exportFunction(prefix+"_fftMix"),module.exportFunction(prefix+"_fftFinal"),module.exportFunction(prefix+"_prepareLagrangeEvaluation")}},947:function(module){module.exports=function(module,n64,_prefix){let prefix=_prefix||"int";if(module.modules[prefix])return prefix;module.modules[prefix]={};let n32=2*n64,n8=8*n64;function buildZero(){let f=module.addFunction(prefix+"_zero");f.addParam("pr","i32");let c=f.getCodeBuilder();for(let i=0;i<n64;i++)f.addCode(c.i64_store(c.getLocal("pr"),8*i,c.i64_const(0)))}function buildOne(){let f=module.addFunction(prefix+"_one");f.addParam("pr","i32");let c=f.getCodeBuilder();f.addCode(c.i64_store(c.getLocal("pr"),0,c.i64_const(1)));for(let i=1;i<n64;i++)f.addCode(c.i64_store(c.getLocal("pr"),8*i,c.i64_const(0)))}function buildIsZero(){let f=module.addFunction(prefix+"_isZero");f.addParam("px","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();function getCompCode(n){return 0==n?c.ret(c.i64_eqz(c.i64_load(c.getLocal("px")))):c.if(c.i64_eqz(c.i64_load(c.getLocal("px"),8*n)),getCompCode(n-1),c.ret(c.i32_const(0)))}f.addCode(getCompCode(n64-1)),f.addCode(c.ret(c.i32_const(0)))}function buildEq(){let f=module.addFunction(prefix+"_eq");f.addParam("px","i32"),f.addParam("py","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();function getCompCode(n){return 0==n?c.ret(c.i64_eq(c.i64_load(c.getLocal("px")),c.i64_load(c.getLocal("py")))):c.if(c.i64_eq(c.i64_load(c.getLocal("px"),8*n),c.i64_load(c.getLocal("py"),8*n)),getCompCode(n-1),c.ret(c.i32_const(0)))}f.addCode(getCompCode(n64-1)),f.addCode(c.ret(c.i32_const(0)))}function buildGte(){let f=module.addFunction(prefix+"_gte");f.addParam("px","i32"),f.addParam("py","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();function getCompCode(n){return 0==n?c.ret(c.i64_ge_u(c.i64_load(c.getLocal("px")),c.i64_load(c.getLocal("py")))):c.if(c.i64_lt_u(c.i64_load(c.getLocal("px"),8*n),c.i64_load(c.getLocal("py"),8*n)),c.ret(c.i32_const(0)),c.if(c.i64_gt_u(c.i64_load(c.getLocal("px"),8*n),c.i64_load(c.getLocal("py"),8*n)),c.ret(c.i32_const(1)),getCompCode(n-1)))}f.addCode(getCompCode(n64-1)),f.addCode(c.ret(c.i32_const(0)))}function buildAdd(){let f=module.addFunction(prefix+"_add");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32"),f.setReturnType("i32"),f.addLocal("c","i64");let c=f.getCodeBuilder();f.addCode(c.setLocal("c",c.i64_add(c.i64_load32_u(c.getLocal("x")),c.i64_load32_u(c.getLocal("y"))))),f.addCode(c.i64_store32(c.getLocal("r"),c.getLocal("c")));for(let i=1;i<n32;i++)f.addCode(c.setLocal("c",c.i64_add(c.i64_add(c.i64_load32_u(c.getLocal("x"),4*i),c.i64_load32_u(c.getLocal("y"),4*i)),c.i64_shr_u(c.getLocal("c"),c.i64_const(32))))),f.addCode(c.i64_store32(c.getLocal("r"),4*i,c.getLocal("c")));f.addCode(c.i32_wrap_i64(c.i64_shr_u(c.getLocal("c"),c.i64_const(32))))}function buildSub(){let f=module.addFunction(prefix+"_sub");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32"),f.setReturnType("i32"),f.addLocal("c","i64");let c=f.getCodeBuilder();f.addCode(c.setLocal("c",c.i64_sub(c.i64_load32_u(c.getLocal("x")),c.i64_load32_u(c.getLocal("y"))))),f.addCode(c.i64_store32(c.getLocal("r"),c.i64_and(c.getLocal("c"),c.i64_const("0xFFFFFFFF"))));for(let i=1;i<n32;i++)f.addCode(c.setLocal("c",c.i64_add(c.i64_sub(c.i64_load32_u(c.getLocal("x"),4*i),c.i64_load32_u(c.getLocal("y"),4*i)),c.i64_shr_s(c.getLocal("c"),c.i64_const(32))))),f.addCode(c.i64_store32(c.getLocal("r"),4*i,c.i64_and(c.getLocal("c"),c.i64_const("0xFFFFFFFF"))));f.addCode(c.i32_wrap_i64(c.i64_shr_s(c.getLocal("c"),c.i64_const(32))))}function buildMul(){let f=module.addFunction(prefix+"_mul");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32"),f.addLocal("c0","i64"),f.addLocal("c1","i64");for(let i=0;i<n32;i++)f.addLocal("x"+i,"i64"),f.addLocal("y"+i,"i64");let c=f.getCodeBuilder(),loadX=[],loadY=[];function mulij(i,j){let X,Y;return loadX[i]?X=c.getLocal("x"+i):(X=c.teeLocal("x"+i,c.i64_load32_u(c.getLocal("x"),4*i)),loadX[i]=!0),loadY[j]?Y=c.getLocal("y"+j):(Y=c.teeLocal("y"+j,c.i64_load32_u(c.getLocal("y"),4*j)),loadY[j]=!0),c.i64_mul(X,Y)}let c0="c0",c1="c1";for(let k=0;k<2*n32-1;k++){for(let i1=Math.max(0,k-n32+1);i1<=k&&i1<n32;i1++){let j=k-i1;f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulij(i1,j)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))}f.addCode(c.i64_store32(c.getLocal("r"),4*k,c.getLocal(c0))),[c0,c1]=[c1,c0],f.addCode(c.setLocal(c1,c.i64_shr_u(c.getLocal(c0),c.i64_const(32))))}f.addCode(c.i64_store32(c.getLocal("r"),8*n32-4,c.getLocal(c0)))}function buildSquare(){let f=module.addFunction(prefix+"_square");f.addParam("x","i32"),f.addParam("r","i32"),f.addLocal("c0","i64"),f.addLocal("c1","i64"),f.addLocal("c0_old","i64"),f.addLocal("c1_old","i64");for(let i=0;i<n32;i++)f.addLocal("x"+i,"i64");let c=f.getCodeBuilder(),loadX=[];function mulij(i,j){let X,Y;return loadX[i]?X=c.getLocal("x"+i):(X=c.teeLocal("x"+i,c.i64_load32_u(c.getLocal("x"),4*i)),loadX[i]=!0),loadX[j]?Y=c.getLocal("x"+j):(Y=c.teeLocal("x"+j,c.i64_load32_u(c.getLocal("x"),4*j)),loadX[j]=!0),c.i64_mul(X,Y)}let c0="c0",c1="c1",c0_old="c0_old",c1_old="c1_old";for(let k=0;k<2*n32-1;k++){f.addCode(c.setLocal(c0,c.i64_const(0)),c.setLocal(c1,c.i64_const(0)));for(let i1=Math.max(0,k-n32+1);i1<k+1>>1&&i1<n32;i1++){let j=k-i1;f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulij(i1,j)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))}f.addCode(c.setLocal(c0,c.i64_shl(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),c.i64_const(1)))),f.addCode(c.setLocal(c1,c.i64_add(c.i64_shl(c.getLocal(c1),c.i64_const(1)),c.i64_shr_u(c.getLocal(c0),c.i64_const(32))))),k%2==0&&(f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),mulij(k>>1,k>>1)))),f.addCode(c.setLocal(c1,c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32)))))),k>0&&(f.addCode(c.setLocal(c0,c.i64_add(c.i64_and(c.getLocal(c0),c.i64_const(4294967295)),c.i64_and(c.getLocal(c0_old),c.i64_const(4294967295))))),f.addCode(c.setLocal(c1,c.i64_add(c.i64_add(c.getLocal(c1),c.i64_shr_u(c.getLocal(c0),c.i64_const(32))),c.getLocal(c1_old))))),f.addCode(c.i64_store32(c.getLocal("r"),4*k,c.getLocal(c0))),f.addCode(c.setLocal(c0_old,c.getLocal(c1)),c.setLocal(c1_old,c.i64_shr_u(c.getLocal(c0_old),c.i64_const(32))))}f.addCode(c.i64_store32(c.getLocal("r"),8*n32-4,c.getLocal(c0_old)))}function buildSquareOld(){let f=module.addFunction(prefix+"_squareOld");f.addParam("x","i32"),f.addParam("r","i32");let c=f.getCodeBuilder();f.addCode(c.call(prefix+"_mul",c.getLocal("x"),c.getLocal("x"),c.getLocal("r")))}function _buildMul1(){let f=module.addFunction(prefix+"__mul1");f.addParam("px","i32"),f.addParam("y","i64"),f.addParam("pr","i32"),f.addLocal("c","i64");let c=f.getCodeBuilder();f.addCode(c.setLocal("c",c.i64_mul(c.i64_load32_u(c.getLocal("px"),0,0),c.getLocal("y")))),f.addCode(c.i64_store32(c.getLocal("pr"),0,0,c.getLocal("c")));for(let i=1;i<n32;i++)f.addCode(c.setLocal("c",c.i64_add(c.i64_mul(c.i64_load32_u(c.getLocal("px"),4*i,0),c.getLocal("y")),c.i64_shr_u(c.getLocal("c"),c.i64_const(32))))),f.addCode(c.i64_store32(c.getLocal("pr"),4*i,0,c.getLocal("c")))}function _buildAdd1(){let f=module.addFunction(prefix+"__add1");f.addParam("x","i32"),f.addParam("y","i64"),f.addLocal("c","i64"),f.addLocal("px","i32");let c=f.getCodeBuilder();f.addCode(c.setLocal("px",c.getLocal("x"))),f.addCode(c.setLocal("c",c.i64_add(c.i64_load32_u(c.getLocal("px"),0,0),c.getLocal("y")))),f.addCode(c.i64_store32(c.getLocal("px"),0,0,c.getLocal("c"))),f.addCode(c.setLocal("c",c.i64_shr_u(c.getLocal("c"),c.i64_const(32)))),f.addCode(c.block(c.loop(c.br_if(1,c.i64_eqz(c.getLocal("c"))),c.setLocal("px",c.i32_add(c.getLocal("px"),c.i32_const(4))),c.setLocal("c",c.i64_add(c.i64_load32_u(c.getLocal("px"),0,0),c.getLocal("c"))),c.i64_store32(c.getLocal("px"),0,0,c.getLocal("c")),c.setLocal("c",c.i64_shr_u(c.getLocal("c"),c.i64_const(32))),c.br(0))))}function buildDiv(){_buildMul1(),_buildAdd1();let f=module.addFunction(prefix+"_div");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("c","i32"),f.addParam("r","i32"),f.addLocal("rr","i32"),f.addLocal("cc","i32"),f.addLocal("eX","i32"),f.addLocal("eY","i32"),f.addLocal("sy","i64"),f.addLocal("sx","i64"),f.addLocal("ec","i32");let c=f.getCodeBuilder(),Y=c.i32_const(module.alloc(n8)),Caux=c.i32_const(module.alloc(n8)),Raux=c.i32_const(module.alloc(n8)),C=c.getLocal("cc"),R=c.getLocal("rr"),pr1=module.alloc(2*n8),R1=c.i32_const(pr1),R2=c.i32_const(pr1+n8);f.addCode(c.if(c.getLocal("c"),c.setLocal("cc",c.getLocal("c")),c.setLocal("cc",Caux))),f.addCode(c.if(c.getLocal("r"),c.setLocal("rr",c.getLocal("r")),c.setLocal("rr",Raux))),f.addCode(c.call(prefix+"_copy",c.getLocal("x"),R)),f.addCode(c.call(prefix+"_copy",c.getLocal("y"),Y)),f.addCode(c.call(prefix+"_zero",C)),f.addCode(c.call(prefix+"_zero",R1)),f.addCode(c.setLocal("eX",c.i32_const(n8-1))),f.addCode(c.setLocal("eY",c.i32_const(n8-1))),f.addCode(c.block(c.loop(c.br_if(1,c.i32_or(c.i32_load8_u(c.i32_add(Y,c.getLocal("eY")),0,0),c.i32_eq(c.getLocal("eY"),c.i32_const(3)))),c.setLocal("eY",c.i32_sub(c.getLocal("eY"),c.i32_const(1))),c.br(0)))),f.addCode(c.setLocal("sy",c.i64_add(c.i64_load32_u(c.i32_sub(c.i32_add(Y,c.getLocal("eY")),c.i32_const(3)),0,0),c.i64_const(1)))),f.addCode(c.if(c.i64_eq(c.getLocal("sy"),c.i64_const(1)),c.drop(c.i64_div_u(c.i64_const(0),c.i64_const(0))))),f.addCode(c.block(c.loop(c.block(c.loop(c.br_if(1,c.i32_or(c.i32_load8_u(c.i32_add(R,c.getLocal("eX")),0,0),c.i32_eq(c.getLocal("eX"),c.i32_const(7)))),c.setLocal("eX",c.i32_sub(c.getLocal("eX"),c.i32_const(1))),c.br(0))),c.setLocal("sx",c.i64_load(c.i32_sub(c.i32_add(R,c.getLocal("eX")),c.i32_const(7)),0,0)),c.setLocal("sx",c.i64_div_u(c.getLocal("sx"),c.getLocal("sy"))),c.setLocal("ec",c.i32_sub(c.i32_sub(c.getLocal("eX"),c.getLocal("eY")),c.i32_const(4))),c.block(c.loop(c.br_if(1,c.i32_and(c.i64_eqz(c.i64_and(c.getLocal("sx"),c.i64_const("0xFFFFFFFF00000000"))),c.i32_ge_s(c.getLocal("ec"),c.i32_const(0)))),c.setLocal("sx",c.i64_shr_u(c.getLocal("sx"),c.i64_const(8))),c.setLocal("ec",c.i32_add(c.getLocal("ec"),c.i32_const(1))),c.br(0))),c.if(c.i64_eqz(c.getLocal("sx")),[...c.br_if(2,c.i32_eqz(c.call(prefix+"_gte",R,Y))),...c.setLocal("sx",c.i64_const(1)),...c.setLocal("ec",c.i32_const(0))]),c.call(prefix+"__mul1",Y,c.getLocal("sx"),R2),c.drop(c.call(prefix+"_sub",R,c.i32_sub(R2,c.getLocal("ec")),R)),c.call(prefix+"__add1",c.i32_add(C,c.getLocal("ec")),c.getLocal("sx")),c.br(0))))}function buildInverseMod(){let f=module.addFunction(prefix+"_inverseMod");f.addParam("px","i32"),f.addParam("pm","i32"),f.addParam("pr","i32"),f.addLocal("t","i32"),f.addLocal("newt","i32"),f.addLocal("r","i32"),f.addLocal("qq","i32"),f.addLocal("qr","i32"),f.addLocal("newr","i32"),f.addLocal("swp","i32"),f.addLocal("x","i32"),f.addLocal("signt","i32"),f.addLocal("signnewt","i32"),f.addLocal("signx","i32");let c=f.getCodeBuilder(),aux1=c.i32_const(module.alloc(n8)),aux2=c.i32_const(module.alloc(n8)),aux3=c.i32_const(module.alloc(n8)),aux4=c.i32_const(module.alloc(n8)),aux5=c.i32_const(module.alloc(n8)),aux6=c.i32_const(module.alloc(n8)),mulBuff=c.i32_const(module.alloc(2*n8)),aux7=c.i32_const(module.alloc(n8));f.addCode(c.setLocal("t",aux1),c.call(prefix+"_zero",aux1),c.setLocal("signt",c.i32_const(0))),f.addCode(c.setLocal("r",aux2),c.call(prefix+"_copy",c.getLocal("pm"),aux2)),f.addCode(c.setLocal("newt",aux3),c.call(prefix+"_one",aux3),c.setLocal("signnewt",c.i32_const(0))),f.addCode(c.setLocal("newr",aux4),c.call(prefix+"_copy",c.getLocal("px"),aux4)),f.addCode(c.setLocal("qq",aux5)),f.addCode(c.setLocal("qr",aux6)),f.addCode(c.setLocal("x",aux7)),f.addCode(c.block(c.loop(c.br_if(1,c.call(prefix+"_isZero",c.getLocal("newr"))),c.call(prefix+"_div",c.getLocal("r"),c.getLocal("newr"),c.getLocal("qq"),c.getLocal("qr")),c.call(prefix+"_mul",c.getLocal("qq"),c.getLocal("newt"),mulBuff),c.if(c.getLocal("signt"),c.if(c.getLocal("signnewt"),c.if(c.call(prefix+"_gte",mulBuff,c.getLocal("t")),[...c.drop(c.call(prefix+"_sub",mulBuff,c.getLocal("t"),c.getLocal("x"))),...c.setLocal("signx",c.i32_const(0))],[...c.drop(c.call(prefix+"_sub",c.getLocal("t"),mulBuff,c.getLocal("x"))),...c.setLocal("signx",c.i32_const(1))]),[...c.drop(c.call(prefix+"_add",mulBuff,c.getLocal("t"),c.getLocal("x"))),...c.setLocal("signx",c.i32_const(1))]),c.if(c.getLocal("signnewt"),[...c.drop(c.call(prefix+"_add",mulBuff,c.getLocal("t"),c.getLocal("x"))),...c.setLocal("signx",c.i32_const(0))],c.if(c.call(prefix+"_gte",c.getLocal("t"),mulBuff),[...c.drop(c.call(prefix+"_sub",c.getLocal("t"),mulBuff,c.getLocal("x"))),...c.setLocal("signx",c.i32_const(0))],[...c.drop(c.call(prefix+"_sub",mulBuff,c.getLocal("t"),c.getLocal("x"))),...c.setLocal("signx",c.i32_const(1))]))),c.setLocal("swp",c.getLocal("t")),c.setLocal("t",c.getLocal("newt")),c.setLocal("newt",c.getLocal("x")),c.setLocal("x",c.getLocal("swp")),c.setLocal("signt",c.getLocal("signnewt")),c.setLocal("signnewt",c.getLocal("signx")),c.setLocal("swp",c.getLocal("r")),c.setLocal("r",c.getLocal("newr")),c.setLocal("newr",c.getLocal("qr")),c.setLocal("qr",c.getLocal("swp")),c.br(0)))),f.addCode(c.if(c.getLocal("signt"),c.drop(c.call(prefix+"_sub",c.getLocal("pm"),c.getLocal("t"),c.getLocal("pr"))),c.call(prefix+"_copy",c.getLocal("t"),c.getLocal("pr"))))}return function(){let f=module.addFunction(prefix+"_copy");f.addParam("px","i32"),f.addParam("pr","i32");let c=f.getCodeBuilder();for(let i=0;i<n64;i++)f.addCode(c.i64_store(c.getLocal("pr"),8*i,c.i64_load(c.getLocal("px"),8*i)))}(),buildZero(),buildIsZero(),buildOne(),buildEq(),buildGte(),buildAdd(),buildSub(),buildMul(),buildSquare(),buildSquareOld(),buildDiv(),buildInverseMod(),module.exportFunction(prefix+"_copy"),module.exportFunction(prefix+"_zero"),module.exportFunction(prefix+"_one"),module.exportFunction(prefix+"_isZero"),module.exportFunction(prefix+"_eq"),module.exportFunction(prefix+"_gte"),module.exportFunction(prefix+"_add"),module.exportFunction(prefix+"_sub"),module.exportFunction(prefix+"_mul"),module.exportFunction(prefix+"_square"),module.exportFunction(prefix+"_squareOld"),module.exportFunction(prefix+"_div"),module.exportFunction(prefix+"_inverseMod"),prefix}},6676:function(module){module.exports=function(module,prefix,fnName,opAdd,n8b){let n64g=module.modules[prefix].n64,n8g=8*n64g;function buildMutiexpChunk(){let f=module.addFunction(fnName+"_chunk");f.addParam("pBases","i32"),f.addParam("pScalars","i32"),f.addParam("scalarSize","i32"),f.addParam("n","i32"),f.addParam("startBit","i32"),f.addParam("chunkSize","i32"),f.addParam("pr","i32"),f.addLocal("nChunks","i32"),f.addLocal("itScalar","i32"),f.addLocal("endScalar","i32"),f.addLocal("itBase","i32"),f.addLocal("i","i32"),f.addLocal("j","i32"),f.addLocal("nTable","i32"),f.addLocal("pTable","i32"),f.addLocal("idx","i32"),f.addLocal("pIdxTable","i32");let c=f.getCodeBuilder();f.addCode(c.if(c.i32_eqz(c.getLocal("n")),[...c.call(prefix+"_zero",c.getLocal("pr")),...c.ret([])]),c.setLocal("nTable",c.i32_shl(c.i32_const(1),c.getLocal("chunkSize"))),c.setLocal("pTable",c.i32_load(c.i32_const(0))),c.i32_store(c.i32_const(0),c.i32_add(c.getLocal("pTable"),c.i32_mul(c.getLocal("nTable"),c.i32_const(n8g)))),c.setLocal("j",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("j"),c.getLocal("nTable"))),c.call(prefix+"_zero",c.i32_add(c.getLocal("pTable"),c.i32_mul(c.getLocal("j"),c.i32_const(n8g)))),c.setLocal("j",c.i32_add(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.setLocal("itBase",c.getLocal("pBases")),c.setLocal("itScalar",c.getLocal("pScalars")),c.setLocal("endScalar",c.i32_add(c.getLocal("pScalars"),c.i32_mul(c.getLocal("n"),c.getLocal("scalarSize")))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("itScalar"),c.getLocal("endScalar"))),c.setLocal("idx",c.call(fnName+"_getChunk",c.getLocal("itScalar"),c.getLocal("scalarSize"),c.getLocal("startBit"),c.getLocal("chunkSize"))),c.if(c.getLocal("idx"),[...c.setLocal("pIdxTable",c.i32_add(c.getLocal("pTable"),c.i32_mul(c.i32_sub(c.getLocal("idx"),c.i32_const(1)),c.i32_const(n8g)))),...c.call(opAdd,c.getLocal("pIdxTable"),c.getLocal("itBase"),c.getLocal("pIdxTable"))]),c.setLocal("itScalar",c.i32_add(c.getLocal("itScalar"),c.getLocal("scalarSize"))),c.setLocal("itBase",c.i32_add(c.getLocal("itBase"),c.i32_const(n8b))),c.br(0))),c.call(fnName+"_reduceTable",c.getLocal("pTable"),c.getLocal("chunkSize")),c.call(prefix+"_copy",c.getLocal("pTable"),c.getLocal("pr")),c.i32_store(c.i32_const(0),c.getLocal("pTable")))}function buildMultiexp(){let f=module.addFunction(fnName);f.addParam("pBases","i32"),f.addParam("pScalars","i32"),f.addParam("scalarSize","i32"),f.addParam("n","i32"),f.addParam("pr","i32"),f.addLocal("chunkSize","i32"),f.addLocal("nChunks","i32"),f.addLocal("itScalar","i32"),f.addLocal("endScalar","i32"),f.addLocal("itBase","i32"),f.addLocal("itBit","i32"),f.addLocal("i","i32"),f.addLocal("j","i32"),f.addLocal("nTable","i32"),f.addLocal("pTable","i32"),f.addLocal("idx","i32"),f.addLocal("pIdxTable","i32");let c=f.getCodeBuilder(),aux=c.i32_const(module.alloc(n8g)),pTSizes=module.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);f.addCode(c.call(prefix+"_zero",c.getLocal("pr")),c.if(c.i32_eqz(c.getLocal("n")),c.ret([])),c.setLocal("chunkSize",c.i32_load8_u(c.i32_clz(c.getLocal("n")),pTSizes)),c.setLocal("nChunks",c.i32_add(c.i32_div_u(c.i32_sub(c.i32_shl(c.getLocal("scalarSize"),c.i32_const(3)),c.i32_const(1)),c.getLocal("chunkSize")),c.i32_const(1))),c.setLocal("itBit",c.i32_mul(c.i32_sub(c.getLocal("nChunks"),c.i32_const(1)),c.getLocal("chunkSize"))),c.block(c.loop(c.br_if(1,c.i32_lt_s(c.getLocal("itBit"),c.i32_const(0))),c.if(c.i32_eqz(c.call(prefix+"_isZero",c.getLocal("pr"))),[...c.setLocal("j",c.i32_const(0)),...c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("j"),c.getLocal("chunkSize"))),c.call(prefix+"_double",c.getLocal("pr"),c.getLocal("pr")),c.setLocal("j",c.i32_add(c.getLocal("j"),c.i32_const(1))),c.br(0)))]),c.call(fnName+"_chunk",c.getLocal("pBases"),c.getLocal("pScalars"),c.getLocal("scalarSize"),c.getLocal("n"),c.getLocal("itBit"),c.getLocal("chunkSize"),aux),c.call(prefix+"_add",c.getLocal("pr"),aux,c.getLocal("pr")),c.setLocal("itBit",c.i32_sub(c.getLocal("itBit"),c.getLocal("chunkSize"))),c.br(0))))}function buildReduceTable(){let f=module.addFunction(fnName+"_reduceTable");f.addParam("pTable","i32"),f.addParam("p","i32"),f.addLocal("half","i32"),f.addLocal("it1","i32"),f.addLocal("it2","i32"),f.addLocal("pAcc","i32");let c=f.getCodeBuilder();f.addCode(c.if(c.i32_eq(c.getLocal("p"),c.i32_const(1)),c.ret([])),c.setLocal("half",c.i32_shl(c.i32_const(1),c.i32_sub(c.getLocal("p"),c.i32_const(1)))),c.setLocal("it1",c.getLocal("pTable")),c.setLocal("it2",c.i32_add(c.getLocal("pTable"),c.i32_mul(c.getLocal("half"),c.i32_const(n8g)))),c.setLocal("pAcc",c.i32_sub(c.getLocal("it2"),c.i32_const(n8g))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("it1"),c.getLocal("pAcc"))),c.call(prefix+"_add",c.getLocal("it1"),c.getLocal("it2"),c.getLocal("it1")),c.call(prefix+"_add",c.getLocal("pAcc"),c.getLocal("it2"),c.getLocal("pAcc")),c.setLocal("it1",c.i32_add(c.getLocal("it1"),c.i32_const(n8g))),c.setLocal("it2",c.i32_add(c.getLocal("it2"),c.i32_const(n8g))),c.br(0))),c.call(fnName+"_reduceTable",c.getLocal("pTable"),c.i32_sub(c.getLocal("p"),c.i32_const(1))),c.setLocal("p",c.i32_sub(c.getLocal("p"),c.i32_const(1))),c.block(c.loop(c.br_if(1,c.i32_eqz(c.getLocal("p"))),c.call(prefix+"_double",c.getLocal("pAcc"),c.getLocal("pAcc")),c.setLocal("p",c.i32_sub(c.getLocal("p"),c.i32_const(1))),c.br(0))),c.call(prefix+"_add",c.getLocal("pTable"),c.getLocal("pAcc"),c.getLocal("pTable")))}(function(){let f=module.addFunction(fnName+"_getChunk");f.addParam("pScalar","i32"),f.addParam("scalarSize","i32"),f.addParam("startBit","i32"),f.addParam("chunkSize","i32"),f.addLocal("bitsToEnd","i32"),f.addLocal("mask","i32"),f.setReturnType("i32");let c=f.getCodeBuilder();f.addCode(c.setLocal("bitsToEnd",c.i32_sub(c.i32_mul(c.getLocal("scalarSize"),c.i32_const(8)),c.getLocal("startBit"))),c.if(c.i32_gt_s(c.getLocal("chunkSize"),c.getLocal("bitsToEnd")),c.setLocal("mask",c.i32_sub(c.i32_shl(c.i32_const(1),c.getLocal("bitsToEnd")),c.i32_const(1))),c.setLocal("mask",c.i32_sub(c.i32_shl(c.i32_const(1),c.getLocal("chunkSize")),c.i32_const(1)))),c.i32_and(c.i32_shr_u(c.i32_load(c.i32_add(c.getLocal("pScalar"),c.i32_shr_u(c.getLocal("startBit"),c.i32_const(3))),0,0),c.i32_and(c.getLocal("startBit"),c.i32_const(7))),c.getLocal("mask")))})(),buildReduceTable(),buildMutiexpChunk(),buildMultiexp(),module.exportFunction(fnName),module.exportFunction(fnName+"_chunk")}},3234:function(module){module.exports=function(module,prefix,prefixField){let n64=module.modules[prefixField].n64,n8=8*n64;function buildConstructLC(){let f=module.addFunction(prefix+"_constructLC");f.addParam("ppolynomials","i32"),f.addParam("psignals","i32"),f.addParam("nSignals","i32"),f.addParam("pres","i32"),f.addLocal("i","i32"),f.addLocal("j","i32"),f.addLocal("pp","i32"),f.addLocal("ps","i32"),f.addLocal("pd","i32"),f.addLocal("ncoefs","i32");let c=f.getCodeBuilder(),aux=c.i32_const(module.alloc(n8));f.addCode(c.setLocal("i",c.i32_const(0)),c.setLocal("pp",c.getLocal("ppolynomials")),c.setLocal("ps",c.getLocal("psignals")),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("nSignals"))),c.setLocal("ncoefs",c.i32_load(c.getLocal("pp"))),c.setLocal("pp",c.i32_add(c.getLocal("pp"),c.i32_const(4))),c.setLocal("j",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("j"),c.getLocal("ncoefs"))),c.setLocal("pd",c.i32_add(c.getLocal("pres"),c.i32_mul(c.i32_load(c.getLocal("pp")),c.i32_const(n8)))),c.setLocal("pp",c.i32_add(c.getLocal("pp"),c.i32_const(4))),c.call(prefixField+"_mul",c.getLocal("ps"),c.getLocal("pp"),aux),c.call(prefixField+"_add",aux,c.getLocal("pd"),c.getLocal("pd")),c.setLocal("pp",c.i32_add(c.getLocal("pp"),c.i32_const(n8))),c.setLocal("j",c.i32_add(c.getLocal("j"),c.i32_const(1))),c.br(0))),c.setLocal("ps",c.i32_add(c.getLocal("ps"),c.i32_const(n8))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}return function(){let f=module.addFunction(prefix+"_zero");f.addParam("px","i32"),f.addParam("n","i32"),f.addLocal("lastp","i32"),f.addLocal("p","i32");let c=f.getCodeBuilder();f.addCode(c.setLocal("p",c.getLocal("px")),c.setLocal("lastp",c.i32_add(c.getLocal("px"),c.i32_mul(c.getLocal("n"),c.i32_const(n8)))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("p"),c.getLocal("lastp"))),c.call(prefixField+"_zero",c.getLocal("p")),c.setLocal("p",c.i32_add(c.getLocal("p"),c.i32_const(n8))),c.br(0))))}(),buildConstructLC(),module.exportFunction(prefix+"_zero"),module.exportFunction(prefix+"_constructLC"),prefix}},2217:function(module){module.exports=function(module,prefix,prefixField){let n64=module.modules[prefixField].n64,n8=8*n64;function buildJoinABC(){let f=module.addFunction(prefix+"_joinABC");f.addParam("pA","i32"),f.addParam("pB","i32"),f.addParam("pC","i32"),f.addParam("n","i32"),f.addParam("pP","i32"),f.addLocal("ita","i32"),f.addLocal("itb","i32"),f.addLocal("itc","i32"),f.addLocal("itp","i32"),f.addLocal("last","i32");let c=f.getCodeBuilder(),aux=c.i32_const(module.alloc(n8));f.addCode(c.setLocal("ita",c.getLocal("pA")),c.setLocal("itb",c.getLocal("pB")),c.setLocal("itc",c.getLocal("pC")),c.setLocal("itp",c.getLocal("pP")),c.setLocal("last",c.i32_add(c.getLocal("pA"),c.i32_mul(c.getLocal("n"),c.i32_const(n8)))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("ita"),c.getLocal("last"))),c.call(prefixField+"_mul",c.getLocal("ita"),c.getLocal("itb"),aux),c.call(prefixField+"_sub",aux,c.getLocal("itc"),c.getLocal("itp")),c.setLocal("ita",c.i32_add(c.getLocal("ita"),c.i32_const(n8))),c.setLocal("itb",c.i32_add(c.getLocal("itb"),c.i32_const(n8))),c.setLocal("itc",c.i32_add(c.getLocal("itc"),c.i32_const(n8))),c.setLocal("itp",c.i32_add(c.getLocal("itp"),c.i32_const(n8))),c.br(0))))}function buildBatchAdd(){let f=module.addFunction(prefix+"_batchAdd");f.addParam("pa","i32"),f.addParam("pb","i32"),f.addParam("n","i32"),f.addParam("pr","i32"),f.addLocal("ita","i32"),f.addLocal("itb","i32"),f.addLocal("itr","i32"),f.addLocal("last","i32");let c=f.getCodeBuilder();f.addCode(c.setLocal("ita",c.getLocal("pa")),c.setLocal("itb",c.getLocal("pb")),c.setLocal("itr",c.getLocal("pr")),c.setLocal("last",c.i32_add(c.getLocal("pa"),c.i32_mul(c.getLocal("n"),c.i32_const(n8)))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("ita"),c.getLocal("last"))),c.call(prefixField+"_add",c.getLocal("ita"),c.getLocal("itb"),c.getLocal("itr")),c.setLocal("ita",c.i32_add(c.getLocal("ita"),c.i32_const(n8))),c.setLocal("itb",c.i32_add(c.getLocal("itb"),c.i32_const(n8))),c.setLocal("itr",c.i32_add(c.getLocal("itr"),c.i32_const(n8))),c.br(0))))}return function(){let f=module.addFunction(prefix+"_buildABC");f.addParam("pCoefs","i32"),f.addParam("nCoefs","i32"),f.addParam("pWitness","i32"),f.addParam("pA","i32"),f.addParam("pB","i32"),f.addParam("pC","i32"),f.addParam("offsetOut","i32"),f.addParam("nOut","i32"),f.addParam("offsetWitness","i32"),f.addParam("nWitness","i32"),f.addLocal("it","i32"),f.addLocal("ita","i32"),f.addLocal("itb","i32"),f.addLocal("last","i32"),f.addLocal("m","i32"),f.addLocal("c","i32"),f.addLocal("s","i32"),f.addLocal("pOut","i32");let c=f.getCodeBuilder(),aux=c.i32_const(module.alloc(n8));f.addCode(c.setLocal("ita",c.getLocal("pA")),c.setLocal("itb",c.getLocal("pB")),c.setLocal("last",c.i32_add(c.getLocal("pA"),c.i32_mul(c.getLocal("nOut"),c.i32_const(n8)))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("ita"),c.getLocal("last"))),c.call(prefixField+"_zero",c.getLocal("ita")),c.call(prefixField+"_zero",c.getLocal("itb")),c.setLocal("ita",c.i32_add(c.getLocal("ita"),c.i32_const(n8))),c.setLocal("itb",c.i32_add(c.getLocal("itb"),c.i32_const(n8))),c.br(0))),c.setLocal("it",c.getLocal("pCoefs")),c.setLocal("last",c.i32_add(c.getLocal("pCoefs"),c.i32_mul(c.getLocal("nCoefs"),c.i32_const(n8+12)))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("it"),c.getLocal("last"))),c.setLocal("s",c.i32_load(c.getLocal("it"),8)),c.if(c.i32_or(c.i32_lt_u(c.getLocal("s"),c.getLocal("offsetWitness")),c.i32_ge_u(c.getLocal("s"),c.i32_add(c.getLocal("offsetWitness"),c.getLocal("nWitness")))),[...c.setLocal("it",c.i32_add(c.getLocal("it"),c.i32_const(n8+12))),...c.br(1)]),c.setLocal("m",c.i32_load(c.getLocal("it"))),c.if(c.i32_eq(c.getLocal("m"),c.i32_const(0)),c.setLocal("pOut",c.getLocal("pA")),c.if(c.i32_eq(c.getLocal("m"),c.i32_const(1)),c.setLocal("pOut",c.getLocal("pB")),[...c.setLocal("it",c.i32_add(c.getLocal("it"),c.i32_const(n8+12))),...c.br(1)])),c.setLocal("c",c.i32_load(c.getLocal("it"),4)),c.if(c.i32_or(c.i32_lt_u(c.getLocal("c"),c.getLocal("offsetOut")),c.i32_ge_u(c.getLocal("c"),c.i32_add(c.getLocal("offsetOut"),c.getLocal("nOut")))),[...c.setLocal("it",c.i32_add(c.getLocal("it"),c.i32_const(n8+12))),...c.br(1)]),c.setLocal("pOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("c"),c.getLocal("offsetOut")),c.i32_const(n8)))),c.call(prefixField+"_mul",c.i32_add(c.getLocal("pWitness"),c.i32_mul(c.i32_sub(c.getLocal("s"),c.getLocal("offsetWitness")),c.i32_const(n8))),c.i32_add(c.getLocal("it"),c.i32_const(12)),aux),c.call(prefixField+"_add",c.getLocal("pOut"),aux,c.getLocal("pOut")),c.setLocal("it",c.i32_add(c.getLocal("it"),c.i32_const(n8+12))),c.br(0))),c.setLocal("ita",c.getLocal("pA")),c.setLocal("itb",c.getLocal("pB")),c.setLocal("it",c.getLocal("pC")),c.setLocal("last",c.i32_add(c.getLocal("pA"),c.i32_mul(c.getLocal("nOut"),c.i32_const(n8)))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("ita"),c.getLocal("last"))),c.call(prefixField+"_mul",c.getLocal("ita"),c.getLocal("itb"),c.getLocal("it")),c.setLocal("ita",c.i32_add(c.getLocal("ita"),c.i32_const(n8))),c.setLocal("itb",c.i32_add(c.getLocal("itb"),c.i32_const(n8))),c.setLocal("it",c.i32_add(c.getLocal("it"),c.i32_const(n8))),c.br(0))))}(),buildJoinABC(),buildBatchAdd(),module.exportFunction(prefix+"_buildABC"),module.exportFunction(prefix+"_joinABC"),module.exportFunction(prefix+"_batchAdd"),prefix}},9809:function(module){module.exports=function(module,fnName,elementLen,opAB,opAA,opCopy,opInit){let f=module.addFunction(fnName);f.addParam("base","i32"),f.addParam("scalar","i32"),f.addParam("scalarLength","i32"),f.addParam("r","i32"),f.addLocal("i","i32"),f.addLocal("b","i32");let c=f.getCodeBuilder(),aux=c.i32_const(module.alloc(elementLen));function innerLoop(){let code=[];for(let i=0;i<8;i++)code.push(...c.call(opAA,c.getLocal("r"),c.getLocal("r")),...c.if(c.i32_ge_u(c.getLocal("b"),c.i32_const(128>>i)),[...c.setLocal("b",c.i32_sub(c.getLocal("b"),c.i32_const(128>>i))),...c.call(opAB,c.getLocal("r"),aux,c.getLocal("r"))]));return code}f.addCode(c.if(c.i32_eqz(c.getLocal("scalarLength")),[...c.call(opInit,c.getLocal("r")),...c.ret([])])),f.addCode(c.call(opCopy,c.getLocal("base"),aux)),f.addCode(c.call(opInit,c.getLocal("r"))),f.addCode(c.setLocal("i",c.getLocal("scalarLength"))),f.addCode(c.block(c.loop(c.setLocal("i",c.i32_sub(c.getLocal("i"),c.i32_const(1))),c.setLocal("b",c.i32_load8_u(c.i32_add(c.getLocal("scalar"),c.getLocal("i")))),...innerLoop(),c.br_if(1,c.i32_eqz(c.getLocal("i"))),c.br(0))))}},6263:function(module){module.exports=function(module,fnName,elementLen,opAB,opAA,opAmB,opCopy,opInit){let f=module.addFunction(fnName);f.addParam("base","i32"),f.addParam("scalar","i32"),f.addParam("scalarLength","i32"),f.addParam("r","i32"),f.addLocal("old0","i32"),f.addLocal("nbits","i32"),f.addLocal("i","i32"),f.addLocal("last","i32"),f.addLocal("cur","i32"),f.addLocal("carry","i32"),f.addLocal("p","i32");let c=f.getCodeBuilder(),aux=c.i32_const(module.alloc(elementLen));function getBit(IDX){return c.i32_and(c.i32_shr_u(c.i32_load(c.i32_add(c.getLocal("scalar"),c.i32_and(c.i32_shr_u(IDX,c.i32_const(3)),c.i32_const(4294967292)))),c.i32_and(IDX,c.i32_const(31))),c.i32_const(1))}function pushBit(b){return[...c.i32_store8(c.getLocal("p"),c.i32_const(b)),...c.setLocal("p",c.i32_add(c.getLocal("p"),c.i32_const(1)))]}f.addCode(c.if(c.i32_eqz(c.getLocal("scalarLength")),[...c.call(opInit,c.getLocal("r")),...c.ret([])]),c.setLocal("nbits",c.i32_shl(c.getLocal("scalarLength"),c.i32_const(3))),c.setLocal("old0",c.i32_load(c.i32_const(0))),c.setLocal("p",c.getLocal("old0")),c.i32_store(c.i32_const(0),c.i32_and(c.i32_add(c.i32_add(c.getLocal("old0"),c.i32_const(32)),c.getLocal("nbits")),c.i32_const(4294967288))),c.setLocal("i",c.i32_const(1)),c.setLocal("last",getBit(c.i32_const(0))),c.setLocal("carry",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("nbits"))),c.setLocal("cur",getBit(c.getLocal("i"))),c.if(c.getLocal("last"),c.if(c.getLocal("cur"),c.if(c.getLocal("carry"),[...c.setLocal("last",c.i32_const(0)),...c.setLocal("carry",c.i32_const(1)),...pushBit(1)],[...c.setLocal("last",c.i32_const(0)),...c.setLocal("carry",c.i32_const(1)),...pushBit(255)]),c.if(c.getLocal("carry"),[...c.setLocal("last",c.i32_const(0)),...c.setLocal("carry",c.i32_const(1)),...pushBit(255)],[...c.setLocal("last",c.i32_const(0)),...c.setLocal("carry",c.i32_const(0)),...pushBit(1)])),c.if(c.getLocal("cur"),c.if(c.getLocal("carry"),[...c.setLocal("last",c.i32_const(0)),...c.setLocal("carry",c.i32_const(1)),...pushBit(0)],[...c.setLocal("last",c.i32_const(1)),...c.setLocal("carry",c.i32_const(0)),...pushBit(0)]),c.if(c.getLocal("carry"),[...c.setLocal("last",c.i32_const(1)),...c.setLocal("carry",c.i32_const(0)),...pushBit(0)],[...c.setLocal("last",c.i32_const(0)),...c.setLocal("carry",c.i32_const(0)),...pushBit(0)]))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))),c.if(c.getLocal("last"),c.if(c.getLocal("carry"),[...pushBit(255),...pushBit(0),...pushBit(1)],[...pushBit(1)]),c.if(c.getLocal("carry"),[...pushBit(0),...pushBit(1)])),c.setLocal("p",c.i32_sub(c.getLocal("p"),c.i32_const(1))),c.call(opCopy,c.getLocal("base"),aux),c.call(opInit,c.getLocal("r")),c.block(c.loop(c.call(opAA,c.getLocal("r"),c.getLocal("r")),c.setLocal("cur",c.i32_load8_u(c.getLocal("p"))),c.if(c.getLocal("cur"),c.if(c.i32_eq(c.getLocal("cur"),c.i32_const(1)),c.call(opAB,c.getLocal("r"),aux,c.getLocal("r")),c.call(opAmB,c.getLocal("r"),aux,c.getLocal("r")))),c.br_if(1,c.i32_eq(c.getLocal("old0"),c.getLocal("p"))),c.setLocal("p",c.i32_sub(c.getLocal("p"),c.i32_const(1))),c.br(0))),c.i32_store(c.i32_const(0),c.getLocal("old0")))}},5830:function(__unused_webpack_module,exports){exports.bigInt2BytesLE=function(_a,len){let b=Array(len),v=BigInt(_a);for(let i=0;i<len;i++)b[i]=Number(255n&v),v>>=8n;return b},exports.bigInt2U32LE=function(_a,len){let b=Array(len),v=BigInt(_a);for(let i=0;i<len;i++)b[i]=Number(4294967295n&v),v>>=32n;return b},exports.isOcamNum=function(a){return!!(Array.isArray(a)&&3==a.length&&"number"==typeof a[0]&&"number"==typeof a[1]&&Array.isArray(a[2]))}},8188:function(module){module.exports=Worker},9565:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var forEach=__webpack_require__(3243),availableTypedArrays=__webpack_require__(2191),callBound=__webpack_require__(2680),$toString=callBound("Object.prototype.toString"),hasToStringTag=__webpack_require__(7226)(),g="undefined"==typeof globalThis?__webpack_require__.g:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),toStrTags={},gOPD=__webpack_require__(9765),getPrototypeOf=Object.getPrototypeOf;hasToStringTag&&gOPD&&getPrototypeOf&&forEach(typedArrays,function(typedArray){if("function"==typeof g[typedArray]){var arr=new g[typedArray];if(Symbol.toStringTag in arr){var proto=getPrototypeOf(arr),descriptor=gOPD(proto,Symbol.toStringTag);descriptor||(descriptor=gOPD(getPrototypeOf(proto),Symbol.toStringTag)),toStrTags[typedArray]=descriptor.get}}});var tryTypedArrays=function(value){var foundName=!1;return forEach(toStrTags,function(getter,typedArray){if(!foundName)try{var name=getter.call(value);name===typedArray&&(foundName=name)}catch(e){}}),foundName},isTypedArray=__webpack_require__(198);module.exports=function(value){return!!isTypedArray(value)&&(hasToStringTag&&Symbol.toStringTag in value?tryTypedArrays(value):$slice($toString(value),8,-1))}},2191:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g="undefined"==typeof globalThis?__webpack_require__.g:globalThis;module.exports=function(){for(var out=[],i=0;i<possibleNames.length;i++)"function"==typeof g[possibleNames[i]]&&(out[out.length]=possibleNames[i]);return out}},9765:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var $gOPD=__webpack_require__(7286)("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch(e){$gOPD=null}module.exports=$gOPD},7981:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";/**
 * @module @zk-kit/incremental-merkle-tree
 * @version 1.1.0
 * @file Incremental Merkle tree implementation in TypeScript.
 * @copyright Cedoor 2023
 * @license MIT
 * @see [Github]{@link https://github.com/privacy-scaling-explorations/zk-kit/tree/main/packages/incremental-merkle-tree}
*/ function checkParameter(value,name){for(var types=[],_i=2;_i<arguments.length;_i++)types[_i-2]=arguments[_i];if(void 0===value)throw TypeError("Parameter '".concat(name,"' is not defined"));if(!types.includes(typeof value))throw TypeError("Parameter '".concat(name,"' is none of these types: ").concat(types.join(", ")))}function createProof(index,depth,arity,nodes,zeroes,root){if(checkParameter(index,"index","number"),index<0||index>=nodes[0].length)throw Error("The leaf does not exist in this tree");for(var siblings=[],pathIndices=[],leafIndex=index,level=0;level<depth;level+=1){var position=index%arity,levelStartIndex=index-position,levelEndIndex=levelStartIndex+arity;pathIndices[level]=position,siblings[level]=[];for(var i=levelStartIndex;i<levelEndIndex;i+=1)i!==index&&(i<nodes[level].length?siblings[level].push(nodes[level][i]):siblings[level].push(zeroes[level]));index=Math.floor(index/arity)}return{root:root,leaf:nodes[0][leafIndex],pathIndices:pathIndices,siblings:siblings}}function indexOf(leaf,nodes){return checkParameter(leaf,"leaf","number","string","bigint"),nodes[0].indexOf(leaf)}function insert(leaf,depth,arity,nodes,zeroes,hash){if(checkParameter(leaf,"leaf","number","string","bigint"),nodes[0].length>=Math.pow(arity,depth))throw Error("The tree is full");for(var node=leaf,index=nodes[0].length,level=0;level<depth;level+=1){var position=index%arity,levelStartIndex=index-position,levelEndIndex=levelStartIndex+arity,children=[];nodes[level][index]=node;for(var i=levelStartIndex;i<levelEndIndex;i+=1)i<nodes[level].length?children.push(nodes[level][i]):children.push(zeroes[level]);node=hash(children),index=Math.floor(index/arity)}return node}function update(index,value,depth,arity,nodes,zeroes,hash){if(checkParameter(index,"index","number"),index<0||index>=nodes[0].length)throw Error("The leaf does not exist in this tree");for(var node=value,level=0;level<depth;level+=1){var position=index%arity,levelStartIndex=index-position,levelEndIndex=levelStartIndex+arity,children=[];nodes[level][index]=node;for(var i=levelStartIndex;i<levelEndIndex;i+=1)i<nodes[level].length?children.push(nodes[level][i]):children.push(zeroes[level]);node=hash(children),index=Math.floor(index/arity)}return node}function verifyProof(proof,hash){checkParameter(proof,"proof","object"),checkParameter(proof.root,"proof.root","number","string","bigint"),checkParameter(proof.leaf,"proof.leaf","number","string","bigint"),checkParameter(proof.siblings,"proof.siblings","object"),checkParameter(proof.pathIndices,"proof.pathElements","object");for(var node=proof.leaf,i=0;i<proof.siblings.length;i+=1){var children=proof.siblings[i].slice();children.splice(proof.pathIndices[i],0,node),node=hash(children)}return proof.root===node}__webpack_require__.d(__webpack_exports__,{Z:function(){return Group}});var IncrementalMerkleTree=function(){function IncrementalMerkleTree(hash,depth,zeroValue,arity,leaves){if(void 0===arity&&(arity=2),void 0===leaves&&(leaves=[]),checkParameter(hash,"hash","function"),checkParameter(depth,"depth","number"),checkParameter(zeroValue,"zeroValue","number","string","bigint"),checkParameter(arity,"arity","number"),checkParameter(leaves,"leaves","object"),depth<1||depth>IncrementalMerkleTree.maxDepth)throw Error("The tree depth must be between 1 and 32");if(leaves.length>Math.pow(arity,depth))throw Error("The tree cannot contain more than ".concat(Math.pow(arity,depth)," leaves"));this._hash=hash,this._depth=depth,this._zeroes=[],this._nodes=[],this._arity=arity;for(var _a,level=0;level<depth;level+=1)this._zeroes.push(zeroValue),this._nodes[level]=[],zeroValue=hash(Array(this._arity).fill(zeroValue));if(this._nodes[depth]=[],leaves.length>0){this._nodes[0]=leaves;for(var level=0;level<depth;level+=1)for(var index=0;index<Math.ceil(this._nodes[level].length/arity);index+=1){for(var position=index*arity,children=[],i=0;i<arity;i+=1)children.push(null!==(_a=this._nodes[level][position+i])&&void 0!==_a?_a:this.zeroes[level]);this._nodes[level+1][index]=hash(children)}}else this._nodes[depth][0]=zeroValue;Object.freeze(this._zeroes),Object.freeze(this._nodes)}return Object.defineProperty(IncrementalMerkleTree.prototype,"root",{get:function(){return this._nodes[this.depth][0]},enumerable:!1,configurable:!0}),Object.defineProperty(IncrementalMerkleTree.prototype,"depth",{get:function(){return this._depth},enumerable:!1,configurable:!0}),Object.defineProperty(IncrementalMerkleTree.prototype,"leaves",{get:function(){return this._nodes[0].slice()},enumerable:!1,configurable:!0}),Object.defineProperty(IncrementalMerkleTree.prototype,"zeroes",{get:function(){return this._zeroes},enumerable:!1,configurable:!0}),Object.defineProperty(IncrementalMerkleTree.prototype,"arity",{get:function(){return this._arity},enumerable:!1,configurable:!0}),IncrementalMerkleTree.prototype.indexOf=function(leaf){return indexOf(leaf,this._nodes)},IncrementalMerkleTree.prototype.insert=function(leaf){this._nodes[this.depth][0]=insert(leaf,this.depth,this.arity,this._nodes,this.zeroes,this._hash)},IncrementalMerkleTree.prototype.delete=function(index){this._nodes[this.depth][0]=update(index,this.zeroes[0],this.depth,this.arity,this._nodes,this.zeroes,this._hash)},IncrementalMerkleTree.prototype.update=function(index,newLeaf){this._nodes[this.depth][0]=update(index,newLeaf,this.depth,this.arity,this._nodes,this.zeroes,this._hash)},IncrementalMerkleTree.prototype.createProof=function(index){return createProof(index,this.depth,this.arity,this._nodes,this.zeroes,this.root)},IncrementalMerkleTree.prototype.verifyProof=function(proof){return verifyProof(proof,this._hash)},IncrementalMerkleTree.maxDepth=32,IncrementalMerkleTree}(),bignumber=__webpack_require__(4997),lib_esm=__webpack_require__(5398),keccak256_lib_esm=__webpack_require__(9256),poseidon2$1={};let F=BigInt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),N_ROUNDS_F=8,N_ROUNDS_P=[56,57,56,60,60,63,64,63,60,66,60,65,70,60,64,68],pow5=v=>{let o=v*v;return v*o*o%F};function mix(state,M){let out=[];for(let x=0;x<state.length;x++){let o=0n;for(let y=0;y<state.length;y++)o+=M[x][y]*state[y];out.push(o%F)}return out}var poseidon_1=function(_inputs,opt){let inputs=_inputs.map(i=>BigInt(i));if(inputs.length<=0)throw Error("poseidon-lite: Not enough inputs");if(inputs.length>N_ROUNDS_P.length)throw Error("poseidon-lite: Too many inputs");let t=inputs.length+1,nRoundsF=N_ROUNDS_F,nRoundsP=N_ROUNDS_P[t-2],{C,M}=opt;if(M.length!==t)throw Error(`poseidon-lite: Incorrect M length, expected ${t} got ${M.length}`);let state=[0n,...inputs];for(let x=0;x<nRoundsF+nRoundsP;x++){for(let y=0;y<state.length;y++)state[y]=state[y]+C[x*t+y],x<nRoundsF/2||x>=nRoundsF/2+nRoundsP?state[y]=pow5(state[y]):0===y&&(state[y]=pow5(state[y]));state=mix(state,M)}return state[0]},unstringify={};function unstringifyBigInts(o){if(Array.isArray(o))return o.map(unstringifyBigInts);if("object"==typeof o){let res={};for(let[key,val]of Object.entries(o))res[key]=unstringifyBigInts(val);return res}let byteArray=Uint8Array.from(atob(o),c=>c.charCodeAt(0)),hex=[...byteArray].map(x=>x.toString(16).padStart(2,"0")).join("");return BigInt(`0x${hex}`)}Object.defineProperty(unstringify,"__esModule",{value:!0}),unstringify.default=unstringifyBigInts;var _2={};Object.defineProperty(_2,"__esModule",{value:!0}),_2.default=void 0;var _default={C:["DumlkrqalRjQWYbWVvQMIRTEmTwRuymTjSHUcwTNjm4=","APFEUjXyFIxZhlhxafwbzYh7CNTQCGjfVpb/9AlW6GQ=","CN/zSH6KyZ4fKaBY0PqAuTDHKHMLerNs6HnziQ7Pc/U=","Lye+aQ/a7kbDzij3UysTyFbDU0LIS9puIJZjEPrcAdA=","KyrhrPaLe40kFr6/PU9iNLdj/gS4BD7ki4MnvryhbPI=","AxnQYgcr737MperAb5fU1VlSwXWrawPq5ktEx9vxHPo=","KIE9yuuuqoKKN234evSmO8i3vyetScYpjvezh78oUm0=","JydnOyzLyQPxgb844cHUDSAzhlIAw1K8FQkord35y3g=","I07EXKJ3J8LnSr0rKhSUzW771D40BYfWuPueMeZcxjI=","FbUlNAMa4Y9/hiyyz3z3YKsQqBUKM3sczZn/boeX1Cg=","Dcj61tnks19e2aPRhrec444Oio0bWLEy1wHU7s9o0fY=","G82V/8IR+8pgD3BfrT+1Z+pOs3j2Lh/sl4BVGKR+TZw=","EFILCrchyt/p7/gbAW/DTcdto2wleJN4F8uXjQad5Vk=","H21IFJuOf32bJX2O1fu69CkySYB1/tCs6IqeuB9WJ/Y=","HZZV9lIwkBTSngDvNaIIm//43ByBbw3JyjS9tUYMhwU=","BN9aVv+VvK+wUfexzUOpm6cx/2fkcDIFj+PUGFaXzH0=","BnLZlfj/9kAVGz0pDO2vFIaQoQqMhCSn9uwoK25L6Cg=","CZlStBSIRFSyEgDX/6/dXwyancwG8nCOn8HYIJtcdbk=","BSy6IlXf0Ax8SDFDuo1GlEjkNYaptM2Rg/0OhDprn6Y=","C4ut7mkK246wvXRxK3mZr4LeVXByUa13Fgd8uTxGTdw=","EZsVkPEzB69aHuZRAgwHx0nBXWBoOoBQuWPQqOSyvdE=","AxULfNbV0XslKdNr4PZ7gyxKz8iE707lzhW+C/tKjQk=","LMYYLF4UVG488ZUfFzkSNVN077g9gImKvmnLMXyepWU=","AFAyVR5jeMRQz+EppASzdkIYyt7awU4rktLNcxEb8Pk=","IzI34yibqjS7FH6XLry5UWRpw5n8wGn7iPnaLMKCdrU=","Bcj09OvUpuPJgNMWdL++YyMDfyGzSuWk6AwtTCTWAoA=","CnsdsTBC05a6BdgYoxnyUlK8817zru2R7h8JslkPxls=","KnO3H5shDPWxQpZXLJ0y2/FW4rCG/0fcXfVCNlpATsA=","GsmwQXq8yaGTUQfp/8kdw+wY8sTb5/Ipdqdgu1xQxGA=","EsAzmuCDdII/q7B2cH70eSafPk1ssQQ0kBXuBG3JP8A=","C3R1sQKhZa1/WxjbTh5wT1KQCqMlO6rGgkZoLlbpoo4=","A3woSeGRyj7bHF5J9ui4kXyEPjeTZvLqMqs6qI1/hEg=","BaaBH4VW8BTpJnRmHiF+m9UgbFyToH3BRf2xdqcWNG8=","KaeV59mAKJRulHt11U6fBEB26Hp7KIO0e2de9fOL1m4=","IEOaDISzIutFo4V6/Bj1gm6Mc4LIoVhcUHvhmZgf0i8=","Lguo2U2ez0qU7CBQxzcf8btQ8neZqEttSipvKgmCyIc=","FD/RFc4I+yfKOOt8zoIrRReCLNIQkEjS5tDdzKF9ccg=","DGTL7LHHNLhXlo273PgTzfhhFlkyPby/yEMjYjvpyvE=","AoowWEfGg/ZG/KklwWP/WudPNI1iwrZw8UJs75QD2lM=","Lk71EP8Lb9pfqUCrTEOA8mpry2TYlCe4JNZ1W1254ww=","AIHJW8QzhOZj15JwyVbOO4kltPbQM7B4uWOE9QV5QA4=","LtXwyRy9l0kYfi+t5ofgXuJJGzScA5oLuoqfQCOguzg=","MFCZkfiNo1BLvzdO1ari8DRIoix2I0yMmQ8B8zpzUgY=","HD8g/VVAmlMiG3xNSaNWufChEZ+yBntBp1KQlEJOxq0=","ELTn86td8AMElRRFm24Y7sRrsiE+jhMeFwiHtH3cuWw=","KhmCl5w/9/Q93VQ9iRwqvd2A+ATAd9d1A5qjUC5Dre8=","HHTuZPFeHbb+3b6tVtbVXbpDHrw5bJr5XK0PExW9XJE=","B1M+yFC6f5jquTA8rOAbS55PLouCcIz6nC/kWgrhRqA=","IVdrQ45QBEmhUeTurxexVChcaPQtQsGAihGr83ZMB1A=","LxfAVZuP55YIrVyhk9YvELzoOEyBXwkGdD1pMINtSp4=","LUd+OGLQdwinnoqulGFwvJd1pCATGEdK5mWwsbficw4=","Fi9SQ5ZwZMOQ4JVXeYTyka+6ImbDj1q82Jvg9bJ0fqs=","K0yyM+3pukgmTs0siuUNGteoWWqH8p+Kd3enAJI5MxE=","LI+8st2Fc9wduvj0YihUd22y7s5thcTPQlTnw14DsHo=","HW80dyXkgWry/0U/DNVrGZ4bYen2Aemt5eiNuHCUnak=","IEsMOX9OvnHrwtiz31uRPfnmrAK2jTEyTNSa9cRWVSk=","DEy53DxP2BdPEUmzxjw8L57LgnzX3CVTT/j7dbx5xQI=","F0rWGhRIyJmiVBZHT0kwMB5cSUdSeeBjmmFt3EW8e1Q=","GpYXe89NjYn3Wd9OwvPN4uqqKMF3zA+hOpgW1Jo40u8=","Bm0EskMx1xzQ74BUvGDE/wUgLBJqIzwagkKs42C4owo=","KkxPxuwLDPUhlXgoccbdOzgcxl9y4CrVJwN6Yqob2AQ=","E6stE2zPN9RH6fLhSnztyV5yf4RG9tnX5Vr8ASGf1kk=","ESFVL8omBhYZ0k2EPcgnacGwT87Cb1UZTC4+hprMapo=","AO9lMyKxPWyIm8gXFcN9d6bNJn1ZXEqJCaVUbHyXz/E=","DiVIPkWmZSCLJh2Lp0BR5kAMd21lJZXZhFrKNdijl9M=","KfU23LnddoIkUmRlnhXYjjlaw9Td6S2MRkSNuXnuuok=","KlbvnyxT/rrf2jNXXb29iFoSTieAu+oXDkVrqs4Ppb4=","HINhx461z13s+3otF7XECfKuKZmkZ2Lo7kFiQKjLmvE=","FRr/XziyCg/ARzCJqvAga4Po5op2RQe/09CrS+dDGcU=","BMYYfkHtiB3BsjnIj3+dQ6n1L8jIts3R525HYVtR8QA=","E7N72A9NJ/sQ2EMx9vttU0uBxh7RV3ZEnoAbfdycKWc=","AaXFNic8LZ31eL+9MsF7eizjZkwqUgMskyHOscToqOQ=","KrNWGDTKc4Na0F9desuVC0qaLGZrlybagyI5Blt8OwI=","HU2OwpHnINsgD+bWhsDWE6yvavTpXTv2n37VFqWXtkY=","BBKU0sxITSKPV4T+eRn9K7klNRJAoEtxFRTJyAtlrx0=","FUrJjgFwjGEcT6cVmR8ASJj1eTnRJuOSBClx3ZDoH8Y=","CzOdisyn1Pg+7dhAk671EFCzaEyI+LCwRSRWO8bqTaQ=","CVXknmYQyUJUpPhM+6s0RZjw5x6v9Kfdge2VtQg5yC4=","BnRqYVbrpUQmueIiBvFavKmm9B5vU1xvNSVAHqBlRiY=","Dxj1oOzRQjxJbzggxUnCeDjleQ4r0KGWrJF8f/Mgd/s=","BPbuyhdR9zCKxZ7/W+smHku1Y1g+3nvJKnOCI9b3bhM=","K1aXM2TExPXBo+xNo83OA4gR6xFvs+RbwXaNJvwLN1g=","Ejdp3UnVsFTc12uJgEsby44TkrOFcWpdg/62XUN/Ke8=","IUe0JPxIyAqI7lK5EWmqzqmJ9kRkcRUJlCV7L7AcY+k=","D9wfWFSLhXAabFUF6jMqKWR+bzStQkPC6lStiXzr5U0=","Ejc6glH+oATfaKvPD3eG1Lzv8oxdu+DDlE9oXMCgsfI=","IeT06l81+FutfqUv90LJ6KZCdWtq9EID3YofNcGpADU=","FiQ5FtadLKPftHIiJNTEYrVzZkkvRekNioGTTxvDsUc=","HvvkbdeleLT2b5rbyItDeKvCFWbhoEU8oTpBWcrASsI=","B+pehTfPXdCIhgIOI6fzh9Ro1VJb5m+FO2csyWqIlpo=","BajE+ZaLiqO3tHijD5pbY2UPGadefOEcqf4WwLdsALw=","IPBXcSzCFlT7/lm9NF6NrD94GMcBuceILZ1Xtyoy6D8=","BKEu3tqd/WiWcvjGf+4xY23NjojQHUkBm9kLM+sz22k=","J+iNjBXzfc7kTx5UJaUd7L0TbOUJGmdn5J7JVEzNEBo=","L+7Re4QoXtm4pcjF6VpB9m4JZhmncDIjF2xB7kM95NE=","HtfMdu30XHxAQkFCD3Kc85TllCkRMSoNaXK4vVOv8rg=","FXQumbm/oyMVf/jFhvVmDqxng0dhRM3K3yh0vkVGaxo=","GqwoU4f2XoLIlfxoh930BXcQdFTG7AMXKE8DPyfQx4U=","JYUcPIRdR5D53a29tgVzV4MuLnpJd19x7HWpZVTWfHc=","FaWCFWXMLsLOeEV9sZft81O367osVSM3DdzMPZ8Uamc=","JBHVekgTuZgO+n4xodtZZtz2TzYEQndQLxVIXyjHFyc=","AC5vjWUgzUcT4zW4wLbS5kfpqY4S9M0lWIKLXvbLTJs=","L/e8j0OAzemX2gC2FrD80a+PDpHi/h7XOYg0YJ4DFdI=","ALmDG5SFJVle4CckRxvNGC6VIfa3u2jx6Tvk/rsNPL4=","Ci9TdouOv2qGkTsOV8BOARykCGSKR0OofXetvwycNRI=","ACSBVhQv0Dc6R5+R/yOelg9Zn/fpS+abfyopAwXhGY0=","Fx1WILh7+xMoz4wCqz8MmjlxlqpqVCwjUOtRKisrzak=","FwpPVVNvfclwCHx8ENb612DJUhct1U3ZnRBF5Ow0qAg=","KaujP3mf5mwu8xNK6gQzbsw344wc0hG6SC7KF+Lb+uE=","HpvBeaT911j90bsZRQiNR+cNEUoD9qDotbplA2nmSXM=","HdJpeZtmD61Y9/SJLfsLWv6q2GmpxLRPnJ4cQ72vjwk=","Is28i3ARetFAEYHQLhVFnnzNQm/oacfJXR3Syw8krzg=","DvBC5FR3HFM6n1elXFA/zv0xUPUu2Up81bqTucfazv0=","EWCeBq1sj+Lyh/MDYDfohRMY6LCKA1mgOzBP/KYugoQ=","EWbZ5VRhbbqedT7qQnwXt/7NWMB23+QnCLCPW3g6qa8=","LeUpiUMahZWTQTAmNUQT2xd/v0zSrAtW+FWoiDV+5GY=","MAbrT/x6hYGabaSS86isHfUa7lsXuOiddL8Bz19x6a0=","KvQfu2G6ioD9z2//nj9vQimT/o8KRjn5YjRMgiUUUIY=","EZ5oTeR2FV/lprQajryF24cYqyeInoXngbIUus5IJ8M=","GDW3huLokl4Yi+pZrjY1N7USSMI4KPBHz/eEuXs/2AA=","KCAaNMWU36NNeUmWxkM6INFSusKnkFySbEDihasy7rY=","CD79eifRdRCU6A/vr3iwAIZMgutXEYdySnYfiMIsxOc=","C2+Io1dxmVJhWOYc7qJ76BHBbfd3TdhRngeVZPYf0Ts=","Dsho5tFeUdlkT2bh1kcalFiVEcoA0p4QFDkObuQlT1s=","KvM+P4ZncScawMmz7S4RQuzT50uTnNQNANk3q4TJhZE=","C1ICEfkEtefQm12WHGrOdzRWjFR91oWLNkzl5HlR8Xg=","Cy1yLQkZoarY21jxAGKpLqDFasQnDoIsyiKGIBiKHUA=","H3kNTX+M8JTZgM6zfCRT6Ve1SpmRyji74AYdHtblYtQ=","AXHrld+/fR6uqXzThfeAFQiFwWI1oqao2pLOsB5QQjM=","DC0OO1/VdUkym/aIXaZrm3kLQN79LIZQdiMFOBsWiHM=","EWL7KGicJxVOWoIotOcrN3y8r6WJ4oPDXTgDBUQHoY0=","LxRZtl3uRBtkrThqkegxDygsWpKonhmSFiPvgklxG8A=","Hm/zIWtojD2ZbXQ2fVzUwbxInUZ1TrcSwkP3DRtTz7s=","AcqL5zgyuNBoFIfSfRV4AtdBpvNs3CoFdogfkyZHiHU=","H3c1cG/+n8WG+XbVvfIj3GgChggLEM6gC5td4xX5ZQ4=","JSK2D06jMHZAoMLc4EH7qSGsEKPV8JbvR0XKg4KF8Bk=","I/C+4AGxAp1SVQdd3JV/gzQYytT1K2w/jOFsI1VyV1s=","K8Gui43buB/KrC1EVV7VaF0UJjPp35BfZtlAEJMILVk=","D5QGuCllZKNzBFB7jbo+0WI3EnOgex/JgBH81q1yIF8=","I2Co6wzH3vpntymY3pBxThfnWxdKUu5KyxJsjNmV8Kg=","FYcaXN3q2XaATIA8uu8lXrSBWl6W34sAbcu8J2f4iUg=","GTpWdmmY7p4KhlLdLzsdoDYvT1T3I3lUT5V8ze77Qg8=","KjlKQ5NPhpgvm+Vv9PqxcDsuY8itM0g05DCYBed3rg8=","GFmVTP64aV8+i2NdyzRRkoks0RIjRDuntBZuiHbA0UI=","BOEYF2MFDlgBNETby5nxkCsRvCXZC73KQI04GfT+0ys=","D9slPe6Dhp1AwzXqZN6MW7EOuC2wi16LH15VUr/QXyM=","BYy+ippQJ72qTvtiOt6tYnXwhobxwImEqdfFuum08cA=","E4Ltzplx4YZJfq2xrrH1KyO0uDvvAjqw0VIotMzspZo=","A0ZJkPBFxu4IGcpR/RGwvn9huOuZ8Ut34eZjRgHZ6LU=","I/e/yHINwpb/8ztB+Y/4PG/KtGBdsutaqlvBN663Clg=","ClmhWOPuwhF+bpTn8OnezxjD/9XhUxqSGWNhWLuvYvI=","BuxUyAOBwFK1i/I7MS/9POLE66BlQgr49MI+0Adf0Hs=","EYhy3IMuDrVHa1ZkjoZ+yLCTQPenvLG0li8P+e0fnQE=","E9afoSfYNBZa1cfLp61Z7VLgsPDkLX/qleGQa1IJIbE=","FpoXf2PqaBJwscaHenPSG94UOUL7cdxV/YpJ8Z8Qx3s=","BO9RWRxurZfvQvKHrc5A2Tq+sDK5IvZv+36aWnRQVE0=","JW4XWh3AeTkOzXynA/suOxnsYYBdTwPO1fRe5t0Paew=","MBAtKGNqvV/l8q9BL/YAT3XMNg0yBd0toAKBPT4s7rI=","EJmOQt/NO78cBxS8c+sb9ARDo/qZvvSjH9Mb4YL8x5I=","GT7djp/PPXYl+n0ktZih2J8zYur01YLv7K12+HnjaGA=","GBaK/TTy2RXQNozoC3szR9HHpWHOYRQl8mZNeqUfC10=","KTg8AevTtqsMAXZW6+ZYtqMo7He8M2JuKeLpWzPqYRE=","EGRtLyYD3jmh9K5ed3GmSnAttuhvt2q2AL9XP5AQxxE=","C+teB9GycUX1dfE5WlW/Ey+QwltA2ns4ZNAkLcsRF/s=","FtaFJSB4wTPcDT7K1itciDD5W7LlS1mr3/vwGNlvozY=","Cmq9HYM5OPM8dBVOBAS0tApVW7vsId36/Wct1iBH8Bo=","GmefXTbre1yOoSpMLe3I/rEt/+7EUDFycKbxmzTPGGA=","CYD7IzvUVsI5dNUODr/eRyakI+raTo9v+8dZLj8bk9Y=","FhtCIy5huEy/GBCvk6OPwM7OPVYoySggA+ustcMSxys=","CtoQqQx/BSCVD31Hpg1eakk/CXh/FWTl0JID20feGgs=","GnMNNyMQuoIyA0WimsQjjtPweoorThIbtQ3bmvQH9FE=","LIEg8mjvBU+BcGTDad2n6pCDd/6rpcTf+9oQ71joxVY=","HHyIJPdYdT+lfAB4nGhCF7kw6VMTvLc+bnuGSaSWj3A=","LNntMfX4aRyOOeQHenT6oPQArYtJHrP3tHsn+j/Rz3c=","I/9PnUaBNFfPYNkvV2GDmaXgIqwyHKVQhUriORiiLuo=","CZRaXRR6T2bO7OZAXd3Z0K9aLFEDUpQH3/HqWPGAQm0=","GI2cUoAl1MK2dmDGt3G5D3x9puqinT8mim3SI+xvxjA=","MFDjeZZZa3+B9oMRQx2HNNun2SbTYzWV4MDY3fTw9H8=","Fa8RaTloMKkWAMqBAsNcQmzq5UYeP5XYnYKVGNMK/Xg=","HabQmIVDLqmgbZ83+HPZhdrpM+NRRmspBChNozINisw=","J5bqkNJpryn1+KzzOSESTk5PrT2+ZYlF5UbuQR3aqcs=","IC190doPa0sDJcizMHdC8B4VYS7I6TBKfLAxngHTLWA=","CW1nkNBbt1kVapUromPWcqLX+ceI9Mgxop2s5MD4vl8=","BU76H2Ww/OKDgIllJ12He0ONojzlsT4ZY3mMsUR9JaQ=","GxYvg9kX6T7bMwjCmALeudiqaQETsuFIZMz24Y5BZfE=","IeUkHhJWTdb9nxzdKg3jnu3+/BRmzFaOxc63RaBQbtw=","HPtWYujPWskiaoDuF7Nqvstzq1+H4WGSe0NJ4Q5L3wg=","DyEXfjAqdxu65tjR7LNztiyZrzRiIKwBKcU/Zm6yQQA=","FnFSI3RgaZKv+w3X9xsSvsQjau3mKQVGvO9+H1FcIyA=","D6PsW5SIJZwutM8kUBv62b4uyeQsXMjM1BnSppLK2HA=","GTwOBOC9KYNXyyZsFQYIDtNu3OhcZIzAhejFexq1S7o=","ECrfjvdHNaJ+kSgwbcvDyZ9vcpHNQGV4zhTqKtq6aPg=","D+CveFjkmFnipU1vGtlFsTFqokv73SOuQKbQy3DD6rE=","IW9nF7vH3tsIU2oiIIQ/Ti2l8dqp69796KXqc0R5jSI=","HaVcyQDw0h9KPmlDkZGKGzwjsqx3PGs++I4uQigyUWE="],M:[["EJt/QRug5MmytwyvXDansZS+fBGtJDeL/ttoWSuoEYs=","Fu1B4Tu5wMZq4RlCT928vJMU3J/b3upV1sZFQ9xJA+A=","K5C7oA/KBYn2F+fcv+guDfcGq2QM6yR7eRqTt042c20="],["KWnyfu0xpIC5w2x2Q3nbyizI/dFBXD3e1ilAvN4L13E=","LiQZ+ewC7DlMmHHIMpY9wbiddDyMe5ZAKbIxFoex/iM=","EBBx8AMjebaXMVh2aQ8FPRSNThCfX7BlyKrMVaD4m/o="],["FDAh7GhqPzMNX55lRjgGXObNeeKMWzdTMmJE7mWhsac=","F2zAKWla0CWCpw7/CKb9mdBX4S5Y59e2sWzfq8juKRE=","GaP8ClZwK/QXun/uOAJZP6ZERwMHBD93cyec1x0l1eA="]]};_2.default=_default,Object.defineProperty(poseidon2$1,"__esModule",{value:!0});var poseidon2_2=poseidon2$1.poseidon2=poseidon2,_poseidon=_interopRequireDefault(poseidon_1),_unstringify=_interopRequireDefault(unstringify),_=_interopRequireDefault(_2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let c=(0,_unstringify.default)(_.default);function poseidon2(inputs){return(0,_poseidon.default)(inputs,c)}function hash(message){return message=bignumber.O$.from(message).toTwos(256).toHexString(),message=(0,lib_esm.Bu)(message,32),BigInt((0,keccak256_lib_esm.w)(message))>>BigInt(8)}var Group=function(){function Group(id,treeDepth,members){if(void 0===treeDepth&&(treeDepth=20),void 0===members&&(members=[]),treeDepth<16||treeDepth>32)throw Error("The tree depth must be between 16 and 32");this._id=id,this.merkleTree=new IncrementalMerkleTree(poseidon2_2,treeDepth,hash(id),2,members.map(BigInt))}return Object.defineProperty(Group.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(Group.prototype,"root",{get:function(){return this.merkleTree.root},enumerable:!1,configurable:!0}),Object.defineProperty(Group.prototype,"depth",{get:function(){return this.merkleTree.depth},enumerable:!1,configurable:!0}),Object.defineProperty(Group.prototype,"zeroValue",{get:function(){return this.merkleTree.zeroes[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Group.prototype,"members",{get:function(){return this.merkleTree.leaves},enumerable:!1,configurable:!0}),Group.prototype.indexOf=function(member){return this.merkleTree.indexOf(member)},Group.prototype.addMember=function(member){this.merkleTree.insert(BigInt(member))},Group.prototype.addMembers=function(members){for(var _i=0,members_1=members;_i<members_1.length;_i++){var member=members_1[_i];this.addMember(member)}},Group.prototype.updateMember=function(index,member){this.merkleTree.update(index,member)},Group.prototype.removeMember=function(index){this.merkleTree.delete(index)},Group.prototype.generateMerkleProof=function(index){var merkleProof=this.merkleTree.createProof(index);return merkleProof.siblings=merkleProof.siblings.map(function(s){return s[0]}),merkleProof},Group}()},8706:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{t:function(){return prove}});var ex,scalar_namespaceObject={};__webpack_require__.r(scalar_namespaceObject),__webpack_require__.d(scalar_namespaceObject,{abs:function(){return abs},add:function(){return add},band:function(){return band},bitLength:function(){return bitLength},bits:function(){return bits},bor:function(){return bor},bxor:function(){return bxor},div:function(){return div},e:function(){return e},eq:function(){return eq},exp:function(){return exp},fromArray:function(){return fromArray},fromRprBE:function(){return fromRprBE},fromRprLE:function(){return fromRprLE},fromString:function(){return fromString},geq:function(){return geq},gt:function(){return gt},isNegative:function(){return isNegative},isOdd:function(){return isOdd},isZero:function(){return isZero},land:function(){return land},leq:function(){return leq},lnot:function(){return lnot},lor:function(){return lor},lt:function(){return lt},mod:function(){return mod},mul:function(){return mul},naf:function(){return naf},neg:function(){return neg},neq:function(){return neq},one:function(){return one},pow:function(){return pow},shiftLeft:function(){return shiftLeft},shiftRight:function(){return shiftRight},shl:function(){return shl},shr:function(){return shr},square:function(){return square},sub:function(){return sub},toArray:function(){return toArray},toLEBuff:function(){return toLEBuff},toNumber:function(){return toNumber},toRprBE:function(){return toRprBE},toRprLE:function(){return toRprLE},toString:function(){return scalar_toString},zero:function(){return zero}});var utils_namespaceObject={};__webpack_require__.r(utils_namespaceObject),__webpack_require__.d(utils_namespaceObject,{array2buffer:function(){return array2buffer},beBuff2int:function(){return beBuff2int},beInt2Buff:function(){return beInt2Buff},bitReverse:function(){return bitReverse},buffReverseBits:function(){return buffReverseBits},buffer2array:function(){return buffer2array},leBuff2int:function(){return leBuff2int},leInt2Buff:function(){return leInt2Buff},log2:function(){return utils_log2},stringifyBigInts:function(){return stringifyBigInts},stringifyFElements:function(){return stringifyFElements},unstringifyBigInts:function(){return unstringifyBigInts},unstringifyFElements:function(){return unstringifyFElements}});var ffjavascript_main_namespaceObject={};__webpack_require__.r(ffjavascript_main_namespaceObject),__webpack_require__.d(ffjavascript_main_namespaceObject,{BigBuffer:function(){return BigBuffer},ChaCha:function(){return ChaCha},EC:function(){return EC},F1Field:function(){return ZqField},F2Field:function(){return F2Field},F3Field:function(){return F3Field},PolField:function(){return PolField},Scalar:function(){return main_Scalar},ZqField:function(){return ZqField},buildBls12381:function(){return buildBls12381},buildBn128:function(){return bn128_buildBn128},getCurveFromName:function(){return getCurveFromName},getCurveFromQ:function(){return getCurveFromQ},getCurveFromR:function(){return getCurveFromR},utils:function(){return main_utils}});let hexLen=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function fromString(s,radix){return radix&&10!=radix?16==radix?"0x"==s.slice(0,2)?BigInt(s):BigInt("0x"+s):void 0:BigInt(s)}let e=fromString;function fromArray(a,radix){let acc=BigInt(0);radix=BigInt(radix);for(let i=0;i<a.length;i++)acc=acc*radix+BigInt(a[i]);return acc}function bitLength(a){let aS=a.toString(16);return(aS.length-1)*4+hexLen[parseInt(aS[0],16)]}function isNegative(a){return BigInt(a)<BigInt(0)}function isZero(a){return!a}function shiftLeft(a,n){return BigInt(a)<<BigInt(n)}function shiftRight(a,n){return BigInt(a)>>BigInt(n)}let shl=shiftLeft,shr=shiftRight;function isOdd(a){return(BigInt(a)&BigInt(1))==BigInt(1)}function naf(n){let E=BigInt(n),res=[];for(;E;){if(E&BigInt(1)){let z=2-Number(E%BigInt(4));res.push(z),E-=BigInt(z)}else res.push(0);E>>=BigInt(1)}return res}function bits(n){let E=BigInt(n),res=[];for(;E;)E&BigInt(1)?res.push(1):res.push(0),E>>=BigInt(1);return res}function toNumber(s){if(s>BigInt(Number.MAX_SAFE_INTEGER))throw Error("Number too big");return Number(s)}function toArray(s,radix){let res=[],rem=BigInt(s);for(radix=BigInt(radix);rem;)res.unshift(Number(rem%radix)),rem/=radix;return res}function add(a,b){return BigInt(a)+BigInt(b)}function sub(a,b){return BigInt(a)-BigInt(b)}function neg(a){return-BigInt(a)}function mul(a,b){return BigInt(a)*BigInt(b)}function square(a){return BigInt(a)*BigInt(a)}function pow(a,b){return BigInt(a)**BigInt(b)}function exp(a,b){return BigInt(a)**BigInt(b)}function abs(a){return BigInt(a)>=0?BigInt(a):-BigInt(a)}function div(a,b){return BigInt(a)/BigInt(b)}function mod(a,b){return BigInt(a)%BigInt(b)}function eq(a,b){return BigInt(a)==BigInt(b)}function neq(a,b){return BigInt(a)!=BigInt(b)}function lt(a,b){return BigInt(a)<BigInt(b)}function gt(a,b){return BigInt(a)>BigInt(b)}function leq(a,b){return BigInt(a)<=BigInt(b)}function geq(a,b){return BigInt(a)>=BigInt(b)}function band(a,b){return BigInt(a)&BigInt(b)}function bor(a,b){return BigInt(a)|BigInt(b)}function bxor(a,b){return BigInt(a)^BigInt(b)}function land(a,b){return BigInt(a)&&BigInt(b)}function lor(a,b){return BigInt(a)||BigInt(b)}function lnot(a){return!BigInt(a)}function toRprLE(buff,o,e,n8){let s="0000000"+e.toString(16),v=new Uint32Array(buff.buffer,buff.byteOffset+o,n8/4),l=((s.length-7)*4-1>>5)+1;for(let i=0;i<l;i++)v[i]=parseInt(s.substring(s.length-8*i-8,s.length-8*i),16);for(let i1=l;i1<v.length;i1++)v[i1]=0;for(let i2=4*v.length;i2<n8;i2++)buff[i2]=toNumber(band(shiftRight(e,8*i2),255))}function toRprBE(buff,o,e,n8){let s="0000000"+e.toString(16),v=new DataView(buff.buffer,buff.byteOffset+o,n8),l=((s.length-7)*4-1>>5)+1;for(let i=0;i<l;i++)v.setUint32(n8-4*i-4,parseInt(s.substring(s.length-8*i-8,s.length-8*i),16),!1);for(let i1=0;i1<n8/4-l;i1++)v[i1]=0}function fromRprLE(buff,o,n8){n8=n8||buff.byteLength,o=o||0;let v=new Uint32Array(buff.buffer,buff.byteOffset+o,n8/4),a=Array(n8/4);return v.forEach((ch,i)=>a[a.length-i-1]=ch.toString(16).padStart(8,"0")),fromString(a.join(""),16)}function fromRprBE(buff,o,n8){n8=n8||buff.byteLength,o=o||0;let v=new DataView(buff.buffer,buff.byteOffset+o,n8),a=Array(n8/4);for(let i=0;i<n8/4;i++)a[i]=v.getUint32(4*i,!1).toString(16).padStart(8,"0");return fromString(a.join(""),16)}function scalar_toString(a,radix){return a.toString(radix)}function toLEBuff(a){let buff=new Uint8Array(Math.floor((bitLength(a)-1)/8)+1);return toRprLE(buff,0,a,buff.byteLength),buff}let zero=e(0),one=e(1);class PolField{constructor(F){this.F=F;let rem=F.sqrt_t,s=F.sqrt_s,five=this.F.add(this.F.add(this.F.two,this.F.two),this.F.one);this.w=Array(s+1),this.wi=Array(s+1),this.w[s]=this.F.pow(five,rem),this.wi[s]=this.F.inv(this.w[s]);let n=s-1;for(;n>=0;)this.w[n]=this.F.square(this.w[n+1]),this.wi[n]=this.F.square(this.wi[n+1]),n--;this.roots=[],this._setRoots(15)}_setRoots(n){n>this.F.sqrt_s&&(n=this.s);for(let i=n;i>=0&&!this.roots[i];i--){let r=this.F.one,nroots=1<<i,rootsi=Array(nroots);for(let j=0;j<nroots;j++)rootsi[j]=r,r=this.F.mul(r,this.w[i]);this.roots[i]=rootsi}}add(a,b){let m=Math.max(a.length,b.length),res=Array(m);for(let i=0;i<m;i++)res[i]=this.F.add(a[i]||this.F.zero,b[i]||this.F.zero);return this.reduce(res)}double(a){return this.add(a,a)}sub(a,b){let m=Math.max(a.length,b.length),res=Array(m);for(let i=0;i<m;i++)res[i]=this.F.sub(a[i]||this.F.zero,b[i]||this.F.zero);return this.reduce(res)}mulScalar(p,b){if(this.F.eq(b,this.F.zero))return[];if(this.F.eq(b,this.F.one))return p;let res=Array(p.length);for(let i=0;i<p.length;i++)res[i]=this.F.mul(p[i],b);return res}mul(a,b){return 0==a.length||0==b.length?[]:1==a.length?this.mulScalar(b,a[0]):1==b.length?this.mulScalar(a,b[0]):(b.length>a.length&&([b,a]=[a,b]),b.length<=2||b.length<log2(a.length))?this.mulNormal(a,b):this.mulFFT(a,b)}mulNormal(a,b){let res=[];for(let i=0;i<b.length;i++)res=this.add(res,this.scaleX(this.mulScalar(a,b[i]),i));return res}mulFFT(a,b){let longestN=Math.max(a.length,b.length),bitsResult=log2(longestN-1)+2;this._setRoots(bitsResult);let m=1<<bitsResult,ea=this.extend(a,m),eb=this.extend(b,m),ta=__fft(this,ea,bitsResult,0,1,!1),tb=__fft(this,eb,bitsResult,0,1,!1),tres=Array(m);for(let i=0;i<m;i++)tres[i]=this.F.mul(ta[i],tb[i]);let res=__fft(this,tres,bitsResult,0,1,!0),twoinvm=this.F.inv(this.F.mulScalar(this.F.one,m)),resn=Array(m);for(let i1=0;i1<m;i1++)resn[i1]=this.F.mul(res[(m-i1)%m],twoinvm);return this.reduce(resn)}square(a){return this.mul(a,a)}scaleX(p,n){if(0==n)return p;if(n>0){let z=Array(n).fill(this.F.zero);return z.concat(p)}return-n>=p.length?[]:p.slice(-n)}eval2(p,x){let v=this.F.zero,ix=this.F.one;for(let i=0;i<p.length;i++)v=this.F.add(v,this.F.mul(p[i],ix)),ix=this.F.mul(ix,x);return v}eval(p,x){let F=this.F;if(0==p.length)return F.zero;let m=this._next2Power(p.length),ep=this.extend(p,m);return _eval(ep,x,0,1,m);function _eval(p,x,offset,step,n){if(1==n)return p[offset];let newX=F.square(x),res=F.add(_eval(p,newX,offset,step<<1,n>>1),F.mul(x,_eval(p,newX,offset+step,step<<1,n>>1)));return res}}lagrange(points){let roots=[this.F.one];for(let i=0;i<points.length;i++)roots=this.mul(roots,[this.F.neg(points[i][0]),this.F.one]);let sum=[];for(let i1=0;i1<points.length;i1++){let mpol=this.ruffini(roots,points[i1][0]),factor=this.F.mul(this.F.inv(this.eval(mpol,points[i1][0])),points[i1][1]);mpol=this.mulScalar(mpol,factor),sum=this.add(sum,mpol)}return sum}fft(p){if(p.length<=1)return p;let bits=log2(p.length-1)+1;this._setRoots(bits);let m=1<<bits,ep=this.extend(p,m),res=__fft(this,ep,bits,0,1);return res}fft2(p){if(p.length<=1)return p;let bits=log2(p.length-1)+1;this._setRoots(bits);let m=1<<bits,ep=this.extend(p,m);__bitReverse(ep,bits);let res=__fft2(this,ep,bits);return res}ifft(p){if(p.length<=1)return p;let bits=log2(p.length-1)+1;this._setRoots(bits);let m=1<<bits,ep=this.extend(p,m),res=__fft(this,ep,bits,0,1),twoinvm=this.F.inv(this.F.mulScalar(this.F.one,m)),resn=Array(m);for(let i=0;i<m;i++)resn[i]=this.F.mul(res[(m-i)%m],twoinvm);return resn}ifft2(p){if(p.length<=1)return p;let bits=log2(p.length-1)+1;this._setRoots(bits);let m=1<<bits,ep=this.extend(p,m);__bitReverse(ep,bits);let res=__fft2(this,ep,bits,0,1),twoinvm=this.F.inv(this.F.mulScalar(this.F.one,m)),resn=Array(m);for(let i=0;i<m;i++)resn[i]=this.F.mul(res[(m-i)%m],twoinvm);return resn}_fft(pall,bits,offset,step){let n=1<<bits;if(1==n)return[pall[offset]];let ndiv2=n>>1,p1=this._fft(pall,bits-1,offset,2*step),p2=this._fft(pall,bits-1,offset+step,2*step),out=Array(n),m=this.F.one;for(let i=0;i<ndiv2;i++)out[i]=this.F.add(p1[i],this.F.mul(m,p2[i])),out[i+ndiv2]=this.F.sub(p1[i],this.F.mul(m,p2[i])),m=this.F.mul(m,this.w[bits]);return out}extend(p,e){if(e==p.length)return p;let z=Array(e-p.length).fill(this.F.zero);return p.concat(z)}reduce(p){if(0==p.length||!this.F.eq(p[p.length-1],this.F.zero))return p;let i=p.length-1;for(;i>0&&this.F.eq(p[i],this.F.zero);)i--;return p.slice(0,i+1)}eq(a,b){let pa=this.reduce(a),pb=this.reduce(b);if(pa.length!=pb.length)return!1;for(let i=0;i<pb.length;i++)if(!this.F.eq(pa[i],pb[i]))return!1;return!0}ruffini(p,r){let res=Array(p.length-1);res[res.length-1]=p[p.length-1];for(let i=res.length-2;i>=0;i--)res[i]=this.F.add(this.F.mul(res[i+1],r),p[i+1]);return res}_next2Power(v){return v--,v|=v>>1,v|=v>>2,v|=v>>4,v|=v>>8,v|=v>>16,++v}toString(p){let ap=this.normalize(p),S="";for(let i=ap.length-1;i>=0;i--)!this.F.eq(p[i],this.F.zero)&&(""!=S&&(S+=" + "),S+=p[i].toString(10),i>0&&(S+="x",i>1&&(S=S+"^"+i)));return S}normalize(p){let res=Array(p.length);for(let i=0;i<p.length;i++)res[i]=this.F.normalize(p[i]);return res}_reciprocal(p,bits){let k=1<<bits;if(1==k)return[this.F.inv(p[0])];let np=this.scaleX(p,-k/2),q=this._reciprocal(np,bits-1),a=this.scaleX(this.double(q),3*k/2-2),b=this.mul(this.square(q),p);return this.scaleX(this.sub(a,b),-(k-2))}_div2(m,v){let kbits=log2(v.length-1)+1,k=1<<kbits,scaleV=k-v.length,rec=this._reciprocal(this.scaleX(v,scaleV),kbits),res=this.scaleX(rec,m-2*k+2+scaleV);return res}div(_u,_v){let t,us,ut;if(_u.length<_v.length)return[];let kbits=log2(_v.length-1)+1,k=1<<kbits,u=this.scaleX(_u,k-_v.length),v=this.scaleX(_v,k-_v.length),n=v.length-1,m=u.length-1,s=this._reciprocal(v,kbits);m>2*n&&(t=this.sub(this.scaleX([this.F.one],2*n),this.mul(s,v)));let q=[],rem=u,finish=!1;for(;!finish;)us=this.mul(rem,s),q=this.add(q,this.scaleX(us,-2*n)),m>2*n?(ut=this.mul(rem,t),m=(rem=this.scaleX(ut,-2*n)).length-1):finish=!0;return q}oneRoot(n,i){let nbits=log2(n-1)+1,res=this.F.one,r=i;if(i>=n)throw Error("Given 'i' should be lower than 'n'");if(1<<nbits!==n)throw Error(`Internal errlr: ${n} should equal ${1<<nbits}`);for(;r>0;)!0&r&&(res=this.F.mul(res,this.w[nbits])),r>>=1,nbits--;return res}computeVanishingPolinomial(bits,t){let m=1<<bits;return this.F.sub(this.F.pow(t,m),this.F.one)}evaluateLagrangePolynomials(bits,t){let m=1<<bits,tm=this.F.pow(t,m),u=Array(m).fill(this.F.zero);this._setRoots(bits);let omega=this.w[bits];if(this.F.eq(tm,this.F.one)){for(let i=0;i<m;i++)if(this.F.eq(this.roots[bits][0],t))return u[i]=this.F.one,u}let z=this.F.sub(tm,this.F.one),l=this.F.mul(z,this.F.inv(this.F.e(m)));for(let i1=0;i1<m;i1++)u[i1]=this.F.mul(l,this.F.inv(this.F.sub(t,this.roots[bits][i1]))),l=this.F.mul(l,omega);return u}log2(V){return log2(V)}}function log2(V){return((4294901760&V)!=0?(V&=4294901760,16):0)|((4278255360&V)!=0?(V&=4278255360,8):0)|((4042322160&V)!=0?(V&=4042322160,4):0)|((3435973836&V)!=0?(V&=3435973836,2):0)|(2863311530&V)!=0}function __fft(PF,pall,bits,offset,step){let n=1<<bits;if(1==n)return[pall[offset]];if(2==n)return[PF.F.add(pall[offset],pall[offset+step]),PF.F.sub(pall[offset],pall[offset+step])];let ndiv2=n>>1,p1=__fft(PF,pall,bits-1,offset,2*step),p2=__fft(PF,pall,bits-1,offset+step,2*step),out=Array(n);for(let i=0;i<ndiv2;i++)out[i]=PF.F.add(p1[i],PF.F.mul(PF.roots[bits][i],p2[i])),out[i+ndiv2]=PF.F.sub(p1[i],PF.F.mul(PF.roots[bits][i],p2[i]));return out}function __fft2(PF,pall,bits){let n=1<<bits;if(1==n)return[pall[0]];let ndiv2=n>>1,p1=__fft2(PF,pall.slice(0,ndiv2),bits-1),p2=__fft2(PF,pall.slice(ndiv2),bits-1),out=Array(n);for(let i=0;i<ndiv2;i++)out[i]=PF.F.add(p1[i],PF.F.mul(PF.roots[bits][i],p2[i])),out[i+ndiv2]=PF.F.sub(p1[i],PF.F.mul(PF.roots[bits][i],p2[i]));return out}let _revTable=[];for(let i=0;i<256;i++)_revTable[i]=_revSlow(i,8);function _revSlow(idx,bits){let res=0,a=idx;for(let i=0;i<bits;i++)res<<=1,res|=1&a,a>>=1;return res}function rev(idx,bits){return(_revTable[idx>>>24]|_revTable[idx>>>16&255]<<8|_revTable[idx>>>8&255]<<16|_revTable[255&idx]<<24)>>>32-bits}function __bitReverse(p,bits){for(let k=0;k<p.length;k++){let r=rev(k,bits);if(r>k){let tmp=p[k];p[k]=p[r],p[r]=tmp}}}function mulScalar(F,base,e){let res;if(isZero(e))return F.zero;let n=naf(e);if(1==n[n.length-1])res=base;else if(-1==n[n.length-1])res=F.neg(base);else throw Error("invlaud NAF");for(let i=n.length-2;i>=0;i--)res=F.double(res),1==n[i]?res=F.add(res,base):-1==n[i]&&(res=F.sub(res,base));return res}function futils_exp(F,base,e){if(isZero(e))return F.one;let n=bits(e);if(0==n.length)return F.one;let res=base;for(let i=n.length-2;i>=0;i--)res=F.square(res),n[i]&&(res=F.mul(res,base));return res}function buildSqrt(F){if(F.m%2==1){if(eq(mod(F.p,4),1)){if(eq(mod(F.p,8),1)){if(eq(mod(F.p,16),1))alg5_tonelliShanks(F);else if(eq(mod(F.p,16),9))alg4_kong(F);else throw Error("Field withot sqrt")}else if(eq(mod(F.p,8),5))alg3_atkin(F);else throw Error("Field withot sqrt")}else eq(mod(F.p,4),3)&&alg2_shanks(F)}else{let pm2mod4=mod(pow(F.p,F.m/2),4);1==pm2mod4?alg10_adj(F):3==pm2mod4?alg9_adj(F):alg8_complex(F)}}function alg5_tonelliShanks(F){for(F.sqrt_q=pow(F.p,F.m),F.sqrt_s=0,F.sqrt_t=sub(F.sqrt_q,1);!isOdd(F.sqrt_t);)F.sqrt_s=F.sqrt_s+1,F.sqrt_t=div(F.sqrt_t,2);let c0=F.one;for(;F.eq(c0,F.one);){let c=F.random();F.sqrt_z=F.pow(c,F.sqrt_t),c0=F.pow(F.sqrt_z,2**(F.sqrt_s-1))}F.sqrt_tm1d2=div(sub(F.sqrt_t,1),2),F.sqrt=function(a){let F=this;if(F.isZero(a))return F.zero;let w=F.pow(a,F.sqrt_tm1d2),a0=F.pow(F.mul(F.square(w),a),2**(F.sqrt_s-1));if(F.eq(a0,F.negone))return null;let v=F.sqrt_s,x=F.mul(a,w),b=F.mul(x,w),z=F.sqrt_z;for(;!F.eq(b,F.one);){let b2k=F.square(b),k=1;for(;!F.eq(b2k,F.one);)b2k=F.square(b2k),k++;w=z;for(let i=0;i<v-k-1;i++)w=F.square(w);z=F.square(w),b=F.mul(b,z),x=F.mul(x,w),v=k}return F.geq(x,F.zero)?x:F.neg(x)}}function alg4_kong(F){F.sqrt=function(){throw Error("Sqrt alg 4 not implemented")}}function alg3_atkin(F){F.sqrt=function(){throw Error("Sqrt alg 3 not implemented")}}function alg2_shanks(F){F.sqrt_q=pow(F.p,F.m),F.sqrt_e1=div(sub(F.sqrt_q,3),4),F.sqrt=function(a){if(this.isZero(a))return this.zero;let a1=this.pow(a,this.sqrt_e1),a0=this.mul(this.square(a1),a);if(this.eq(a0,this.negone))return null;let x=this.mul(a1,a);return F.geq(x,F.zero)?x:F.neg(x)}}function alg10_adj(F){F.sqrt=function(){throw Error("Sqrt alg 10 not implemented")}}function alg9_adj(F){F.sqrt_q=pow(F.p,F.m/2),F.sqrt_e34=div(sub(F.sqrt_q,3),4),F.sqrt_e12=div(sub(F.sqrt_q,1),2),F.frobenius=function(n,x){return n%2==1?F.conjugate(x):x},F.sqrt=function(a){let x;let F=this,a1=F.pow(a,F.sqrt_e34),alfa=F.mul(F.square(a1),a),a0=F.mul(F.frobenius(1,alfa),alfa);if(F.eq(a0,F.negone))return null;let x0=F.mul(a1,a);if(F.eq(alfa,F.negone))x=F.mul(x0,[F.F.zero,F.F.one]);else{let b=F.pow(F.add(F.one,alfa),F.sqrt_e12);x=F.mul(b,x0)}return F.geq(x,F.zero)?x:F.neg(x)}}function alg8_complex(F){F.sqrt=function(){throw Error("Sqrt alg 8 not implemented")}}function quarterRound(st,a,b,c,d){st[a]=st[a]+st[b]>>>0,st[d]=(st[d]^st[a])>>>0,st[d]=(st[d]<<16|st[d]>>>16&65535)>>>0,st[c]=st[c]+st[d]>>>0,st[b]=(st[b]^st[c])>>>0,st[b]=(st[b]<<12|st[b]>>>20&4095)>>>0,st[a]=st[a]+st[b]>>>0,st[d]=(st[d]^st[a])>>>0,st[d]=(st[d]<<8|st[d]>>>24&255)>>>0,st[c]=st[c]+st[d]>>>0,st[b]=(st[b]^st[c])>>>0,st[b]=(st[b]<<7|st[b]>>>25&127)>>>0}function doubleRound(st){quarterRound(st,0,4,8,12),quarterRound(st,1,5,9,13),quarterRound(st,2,6,10,14),quarterRound(st,3,7,11,15),quarterRound(st,0,5,10,15),quarterRound(st,1,6,11,12),quarterRound(st,2,7,8,13),quarterRound(st,3,4,9,14)}class ChaCha{constructor(seed){seed=seed||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,seed[0],seed[1],seed[2],seed[3],seed[4],seed[5],seed[6],seed[7],0,0,0,0],this.idx=16,this.buff=Array(16)}nextU32(){return 16==this.idx&&this.update(),this.buff[this.idx++]}nextU64(){return add(mul(this.nextU32(),4294967296),this.nextU32())}nextBool(){return(1&this.nextU32())==1}update(){for(let i=0;i<16;i++)this.buff[i]=this.state[i];for(let i1=0;i1<10;i1++)doubleRound(this.buff);for(let i2=0;i2<16;i2++)this.buff[i2]=this.buff[i2]+this.state[i2]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,0==this.state[12]&&(this.state[13]=this.state[13]+1>>>0,0==this.state[13]&&(this.state[14]=this.state[14]+1>>>0,0==this.state[14]&&(this.state[15]=this.state[15]+1>>>0)))}}function getRandomBytes(n){let array=new Uint8Array(n);if(void 0!==globalThis.crypto)globalThis.crypto.getRandomValues(array);else for(let i=0;i<n;i++)array[i]=4294967296*Math.random()>>>0;return array}function getRandomSeed(){let arr=getRandomBytes(32),arrV=new Uint32Array(arr.buffer),seed=[];for(let i=0;i<8;i++)seed.push(arrV[i]);return seed}__webpack_require__(1941);let threadRng=null;function getThreadRng(){return threadRng||(threadRng=new ChaCha(getRandomSeed()))}class FFT{constructor(G,F,opMulGF){this.F=F,this.G=G,this.opMulGF=opMulGF;let rem=F.sqrt_t||F.t,s=F.sqrt_s||F.s,nqr=F.one;for(;F.eq(F.pow(nqr,F.half),F.one);)nqr=F.add(nqr,F.one);this.w=Array(s+1),this.wi=Array(s+1),this.w[s]=this.F.pow(nqr,rem),this.wi[s]=this.F.inv(this.w[s]);let n=s-1;for(;n>=0;)this.w[n]=this.F.square(this.w[n+1]),this.wi[n]=this.F.square(this.wi[n+1]),n--;this.roots=[],this._setRoots(Math.min(s,15))}_setRoots(n){for(let i=n;i>=0&&!this.roots[i];i--){let r=this.F.one,nroots=1<<i,rootsi=Array(nroots);for(let j=0;j<nroots;j++)rootsi[j]=r,r=this.F.mul(r,this.w[i]);this.roots[i]=rootsi}}fft(p){if(p.length<=1)return p;let bits=fft_log2(p.length-1)+1;this._setRoots(bits);let m=1<<bits;if(p.length!=m)throw Error("Size must be multiple of 2");let res=fft_fft(this,p,bits,0,1);return res}ifft(p){if(p.length<=1)return p;let bits=fft_log2(p.length-1)+1;this._setRoots(bits);let m=1<<bits;if(p.length!=m)throw Error("Size must be multiple of 2");let res=fft_fft(this,p,bits,0,1),twoinvm=this.F.inv(this.F.mulScalar(this.F.one,m)),resn=Array(m);for(let i=0;i<m;i++)resn[i]=this.opMulGF(res[(m-i)%m],twoinvm);return resn}}function fft_log2(V){return((4294901760&V)!=0?(V&=4294901760,16):0)|((4278255360&V)!=0?(V&=4278255360,8):0)|((4042322160&V)!=0?(V&=4042322160,4):0)|((3435973836&V)!=0?(V&=3435973836,2):0)|(2863311530&V)!=0}function fft_fft(PF,pall,bits,offset,step){let n=1<<bits;if(1==n)return[pall[offset]];if(2==n)return[PF.G.add(pall[offset],pall[offset+step]),PF.G.sub(pall[offset],pall[offset+step])];let ndiv2=n>>1,p1=fft_fft(PF,pall,bits-1,offset,2*step),p2=fft_fft(PF,pall,bits-1,offset+step,2*step),out=Array(n);for(let i=0;i<ndiv2;i++)out[i]=PF.G.add(p1[i],PF.opMulGF(p2[i],PF.roots[bits][i])),out[i+ndiv2]=PF.G.sub(p1[i],PF.opMulGF(p2[i],PF.roots[bits][i]));return out}class ZqField{constructor(p){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(p),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=bitLength(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=this.e(this.one<<BigInt(64*this.n64)),this.Ri=this.inv(this.R);let e=this.negone>>this.one;this.nqr=this.two;let r=this.pow(this.nqr,e);for(;!this.eq(r,this.negone);)this.nqr=this.nqr+this.one,r=this.pow(this.nqr,e);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),buildSqrt(this),this.FFT=new FFT(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(a,b){let res;if(b?16==b&&(res=BigInt("0x"+a)):res=BigInt(a),!(res<0))return res>=this.p?res%this.p:res;{let nres=-res;return nres>=this.p&&(nres%=this.p),this.p-nres}}add(a,b){let res=a+b;return res>=this.p?res-this.p:res}sub(a,b){return a>=b?a-b:this.p-b+a}neg(a){return a?this.p-a:a}mul(a,b){return a*b%this.p}mulScalar(base,s){return base*this.e(s)%this.p}square(a){return a*a%this.p}eq(a,b){return a==b}neq(a,b){return a!=b}lt(a,b){let aa=a>this.half?a-this.p:a,bb=b>this.half?b-this.p:b;return aa<bb}gt(a,b){let aa=a>this.half?a-this.p:a,bb=b>this.half?b-this.p:b;return aa>bb}leq(a,b){let aa=a>this.half?a-this.p:a,bb=b>this.half?b-this.p:b;return aa<=bb}geq(a,b){let aa=a>this.half?a-this.p:a,bb=b>this.half?b-this.p:b;return aa>=bb}div(a,b){return this.mul(a,this.inv(b))}idiv(a,b){if(!b)throw Error("Division by zero");return a/b}inv(a){if(!a)throw Error("Division by zero");let t=this.zero,r=this.p,newt=this.one,newr=a%this.p;for(;newr;){let q=r/newr;[t,newt]=[newt,t-q*newt],[r,newr]=[newr,r-q*newr]}return t<this.zero&&(t+=this.p),t}mod(a,b){return a%b}pow(b,e){return futils_exp(this,b,e)}exp(b,e){return futils_exp(this,b,e)}band(a,b){let res=a&b&this.mask;return res>=this.p?res-this.p:res}bor(a,b){let res=(a|b)&this.mask;return res>=this.p?res-this.p:res}bxor(a,b){let res=(a^b)&this.mask;return res>=this.p?res-this.p:res}bnot(a){let res=a^this.mask;return res>=this.p?res-this.p:res}shl(a,b){if(Number(b)<this.bitLength){let res=a<<b&this.mask;return res>=this.p?res-this.p:res}{let nb=this.p-b;return Number(nb)<this.bitLength?a>>nb:this.zero}}shr(a,b){if(Number(b)<this.bitLength)return a>>b;{let nb=this.p-b;if(!(Number(nb)<this.bitLength))return 0;{let res=a<<nb&this.mask;return res>=this.p?res-this.p:res}}}land(a,b){return a&&b?this.one:this.zero}lor(a,b){return a||b?this.one:this.zero}lnot(a){return a?this.zero:this.one}sqrt_old(n){if(n==this.zero)return this.zero;let res=this.pow(n,this.negone>>this.one);if(res!=this.one)return null;let m=this.s,c=this.nqr_to_t,t=this.pow(n,this.t),r=this.pow(n,this.add(this.t,this.one)>>this.one);for(;t!=this.one;){let sq=this.square(t),i=1;for(;sq!=this.one;)i++,sq=this.square(sq);let b=c;for(let j=0;j<m-i-1;j++)b=this.square(b);m=i,c=this.square(b),t=this.mul(t,c),r=this.mul(r,b)}return r>this.p>>this.one&&(r=this.neg(r)),r}normalize(a,b){if(!((a=BigInt(a,b))<0))return a>=this.p?a%this.p:a;{let na=-a;return na>=this.p&&(na%=this.p),this.p-na}}random(){let nBytes=2*this.bitLength/8,res=this.zero;for(let i=0;i<nBytes;i++)res=(res<<BigInt(8))+BigInt(getRandomBytes(1)[0]);return res%this.p}toString(a,base){let vs;if(base=base||10,a>this.half&&10==base){let v=this.p-a;vs="-"+v.toString(base)}else vs=a.toString(base);return vs}isZero(a){return a==this.zero}fromRng(rng){let v;do{v=this.zero;for(let i=0;i<this.n64;i++)v+=rng.nextU64()<<BigInt(64*i);v&=this.mask}while(v>=this.p);return v*this.Ri%this.p}fft(a){return this.FFT.fft(a)}ifft(a){return this.FFT.ifft(a)}toRprLE(buff,o,e){toRprLE(buff,o,e,8*this.n64)}toRprBE(buff,o,e){toRprBE(buff,o,e,8*this.n64)}toRprBEM(buff,o,e){return this.toRprBE(buff,o,this.mul(this.R,e))}toRprLEM(buff,o,e){return this.toRprLE(buff,o,this.mul(this.R,e))}fromRprLE(buff,o){return fromRprLE(buff,o,this.n8)}fromRprBE(buff,o){return fromRprBE(buff,o,this.n8)}fromRprLEM(buff,o){return this.mul(this.fromRprLE(buff,o),this.Ri)}fromRprBEM(buff,o){return this.mul(this.fromRprBE(buff,o),this.Ri)}toObject(a){return a}}class F2Field{constructor(F,nonResidue){this.type="F2",this.F=F,this.zero=[this.F.zero,this.F.zero],this.one=[this.F.one,this.F.zero],this.negone=this.neg(this.one),this.nonResidue=nonResidue,this.m=2*F.m,this.p=F.p,this.n64=2*F.n64,this.n32=2*this.n64,this.n8=8*this.n64,buildSqrt(this)}_mulByNonResidue(a){return this.F.mul(this.nonResidue,a)}copy(a){return[this.F.copy(a[0]),this.F.copy(a[1])]}add(a,b){return[this.F.add(a[0],b[0]),this.F.add(a[1],b[1])]}double(a){return this.add(a,a)}sub(a,b){return[this.F.sub(a[0],b[0]),this.F.sub(a[1],b[1])]}neg(a){return this.sub(this.zero,a)}conjugate(a){return[a[0],this.F.neg(a[1])]}mul(a,b){let aA=this.F.mul(a[0],b[0]),bB=this.F.mul(a[1],b[1]);return[this.F.add(aA,this._mulByNonResidue(bB)),this.F.sub(this.F.mul(this.F.add(a[0],a[1]),this.F.add(b[0],b[1])),this.F.add(aA,bB))]}inv(a){let t0=this.F.square(a[0]),t1=this.F.square(a[1]),t2=this.F.sub(t0,this._mulByNonResidue(t1)),t3=this.F.inv(t2);return[this.F.mul(a[0],t3),this.F.neg(this.F.mul(a[1],t3))]}div(a,b){return this.mul(a,this.inv(b))}square(a){let ab=this.F.mul(a[0],a[1]);return[this.F.sub(this.F.mul(this.F.add(a[0],a[1]),this.F.add(a[0],this._mulByNonResidue(a[1]))),this.F.add(ab,this._mulByNonResidue(ab))),this.F.add(ab,ab)]}isZero(a){return this.F.isZero(a[0])&&this.F.isZero(a[1])}eq(a,b){return this.F.eq(a[0],b[0])&&this.F.eq(a[1],b[1])}mulScalar(base,e){return mulScalar(this,base,e)}pow(base,e){return futils_exp(this,base,e)}exp(base,e){return futils_exp(this,base,e)}toString(a){return`[ ${this.F.toString(a[0])} , ${this.F.toString(a[1])} ]`}fromRng(rng){let c0=this.F.fromRng(rng),c1=this.F.fromRng(rng);return[c0,c1]}gt(a,b){return!!this.F.gt(a[0],b[0])||!this.F.gt(b[0],a[0])&&!!this.F.gt(a[1],b[1])}geq(a,b){return this.gt(a,b)||this.eq(a,b)}lt(a,b){return!this.geq(a,b)}leq(a,b){return!this.gt(a,b)}neq(a,b){return!this.eq(a,b)}random(){return[this.F.random(),this.F.random()]}toRprLE(buff,o,e){this.F.toRprLE(buff,o,e[0]),this.F.toRprLE(buff,o+this.F.n8,e[1])}toRprBE(buff,o,e){this.F.toRprBE(buff,o,e[1]),this.F.toRprBE(buff,o+this.F.n8,e[0])}toRprLEM(buff,o,e){this.F.toRprLEM(buff,o,e[0]),this.F.toRprLEM(buff,o+this.F.n8,e[1])}toRprBEM(buff,o,e){this.F.toRprBEM(buff,o,e[1]),this.F.toRprBEM(buff,o+this.F.n8,e[0])}fromRprLE(buff,o){o=o||0;let c0=this.F.fromRprLE(buff,o),c1=this.F.fromRprLE(buff,o+this.F.n8);return[c0,c1]}fromRprBE(buff,o){o=o||0;let c1=this.F.fromRprBE(buff,o),c0=this.F.fromRprBE(buff,o+this.F.n8);return[c0,c1]}fromRprLEM(buff,o){o=o||0;let c0=this.F.fromRprLEM(buff,o),c1=this.F.fromRprLEM(buff,o+this.F.n8);return[c0,c1]}fromRprBEM(buff,o){o=o||0;let c1=this.F.fromRprBEM(buff,o),c0=this.F.fromRprBEM(buff,o+this.F.n8);return[c0,c1]}toObject(a){return a}}class F3Field{constructor(F,nonResidue){this.type="F3",this.F=F,this.zero=[this.F.zero,this.F.zero,this.F.zero],this.one=[this.F.one,this.F.zero,this.F.zero],this.negone=this.neg(this.one),this.nonResidue=nonResidue,this.m=3*F.m,this.p=F.p,this.n64=3*F.n64,this.n32=2*this.n64,this.n8=8*this.n64}_mulByNonResidue(a){return this.F.mul(this.nonResidue,a)}copy(a){return[this.F.copy(a[0]),this.F.copy(a[1]),this.F.copy(a[2])]}add(a,b){return[this.F.add(a[0],b[0]),this.F.add(a[1],b[1]),this.F.add(a[2],b[2])]}double(a){return this.add(a,a)}sub(a,b){return[this.F.sub(a[0],b[0]),this.F.sub(a[1],b[1]),this.F.sub(a[2],b[2])]}neg(a){return this.sub(this.zero,a)}mul(a,b){let aA=this.F.mul(a[0],b[0]),bB=this.F.mul(a[1],b[1]),cC=this.F.mul(a[2],b[2]);return[this.F.add(aA,this._mulByNonResidue(this.F.sub(this.F.mul(this.F.add(a[1],a[2]),this.F.add(b[1],b[2])),this.F.add(bB,cC)))),this.F.add(this.F.sub(this.F.mul(this.F.add(a[0],a[1]),this.F.add(b[0],b[1])),this.F.add(aA,bB)),this._mulByNonResidue(cC)),this.F.add(this.F.sub(this.F.mul(this.F.add(a[0],a[2]),this.F.add(b[0],b[2])),this.F.add(aA,cC)),bB)]}inv(a){let t0=this.F.square(a[0]),t1=this.F.square(a[1]),t2=this.F.square(a[2]),t3=this.F.mul(a[0],a[1]),t4=this.F.mul(a[0],a[2]),t5=this.F.mul(a[1],a[2]),c0=this.F.sub(t0,this._mulByNonResidue(t5)),c1=this.F.sub(this._mulByNonResidue(t2),t3),c2=this.F.sub(t1,t4),t6=this.F.inv(this.F.add(this.F.mul(a[0],c0),this._mulByNonResidue(this.F.add(this.F.mul(a[2],c1),this.F.mul(a[1],c2)))));return[this.F.mul(t6,c0),this.F.mul(t6,c1),this.F.mul(t6,c2)]}div(a,b){return this.mul(a,this.inv(b))}square(a){let s0=this.F.square(a[0]),ab=this.F.mul(a[0],a[1]),s1=this.F.add(ab,ab),s2=this.F.square(this.F.add(this.F.sub(a[0],a[1]),a[2])),bc=this.F.mul(a[1],a[2]),s3=this.F.add(bc,bc),s4=this.F.square(a[2]);return[this.F.add(s0,this._mulByNonResidue(s3)),this.F.add(s1,this._mulByNonResidue(s4)),this.F.sub(this.F.add(this.F.add(s1,s2),s3),this.F.add(s0,s4))]}isZero(a){return this.F.isZero(a[0])&&this.F.isZero(a[1])&&this.F.isZero(a[2])}eq(a,b){return this.F.eq(a[0],b[0])&&this.F.eq(a[1],b[1])&&this.F.eq(a[2],b[2])}affine(a){return[this.F.affine(a[0]),this.F.affine(a[1]),this.F.affine(a[2])]}mulScalar(base,e){return mulScalar(this,base,e)}pow(base,e){return futils_exp(this,base,e)}exp(base,e){return futils_exp(this,base,e)}toString(a){return`[ ${this.F.toString(a[0])} , ${this.F.toString(a[1])}, ${this.F.toString(a[2])} ]`}fromRng(rng){let c0=this.F.fromRng(rng),c1=this.F.fromRng(rng),c2=this.F.fromRng(rng);return[c0,c1,c2]}gt(a,b){return!!this.F.gt(a[0],b[0])||!this.F.gt(b[0],a[0])&&(!!this.F.gt(a[1],b[1])||!this.F.gt(b[1],a[1])&&!!this.F.gt(a[2],b[2]))}geq(a,b){return this.gt(a,b)||this.eq(a,b)}lt(a,b){return!this.geq(a,b)}leq(a,b){return!this.gt(a,b)}neq(a,b){return!this.eq(a,b)}random(){return[this.F.random(),this.F.random(),this.F.random()]}toRprLE(buff,o,e){this.F.toRprLE(buff,o,e[0]),this.F.toRprLE(buff,o+this.F.n8,e[1]),this.F.toRprLE(buff,o+2*this.F.n8,e[2])}toRprBE(buff,o,e){this.F.toRprBE(buff,o,e[2]),this.F.toRprBE(buff,o+this.F.n8,e[1]),this.F.toRprBE(buff,o+2*this.F.n8,e[0])}toRprLEM(buff,o,e){this.F.toRprLEM(buff,o,e[0]),this.F.toRprLEM(buff,o+this.F.n8,e[1]),this.F.toRprLEM(buff,o+2*this.F.n8,e[2])}toRprBEM(buff,o,e){this.F.toRprBEM(buff,o,e[2]),this.F.toRprBEM(buff,o+this.F.n8,e[1]),this.F.toRprBEM(buff,o+2*this.F.n8,e[0])}fromRprLE(buff,o){o=o||0;let c0=this.F.fromRprLE(buff,o),c1=this.F.fromRprLE(buff,o+this.n8),c2=this.F.fromRprLE(buff,o+2*this.n8);return[c0,c1,c2]}fromRprBE(buff,o){o=o||0;let c2=this.F.fromRprBE(buff,o),c1=this.F.fromRprBE(buff,o+this.n8),c0=this.F.fromRprBE(buff,o+2*this.n8);return[c0,c1,c2]}fromRprLEM(buff,o){o=o||0;let c0=this.F.fromRprLEM(buff,o),c1=this.F.fromRprLEM(buff,o+this.n8),c2=this.F.fromRprLEM(buff,o+2*this.n8);return[c0,c1,c2]}fromRprBEM(buff,o){o=o||0;let c2=this.F.fromRprBEM(buff,o),c1=this.F.fromRprBEM(buff,o+this.n8),c0=this.F.fromRprBEM(buff,o+2*this.n8);return[c0,c1,c2]}toObject(a){return a}}function isGreatest(F,a){if(Array.isArray(a)){for(let i=a.length-1;i>=0;i--)if(!F.F.isZero(a[i]))return isGreatest(F.F,a[i]);return 0}{let na=F.neg(a);return gt(a,na)}}class EC{constructor(F,g){this.F=F,this.g=g,2==this.g.length&&(this.g[2]=this.F.one),this.zero=[this.F.zero,this.F.one,this.F.zero]}add(p1,p2){let F=this.F;if(this.eq(p1,this.zero))return p2;if(this.eq(p2,this.zero))return p1;let res=[,,,],Z1Z1=F.square(p1[2]),Z2Z2=F.square(p2[2]),U1=F.mul(p1[0],Z2Z2),U2=F.mul(p2[0],Z1Z1),Z1_cubed=F.mul(p1[2],Z1Z1),Z2_cubed=F.mul(p2[2],Z2Z2),S1=F.mul(p1[1],Z2_cubed),S2=F.mul(p2[1],Z1_cubed);if(F.eq(U1,U2)&&F.eq(S1,S2))return this.double(p1);let H=F.sub(U2,U1),S2_minus_S1=F.sub(S2,S1),I=F.square(F.add(H,H)),J=F.mul(H,I),r=F.add(S2_minus_S1,S2_minus_S1),V=F.mul(U1,I);res[0]=F.sub(F.sub(F.square(r),J),F.add(V,V));let S1_J=F.mul(S1,J);return res[1]=F.sub(F.mul(r,F.sub(V,res[0])),F.add(S1_J,S1_J)),res[2]=F.mul(H,F.sub(F.square(F.add(p1[2],p2[2])),F.add(Z1Z1,Z2Z2))),res}neg(p){return[p[0],this.F.neg(p[1]),p[2]]}sub(a,b){return this.add(a,this.neg(b))}double(p){let F=this.F,res=[,,,];if(this.eq(p,this.zero))return p;let A=F.square(p[0]),B=F.square(p[1]),C=F.square(B),D=F.sub(F.square(F.add(p[0],B)),F.add(A,C));D=F.add(D,D);let E=F.add(F.add(A,A),A),FF=F.square(E);res[0]=F.sub(FF,F.add(D,D));let eightC=F.add(C,C);eightC=F.add(eightC,eightC),eightC=F.add(eightC,eightC),res[1]=F.sub(F.mul(E,F.sub(D,res[0])),eightC);let Y1Z1=F.mul(p[1],p[2]);return res[2]=F.add(Y1Z1,Y1Z1),res}timesScalar(base,e){return mulScalar(this,base,e)}mulScalar(base,e){return mulScalar(this,base,e)}affine(p){let F=this.F;if(this.isZero(p))return this.zero;if(F.eq(p[2],F.one))return p;{let Z_inv=F.inv(p[2]),Z2_inv=F.square(Z_inv),Z3_inv=F.mul(Z2_inv,Z_inv),res=[,,,];return res[0]=F.mul(p[0],Z2_inv),res[1]=F.mul(p[1],Z3_inv),res[2]=F.one,res}}multiAffine(arr){let keys=Object.keys(arr),F=this.F,accMul=Array(keys.length+1);accMul[0]=F.one;for(let i=0;i<keys.length;i++)F.eq(arr[keys[i]][2],F.zero)?accMul[i+1]=accMul[i]:accMul[i+1]=F.mul(accMul[i],arr[keys[i]][2]);accMul[keys.length]=F.inv(accMul[keys.length]);for(let i1=keys.length-1;i1>=0;i1--)if(F.eq(arr[keys[i1]][2],F.zero))accMul[i1]=accMul[i1+1],arr[keys[i1]]=this.zero;else{let Z_inv=F.mul(accMul[i1],accMul[i1+1]);accMul[i1]=F.mul(arr[keys[i1]][2],accMul[i1+1]);let Z2_inv=F.square(Z_inv),Z3_inv=F.mul(Z2_inv,Z_inv);arr[keys[i1]][0]=F.mul(arr[keys[i1]][0],Z2_inv),arr[keys[i1]][1]=F.mul(arr[keys[i1]][1],Z3_inv),arr[keys[i1]][2]=F.one}}eq(p1,p2){let F=this.F;if(this.F.eq(p1[2],this.F.zero))return this.F.eq(p2[2],this.F.zero);if(this.F.eq(p2[2],this.F.zero))return!1;let Z1Z1=F.square(p1[2]),Z2Z2=F.square(p2[2]),U1=F.mul(p1[0],Z2Z2),U2=F.mul(p2[0],Z1Z1),Z1_cubed=F.mul(p1[2],Z1Z1),Z2_cubed=F.mul(p2[2],Z2Z2),S1=F.mul(p1[1],Z2_cubed),S2=F.mul(p2[1],Z1_cubed);return F.eq(U1,U2)&&F.eq(S1,S2)}isZero(p){return this.F.isZero(p[2])}toString(p){let cp=this.affine(p);return`[ ${this.F.toString(cp[0])} , ${this.F.toString(cp[1])} ]`}fromRng(rng){let greatest;let F=this.F,P=[];do{P[0]=F.fromRng(rng),greatest=rng.nextBool();let x3b=F.add(F.mul(F.square(P[0]),P[0]),this.b);P[1]=F.sqrt(x3b)}while(null==P[1]||F.isZero[P]);let s=isGreatest(F,P[1]);return greatest^s&&(P[1]=F.neg(P[1])),P[2]=F.one,this.cofactor&&(P=this.mulScalar(P,this.cofactor)),P=this.affine(P)}toRprLE(buff,o,p){if(p=this.affine(p),this.isZero(p)){let BuffV=new Uint8Array(buff,o,2*this.F.n8);BuffV.fill(0);return}this.F.toRprLE(buff,o,p[0]),this.F.toRprLE(buff,o+this.F.n8,p[1])}toRprBE(buff,o,p){if(p=this.affine(p),this.isZero(p)){let BuffV=new Uint8Array(buff,o,2*this.F.n8);BuffV.fill(0);return}this.F.toRprBE(buff,o,p[0]),this.F.toRprBE(buff,o+this.F.n8,p[1])}toRprLEM(buff,o,p){if(p=this.affine(p),this.isZero(p)){let BuffV=new Uint8Array(buff,o,2*this.F.n8);BuffV.fill(0);return}this.F.toRprLEM(buff,o,p[0]),this.F.toRprLEM(buff,o+this.F.n8,p[1])}toRprLEJM(buff,o,p){if(p=this.affine(p),this.isZero(p)){let BuffV=new Uint8Array(buff,o,2*this.F.n8);BuffV.fill(0);return}this.F.toRprLEM(buff,o,p[0]),this.F.toRprLEM(buff,o+this.F.n8,p[1]),this.F.toRprLEM(buff,o+2*this.F.n8,p[2])}toRprBEM(buff,o,p){if(p=this.affine(p),this.isZero(p)){let BuffV=new Uint8Array(buff,o,2*this.F.n8);BuffV.fill(0);return}this.F.toRprBEM(buff,o,p[0]),this.F.toRprBEM(buff,o+this.F.n8,p[1])}fromRprLE(buff,o){o=o||0;let x=this.F.fromRprLE(buff,o),y=this.F.fromRprLE(buff,o+this.F.n8);return this.F.isZero(x)&&this.F.isZero(y)?this.zero:[x,y,this.F.one]}fromRprBE(buff,o){o=o||0;let x=this.F.fromRprBE(buff,o),y=this.F.fromRprBE(buff,o+this.F.n8);return this.F.isZero(x)&&this.F.isZero(y)?this.zero:[x,y,this.F.one]}fromRprLEM(buff,o){o=o||0;let x=this.F.fromRprLEM(buff,o),y=this.F.fromRprLEM(buff,o+this.F.n8);return this.F.isZero(x)&&this.F.isZero(y)?this.zero:[x,y,this.F.one]}fromRprLEJM(buff,o){o=o||0;let x=this.F.fromRprLEM(buff,o),y=this.F.fromRprLEM(buff,o+this.F.n8),z=this.F.fromRprLEM(buff,o+2*this.F.n8);return this.F.isZero(x)&&this.F.isZero(y)?this.zero:[x,y,z]}fromRprBEM(buff,o){o=o||0;let x=this.F.fromRprBEM(buff,o),y=this.F.fromRprBEM(buff,o+this.F.n8);return this.F.isZero(x)&&this.F.isZero(y)?this.zero:[x,y,this.F.one]}fromRprCompressed(buff,o){let F=this.F,v=new Uint8Array(buff.buffer,o,F.n8);if(64&v[0])return this.zero;let P=[,,,],greatest=(128&v[0])!=0;v[0]=127&v[0],P[0]=F.fromRprBE(buff,o),greatest&&(v[0]=128|v[0]);let x3b=F.add(F.mul(F.square(P[0]),P[0]),this.b);if(P[1]=F.sqrt(x3b),null===P[1])throw Error("Invalid Point!");let s=isGreatest(F,P[1]);return greatest^s&&(P[1]=F.neg(P[1])),P[2]=F.one,P}toRprCompressed(buff,o,p){p=this.affine(p);let v=new Uint8Array(buff.buffer,o,this.F.n8);if(this.isZero(p)){v.fill(0),v[0]=64;return}this.F.toRprBE(buff,o,p[0]),isGreatest(this.F,p[1])&&(v[0]=128|v[0])}fromRprUncompressed(buff,o){return 64&buff[0]?this.zero:this.fromRprBE(buff,o)}toRprUncompressed(buff,o,p){this.toRprBE(buff,o,p),this.isZero(p)&&(buff[o]=64|buff[o])}}var wasmcurves=__webpack_require__(1493);function stringifyBigInts(o){if("bigint"==typeof o||void 0!==o.eq)return o.toString(10);if(o instanceof Uint8Array)return fromRprLE(o,0);if(Array.isArray(o))return o.map(stringifyBigInts);{if("object"!=typeof o)return o;let res={},keys=Object.keys(o);return keys.forEach(k=>{res[k]=stringifyBigInts(o[k])}),res}}function unstringifyBigInts(o){if("string"==typeof o&&/^[0-9]+$/.test(o)||"string"==typeof o&&/^0x[0-9a-fA-F]+$/.test(o))return BigInt(o);if(Array.isArray(o))return o.map(unstringifyBigInts);{if("object"!=typeof o)return o;if(null===o)return null;let res={},keys=Object.keys(o);return keys.forEach(k=>{res[k]=unstringifyBigInts(o[k])}),res}}function beBuff2int(buff){let res=BigInt(0),i=buff.length,offset=0,buffV=new DataView(buff.buffer,buff.byteOffset,buff.byteLength);for(;i>0;)i>=4?(i-=4,res+=BigInt(buffV.getUint32(i))<<BigInt(8*offset),offset+=4):i>=2?(i-=2,res+=BigInt(buffV.getUint16(i))<<BigInt(8*offset),offset+=2):(i-=1,res+=BigInt(buffV.getUint8(i))<<BigInt(8*offset),offset+=1);return res}function beInt2Buff(n,len){let r=n,buff=new Uint8Array(len),buffV=new DataView(buff.buffer),o=len;for(;o>0;)o-4>=0?(o-=4,buffV.setUint32(o,Number(r&BigInt(4294967295))),r>>=BigInt(32)):o-2>=0?(o-=2,buffV.setUint16(o,Number(r&BigInt(65535))),r>>=BigInt(16)):(o-=1,buffV.setUint8(o,Number(r&BigInt(255))),r>>=BigInt(8));if(r)throw Error("Number does not fit in this length");return buff}function leBuff2int(buff){let res=BigInt(0),i=0,buffV=new DataView(buff.buffer,buff.byteOffset,buff.byteLength);for(;i<buff.length;)i+4<=buff.length?(res+=BigInt(buffV.getUint32(i,!0))<<BigInt(8*i),i+=4):i+2<=buff.length?(res+=BigInt(buffV.getUint16(i,!0))<<BigInt(8*i),i+=2):(res+=BigInt(buffV.getUint8(i,!0))<<BigInt(8*i),i+=1);return res}function leInt2Buff(n,len){let r=n;void 0===len&&0==(len=Math.floor((bitLength(n)-1)/8)+1)&&(len=1);let buff=new Uint8Array(len),buffV=new DataView(buff.buffer),o=0;for(;o<len;)o+4<=len?(buffV.setUint32(o,Number(r&BigInt(4294967295)),!0),o+=4,r>>=BigInt(32)):o+2<=len?(buffV.setUint16(o,Number(r&BigInt(65535)),!0),o+=2,r>>=BigInt(16)):(buffV.setUint8(o,Number(r&BigInt(255)),!0),o+=1,r>>=BigInt(8));if(r)throw Error("Number does not fit in this length");return buff}function stringifyFElements(F,o){if("bigint"==typeof o||void 0!==o.eq)return o.toString(10);if(o instanceof Uint8Array)return F.toString(F.e(o));if(Array.isArray(o))return o.map(stringifyFElements.bind(this,F));{if("object"!=typeof o)return o;let res={},keys=Object.keys(o);return keys.forEach(k=>{res[k]=stringifyFElements(F,o[k])}),res}}function unstringifyFElements(F,o){if("string"==typeof o&&/^[0-9]+$/.test(o)||"string"==typeof o&&/^0x[0-9a-fA-F]+$/.test(o))return F.e(o);if(Array.isArray(o))return o.map(unstringifyFElements.bind(this,F));{if("object"!=typeof o)return o;if(null===o)return null;let res={},keys=Object.keys(o);return keys.forEach(k=>{res[k]=unstringifyFElements(F,o[k])}),res}}let utils_revTable=[];for(let i1=0;i1<256;i1++)utils_revTable[i1]=utils_revSlow(i1,8);function utils_revSlow(idx,bits){let res=0,a=idx;for(let i=0;i<bits;i++)res<<=1,res|=1&a,a>>=1;return res}function bitReverse(idx,bits){return(utils_revTable[idx>>>24]|utils_revTable[idx>>>16&255]<<8|utils_revTable[idx>>>8&255]<<16|utils_revTable[255&idx]<<24)>>>32-bits}function utils_log2(V){return((4294901760&V)!=0?(V&=4294901760,16):0)|((4278255360&V)!=0?(V&=4278255360,8):0)|((4042322160&V)!=0?(V&=4042322160,4):0)|((3435973836&V)!=0?(V&=3435973836,2):0)|(2863311530&V)!=0}function buffReverseBits(buff,eSize){let n=buff.byteLength/eSize,bits=utils_log2(n);if(n!=1<<bits)throw Error("Invalid number of pointers");for(let i=0;i<n;i++){let r=bitReverse(i,bits);if(i>r){let tmp=buff.slice(i*eSize,(i+1)*eSize);buff.set(buff.slice(r*eSize,(r+1)*eSize),i*eSize),buff.set(tmp,r*eSize)}}}function array2buffer(arr,sG){let buff=new Uint8Array(sG*arr.length);for(let i=0;i<arr.length;i++)buff.set(arr[i],i*sG);return buff}function buffer2array(buff,sG){let n=buff.byteLength/sG,arr=Array(n);for(let i=0;i<n;i++)arr[i]=buff.slice(i*sG,i*sG+sG);return arr}let PAGE_SIZE=1073741824;class BigBuffer{constructor(size){this.buffers=[],this.byteLength=size;for(let i=0;i<size;i+=PAGE_SIZE){let n=Math.min(size-i,PAGE_SIZE);this.buffers.push(new Uint8Array(n))}}slice(fr,to){let buff;void 0===to&&(to=this.byteLength),void 0===fr&&(fr=0);let len=to-fr,firstPage=Math.floor(fr/PAGE_SIZE),lastPage=Math.floor((fr+len-1)/PAGE_SIZE);if(firstPage==lastPage||0==len)return this.buffers[firstPage].slice(fr%PAGE_SIZE,fr%PAGE_SIZE+len);let p=firstPage,o=fr%PAGE_SIZE,r=len;for(;r>0;){let l=o+r>PAGE_SIZE?PAGE_SIZE-o:r,srcView=new Uint8Array(this.buffers[p].buffer,this.buffers[p].byteOffset+o,l);if(l==len)return srcView.slice();buff||(buff=len<=PAGE_SIZE?new Uint8Array(len):new BigBuffer(len)),buff.set(srcView,len-r),r-=l,p++,o=0}return buff}set(buff,offset){void 0===offset&&(offset=0);let len=buff.byteLength;if(0==len)return;let firstPage=Math.floor(offset/PAGE_SIZE),lastPage=Math.floor((offset+len-1)/PAGE_SIZE);if(firstPage==lastPage)return buff instanceof BigBuffer&&1==buff.buffers.length?this.buffers[firstPage].set(buff.buffers[0],offset%PAGE_SIZE):this.buffers[firstPage].set(buff,offset%PAGE_SIZE);let p=firstPage,o=offset%PAGE_SIZE,r=len;for(;r>0;){let l=o+r>PAGE_SIZE?PAGE_SIZE-o:r,srcView=buff.slice(len-r,len-r+l),dstView=new Uint8Array(this.buffers[p].buffer,this.buffers[p].byteOffset+o,l);dstView.set(srcView),r-=l,p++,o=0}}}function buildBatchConvert(tm,fnName,sIn,sOut){return async function(buffIn){let fullBuffOut;let nPoints=Math.floor(buffIn.byteLength/sIn);if(nPoints*sIn!==buffIn.byteLength)throw Error("Invalid buffer size");let pointsPerChunk=Math.floor(nPoints/tm.concurrency),opPromises=[];for(let i=0;i<tm.concurrency;i++){let n;if(0==(n=i<tm.concurrency-1?pointsPerChunk:nPoints-i*pointsPerChunk))continue;let buffChunk=buffIn.slice(i*pointsPerChunk*sIn,i*pointsPerChunk*sIn+n*sIn),task=[{cmd:"ALLOCSET",var:0,buff:buffChunk},{cmd:"ALLOC",var:1,len:sOut*n},{cmd:"CALL",fnName:fnName,params:[{var:0},{val:n},{var:1}]},{cmd:"GET",out:0,var:1,len:sOut*n}];opPromises.push(tm.queueAction(task))}let result=await Promise.all(opPromises);fullBuffOut=buffIn instanceof BigBuffer?new BigBuffer(nPoints*sOut):new Uint8Array(nPoints*sOut);let p=0;for(let i1=0;i1<result.length;i1++)fullBuffOut.set(result[i1][0],p),p+=result[i1][0].byteLength;return fullBuffOut}}class WasmField1{constructor(tm,prefix,n8,p){if(this.tm=tm,this.prefix=prefix,this.p=p,this.n8=n8,this.type="F1",this.m=1,this.half=shiftRight(p,one),this.bitLength=bitLength(p),this.mask=sub(shiftLeft(one,this.bitLength),one),this.pOp1=tm.alloc(n8),this.pOp2=tm.alloc(n8),this.pOp3=tm.alloc(n8),this.tm.instance.exports[prefix+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[prefix+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(n8/8),this.n32=Math.floor(n8/4),8*this.n64!=this.n8)throw Error("n8 must be a multiple of 8");this.half=shiftRight(this.p,one),this.nqr=this.two;let r=this.exp(this.nqr,this.half);for(;!this.eq(r,this.negone);)this.nqr=this.add(this.nqr,this.one),r=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let t=sub(this.p,one);for(;!isOdd(t);)this.s=this.s+1,t=shiftRight(t,one);this.w=[],this.w[this.s]=this.exp(this.nqr,t);for(let i=this.s-1;i>=0;i--)this.w[i]=this.square(this.w[i+1]);if(!this.eq(this.w[0],this.one))throw Error("Error calculating roots of unity");this.batchToMontgomery=buildBatchConvert(tm,prefix+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=buildBatchConvert(tm,prefix+"_batchFromMontgomery",this.n8,this.n8)}op2(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2)}op1(opName,a){return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(opName,a){return this.tm.setBuff(this.pOp1,a),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3)}add(a,b){return this.op2("_add",a,b)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=toLEBuff(e(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(a){return this.op1Bool("_isNegative",a)}e(a,b){if(a instanceof Uint8Array)return a;let ra=e(a,b);isNegative(ra)?(gt(ra=neg(ra),this.p)&&(ra=mod(ra,this.p)),ra=sub(this.p,ra)):gt(ra,this.p)&&(ra=mod(ra,this.p));let buff=leInt2Buff(ra,this.n8);return this.toMontgomery(buff)}toString(a,radix){let an=this.fromMontgomery(a),s=fromRprLE(an,0);return scalar_toString(s,radix)}fromRng(rng){let v;let buff=new Uint8Array(this.n8);do{v=zero;for(let i=0;i<this.n64;i++)v=add(v,shiftLeft(rng.nextU64(),64*i));v=band(v,this.mask)}while(geq(v,this.p));return toRprLE(buff,0,v,this.n8),buff}random(){return this.fromRng(getThreadRng())}toObject(a){let an=this.fromMontgomery(a);return fromRprLE(an,0)}fromObject(a){let buff=new Uint8Array(this.n8);return toRprLE(buff,0,a,this.n8),this.toMontgomery(buff)}toRprLE(buff,offset,a){buff.set(this.fromMontgomery(a),offset)}toRprBE(buff,offset,a){let buff2=this.fromMontgomery(a);for(let i=0;i<this.n8/2;i++){let aux=buff2[i];buff2[i]=buff2[this.n8-1-i],buff2[this.n8-1-i]=aux}buff.set(buff2,offset)}fromRprLE(buff,offset){offset=offset||0;let res=buff.slice(offset,offset+this.n8);return this.toMontgomery(res)}async batchInverse(buffIn){let fullBuffOut,returnArray=!1,sIn=this.n8,sOut=this.n8;Array.isArray(buffIn)?(buffIn=array2buffer(buffIn,sIn),returnArray=!0):buffIn=buffIn.slice(0,buffIn.byteLength);let nPoints=Math.floor(buffIn.byteLength/sIn);if(nPoints*sIn!==buffIn.byteLength)throw Error("Invalid buffer size");let pointsPerChunk=Math.floor(nPoints/this.tm.concurrency),opPromises=[];for(let i=0;i<this.tm.concurrency;i++){let n;if(0==(n=i<this.tm.concurrency-1?pointsPerChunk:nPoints-i*pointsPerChunk))continue;let buffChunk=buffIn.slice(i*pointsPerChunk*sIn,i*pointsPerChunk*sIn+n*sIn),task=[{cmd:"ALLOCSET",var:0,buff:buffChunk},{cmd:"ALLOC",var:1,len:sOut*n},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:sIn},{val:n},{var:1},{val:sOut}]},{cmd:"GET",out:0,var:1,len:sOut*n}];opPromises.push(this.tm.queueAction(task))}let result=await Promise.all(opPromises);fullBuffOut=buffIn instanceof BigBuffer?new BigBuffer(nPoints*sOut):new Uint8Array(nPoints*sOut);let p=0;for(let i1=0;i1<result.length;i1++)fullBuffOut.set(result[i1][0],p),p+=result[i1][0].byteLength;return returnArray?buffer2array(fullBuffOut,sOut):fullBuffOut}}class WasmField2{constructor(tm,prefix,F){this.tm=tm,this.prefix=prefix,this.F=F,this.type="F2",this.m=2*F.m,this.n8=2*this.F.n8,this.n32=2*this.F.n32,this.n64=2*this.F.n64,this.pOp1=tm.alloc(2*F.n8),this.pOp2=tm.alloc(2*F.n8),this.pOp3=tm.alloc(2*F.n8),this.tm.instance.exports[prefix+"_zero"](this.pOp1),this.zero=tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[prefix+"_one"](this.pOp1),this.one=tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2)}op1(opName,a){return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(opName,a){return this.tm.setBuff(this.pOp1,a),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3)}add(a,b){return this.op2("_add",a,b)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}isNegative(a){return this.op1Bool("_isNegative",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}mul1(a,b){return this.op2("_mul1",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=toLEBuff(e(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(a,b){if(a instanceof Uint8Array)return a;if(Array.isArray(a)&&2==a.length){let c1=this.F.e(a[0],b),c2=this.F.e(a[1],b),res=new Uint8Array(2*this.F.n8);return res.set(c1),res.set(c2,2*this.F.n8),res}throw Error("invalid F2")}toString(a,radix){let s1=this.F.toString(a.slice(0,this.F.n8),radix),s2=this.F.toString(a.slice(this.F.n8),radix);return`[${s1}, ${s2}]`}fromRng(rng){let c1=this.F.fromRng(rng),c2=this.F.fromRng(rng),res=new Uint8Array(2*this.F.n8);return res.set(c1),res.set(c2,this.F.n8),res}random(){return this.fromRng(getThreadRng())}toObject(a){let c1=this.F.toObject(a.slice(0,this.F.n8)),c2=this.F.toObject(a.slice(this.F.n8,2*this.F.n8));return[c1,c2]}fromObject(a){let buff=new Uint8Array(2*this.F.n8),b1=this.F.fromObject(a[0]),b2=this.F.fromObject(a[1]);return buff.set(b1),buff.set(b2,this.F.n8),buff}c1(a){return a.slice(0,this.F.n8)}c2(a){return a.slice(this.F.n8)}}class WasmField3{constructor(tm,prefix,F){this.tm=tm,this.prefix=prefix,this.F=F,this.type="F3",this.m=3*F.m,this.n8=3*this.F.n8,this.n32=3*this.F.n32,this.n64=3*this.F.n64,this.pOp1=tm.alloc(3*F.n8),this.pOp2=tm.alloc(3*F.n8),this.pOp3=tm.alloc(3*F.n8),this.tm.instance.exports[prefix+"_zero"](this.pOp1),this.zero=tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[prefix+"_one"](this.pOp1),this.one=tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2)}op1(opName,a){return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(opName,a){return this.tm.setBuff(this.pOp1,a),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}add(a,b){return this.op2("_add",a,b)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}isNegative(a){return this.op1Bool("_isNegative",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=toLEBuff(e(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(a,b){if(a instanceof Uint8Array)return a;if(Array.isArray(a)&&3==a.length){let c1=this.F.e(a[0],b),c2=this.F.e(a[1],b),c3=this.F.e(a[2],b),res=new Uint8Array(3*this.F.n8);return res.set(c1),res.set(c2,this.F.n8),res.set(c3,2*this.F.n8),res}throw Error("invalid F3")}toString(a,radix){let s1=this.F.toString(a.slice(0,this.F.n8),radix),s2=this.F.toString(a.slice(this.F.n8,2*this.F.n8),radix),s3=this.F.toString(a.slice(2*this.F.n8),radix);return`[${s1}, ${s2}, ${s3}]`}fromRng(rng){let c1=this.F.fromRng(rng),c2=this.F.fromRng(rng),c3=this.F.fromRng(rng),res=new Uint8Array(3*this.F.n8);return res.set(c1),res.set(c2,this.F.n8),res.set(c3,2*this.F.n8),res}random(){return this.fromRng(getThreadRng())}toObject(a){let c1=this.F.toObject(a.slice(0,this.F.n8)),c2=this.F.toObject(a.slice(this.F.n8,2*this.F.n8)),c3=this.F.toObject(a.slice(2*this.F.n8,3*this.F.n8));return[c1,c2,c3]}fromObject(a){let buff=new Uint8Array(3*this.F.n8),b1=this.F.fromObject(a[0]),b2=this.F.fromObject(a[1]),b3=this.F.fromObject(a[2]);return buff.set(b1),buff.set(b2,this.F.n8),buff.set(b3,2*this.F.n8),buff}c1(a){return a.slice(0,this.F.n8)}c2(a){return a.slice(this.F.n8,2*this.F.n8)}c3(a){return a.slice(2*this.F.n8)}}class WasmCurve{constructor(tm,prefix,F,pGen,pGb,cofactor){this.tm=tm,this.prefix=prefix,this.F=F,this.pOp1=tm.alloc(3*F.n8),this.pOp2=tm.alloc(3*F.n8),this.pOp3=tm.alloc(3*F.n8),this.tm.instance.exports[prefix+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,3*F.n8),this.tm.instance.exports[prefix+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,2*F.n8),this.one=this.tm.getBuff(pGen,3*F.n8),this.g=this.one,this.oneAffine=this.tm.getBuff(pGen,2*F.n8),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(pGb,F.n8),cofactor&&(this.cofactor=toLEBuff(cofactor)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=buildBatchConvert(tm,prefix+"_batchLEMtoC",2*F.n8,F.n8),this.batchLEMtoU=buildBatchConvert(tm,prefix+"_batchLEMtoU",2*F.n8,2*F.n8),this.batchCtoLEM=buildBatchConvert(tm,prefix+"_batchCtoLEM",F.n8,2*F.n8),this.batchUtoLEM=buildBatchConvert(tm,prefix+"_batchUtoLEM",2*F.n8,2*F.n8),this.batchToJacobian=buildBatchConvert(tm,prefix+"_batchToJacobian",2*F.n8,3*F.n8),this.batchToAffine=buildBatchConvert(tm,prefix+"_batchToAffine",3*F.n8,2*F.n8)}op2(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op2bool(opName,a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp2,this.pOp3)}op1(opName,a){return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op1Affine(opName,a){return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,2*this.F.n8)}op1Bool(opName,a){return this.tm.setBuff(this.pOp1,a),!!this.tm.instance.exports[this.prefix+opName](this.pOp1,this.pOp3)}add(a,b){if(a.byteLength==3*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_add",a,b);if(b.byteLength==2*this.F.n8)return this.op2("_addMixed",a,b);throw Error("invalid point size")}if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_addMixed",b,a);if(b.byteLength==2*this.F.n8)return this.op2("_addAffine",a,b)}throw Error("invalid point size")}sub(a,b){if(a.byteLength==3*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_sub",a,b);if(b.byteLength==2*this.F.n8)return this.op2("_subMixed",a,b);throw Error("invalid point size")}if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_subMixed",b,a);if(b.byteLength==2*this.F.n8)return this.op2("_subAffine",a,b)}throw Error("invalid point size")}neg(a){if(a.byteLength==3*this.F.n8)return this.op1("_neg",a);if(a.byteLength==2*this.F.n8)return this.op1Affine("_negAffine",a);throw Error("invalid point size")}double(a){if(a.byteLength==3*this.F.n8)return this.op1("_double",a);if(a.byteLength==2*this.F.n8)return this.op1("_doubleAffine",a);throw Error("invalid point size")}isZero(a){if(a.byteLength==3*this.F.n8)return this.op1Bool("_isZero",a);if(a.byteLength==2*this.F.n8)return this.op1Bool("_isZeroAffine",a);throw Error("invalid point size")}timesScalar(a,s){let fnName;if(s instanceof Uint8Array||(s=toLEBuff(e(s))),a.byteLength==3*this.F.n8)fnName=this.prefix+"_timesScalar";else if(a.byteLength==2*this.F.n8)fnName=this.prefix+"_timesScalarAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,s),this.tm.instance.exports[fnName](this.pOp1,this.pOp2,s.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}timesFr(a,s){let fnName;if(a.byteLength==3*this.F.n8)fnName=this.prefix+"_timesFr";else if(a.byteLength==2*this.F.n8)fnName=this.prefix+"_timesFrAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,s),this.tm.instance.exports[fnName](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}eq(a,b){if(a.byteLength==3*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2bool("_eq",a,b);if(b.byteLength==2*this.F.n8)return this.op2bool("_eqMixed",a,b);throw Error("invalid point size")}if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2bool("_eqMixed",b,a);if(b.byteLength==2*this.F.n8)return this.op2bool("_eqAffine",a,b)}throw Error("invalid point size")}toAffine(a){if(a.byteLength==3*this.F.n8)return this.op1Affine("_toAffine",a);if(a.byteLength==2*this.F.n8)return a;throw Error("invalid point size")}toJacobian(a){if(a.byteLength==3*this.F.n8)return a;if(a.byteLength==2*this.F.n8)return this.op1("_toJacobian",a);throw Error("invalid point size")}toRprUncompressed(arr,offset,a){if(this.tm.setBuff(this.pOp1,a),a.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(a.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);let res=this.tm.getBuff(this.pOp1,2*this.F.n8);arr.set(res,offset)}fromRprUncompressed(arr,offset){let buff=arr.slice(offset,offset+2*this.F.n8);return this.tm.setBuff(this.pOp1,buff),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,2*this.F.n8)}toRprCompressed(arr,offset,a){if(this.tm.setBuff(this.pOp1,a),a.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(a.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);let res=this.tm.getBuff(this.pOp1,this.F.n8);arr.set(res,offset)}fromRprCompressed(arr,offset){let buff=arr.slice(offset,offset+this.F.n8);return this.tm.setBuff(this.pOp1,buff),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,2*this.F.n8)}toUncompressed(a){let buff=new Uint8Array(2*this.F.n8);return this.toRprUncompressed(buff,0,a),buff}toRprLEM(arr,offset,a){if(a.byteLength==2*this.F.n8){arr.set(a,offset);return}if(a.byteLength==3*this.F.n8){this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);let res=this.tm.getBuff(this.pOp1,2*this.F.n8);arr.set(res,offset)}else throw Error("invalid point size")}fromRprLEM(arr,offset){return offset=offset||0,arr.slice(offset,offset+2*this.F.n8)}toString(a,radix){if(a.byteLength==3*this.F.n8){let x=this.F.toString(a.slice(0,this.F.n8),radix),y=this.F.toString(a.slice(this.F.n8,2*this.F.n8),radix),z=this.F.toString(a.slice(2*this.F.n8),radix);return`[ ${x}, ${y}, ${z} ]`}if(a.byteLength==2*this.F.n8){let x1=this.F.toString(a.slice(0,this.F.n8),radix),y1=this.F.toString(a.slice(this.F.n8),radix);return`[ ${x1}, ${y1} ]`}throw Error("invalid point size")}isValid(a){if(this.isZero(a))return!0;let F=this.F,aa=this.toAffine(a),x=aa.slice(0,this.F.n8),y=aa.slice(this.F.n8,2*this.F.n8),x3b=F.add(F.mul(F.square(x),x),this.b),y2=F.square(y);return F.eq(x3b,y2)}fromRng(rng){let greatest,x3b;let F=this.F,P=[];do P[0]=F.fromRng(rng),greatest=rng.nextBool(),x3b=F.add(F.mul(F.square(P[0]),P[0]),this.b);while(!F.isSquare(x3b));P[1]=F.sqrt(x3b);let s=F.isNegative(P[1]);greatest^s&&(P[1]=F.neg(P[1]));let Pbuff=new Uint8Array(2*this.F.n8);return Pbuff.set(P[0]),Pbuff.set(P[1],this.F.n8),this.cofactor&&(Pbuff=this.timesScalar(Pbuff,this.cofactor)),Pbuff}toObject(a){let z;if(this.isZero(a))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];let x=this.F.toObject(a.slice(0,this.F.n8)),y=this.F.toObject(a.slice(this.F.n8,2*this.F.n8));return[x,y,z=a.byteLength==3*this.F.n8?this.F.toObject(a.slice(2*this.F.n8,3*this.F.n8)):this.F.toObject(this.F.one)]}fromObject(a){let z;let x=this.F.fromObject(a[0]),y=this.F.fromObject(a[1]);if(z=3==a.length?this.F.fromObject(a[2]):this.F.one,this.F.isZero(z,this.F.one))return this.zeroAffine;if(this.F.eq(z,this.F.one)){let buff=new Uint8Array(2*this.F.n8);return buff.set(x),buff.set(y,this.F.n8),buff}{let buff1=new Uint8Array(3*this.F.n8);return buff1.set(x),buff1.set(y,this.F.n8),buff1.set(z,2*this.F.n8),buff1}}e(a){return a instanceof Uint8Array?a:this.fromObject(a)}x(a){let tmp=this.toAffine(a);return tmp.slice(0,this.F.n8)}y(a){let tmp=this.toAffine(a);return tmp.slice(this.F.n8)}}function thread(self1){let instance,memory;let MAXMEM=32767;async function init(data){let code=new Uint8Array(data.code),wasmModule=await WebAssembly.compile(code);instance=await WebAssembly.instantiate(wasmModule,{env:{memory:memory=new WebAssembly.Memory({initial:data.init,maximum:MAXMEM})}})}function alloc(length){let u32=new Uint32Array(memory.buffer,0,1);for(;3&u32[0];)u32[0]++;let res=u32[0];if(u32[0]+=length,u32[0]+length>memory.buffer.byteLength){let currentPages=memory.buffer.byteLength/65536,requiredPages=Math.floor((u32[0]+length)/65536)+1;requiredPages>MAXMEM&&(requiredPages=MAXMEM),memory.grow(requiredPages-currentPages)}return res}function allocBuffer(buffer){let p=alloc(buffer.byteLength);return setBuffer(p,buffer),p}function getBuffer(pointer,length){let u8=new Uint8Array(memory.buffer);return new Uint8Array(u8.buffer,u8.byteOffset+pointer,length)}function setBuffer(pointer,buffer){let u8=new Uint8Array(memory.buffer);u8.set(new Uint8Array(buffer),pointer)}function runTask(task){if("INIT"==task[0].cmd)return init(task[0]);let ctx={vars:[],out:[]},u32a=new Uint32Array(memory.buffer,0,1),oldAlloc=u32a[0];for(let i=0;i<task.length;i++)switch(task[i].cmd){case"ALLOCSET":ctx.vars[task[i].var]=allocBuffer(task[i].buff);break;case"ALLOC":ctx.vars[task[i].var]=alloc(task[i].len);break;case"SET":setBuffer(ctx.vars[task[i].var],task[i].buff);break;case"CALL":{let params=[];for(let j=0;j<task[i].params.length;j++){let p=task[i].params[j];void 0!==p.var?params.push(ctx.vars[p.var]+(p.offset||0)):void 0!==p.val&&params.push(p.val)}instance.exports[task[i].fnName](...params);break}case"GET":ctx.out[task[i].out]=getBuffer(ctx.vars[task[i].var],task[i].len).slice();break;default:throw Error("Invalid cmd")}let u32b=new Uint32Array(memory.buffer,0,1);return u32b[0]=oldAlloc,ctx.out}return self1&&(self1.onmessage=function(e){let data;if("INIT"==(data=e.data?e.data:e)[0].cmd)init(data[0]).then(function(){self1.postMessage(data.result)});else if("TERMINATE"==data[0].cmd)self1.close();else{let res=runTask(data);self1.postMessage(res)}}),runTask}var browser=__webpack_require__(7958),cjs_browser=__webpack_require__(8188);let MEM_SIZE=25;class Deferred{constructor(){this.promise=new Promise((resolve,reject)=>{this.reject=reject,this.resolve=resolve})}}function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}function stringToBase64(str){return globalThis.btoa(str)}let threadSource=stringToBase64("("+thread.toString()+")(self)"),workerSource="data:application/javascript;base64,"+threadSource;async function buildThreadManager(wasm,singleThread){let tm=new ThreadManager;tm.memory=new WebAssembly.Memory({initial:MEM_SIZE}),tm.u8=new Uint8Array(tm.memory.buffer),tm.u32=new Uint32Array(tm.memory.buffer);let wasmModule=await WebAssembly.compile(wasm.code);if(tm.instance=await WebAssembly.instantiate(wasmModule,{env:{memory:tm.memory}}),tm.singleThread=singleThread,tm.initalPFree=tm.u32[0],tm.pq=wasm.pq,tm.pr=wasm.pr,tm.pG1gen=wasm.pG1gen,tm.pG1zero=wasm.pG1zero,tm.pG2gen=wasm.pG2gen,tm.pG2zero=wasm.pG2zero,tm.pOneT=wasm.pOneT,singleThread)tm.code=wasm.code,tm.taskManager=thread(),await tm.taskManager([{cmd:"INIT",init:MEM_SIZE,code:tm.code.slice()}]),tm.concurrency=1;else{let concurrency;tm.workers=[],tm.pendingDeferreds=[],tm.working=[],0==(concurrency="object"==typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:browser.cpus().length)&&(concurrency=2),concurrency>64&&(concurrency=64),tm.concurrency=concurrency;for(let i=0;i<concurrency;i++)tm.workers[i]=new cjs_browser(workerSource),tm.workers[i].addEventListener("message",getOnMsg(i)),tm.working[i]=!1;let initPromises=[];for(let i1=0;i1<tm.workers.length;i1++){let copyCode=wasm.code.slice();initPromises.push(tm.postAction(i1,[{cmd:"INIT",init:MEM_SIZE,code:copyCode}],[copyCode.buffer]))}await Promise.all(initPromises)}return tm;function getOnMsg(i){return function(e){let data;data=e&&e.data?e.data:e,tm.working[i]=!1,tm.pendingDeferreds[i].resolve(data),tm.processWorks()}}}class ThreadManager{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(0!=this.oldPFree)throw Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(0==this.oldPFree)throw Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(workerId,e,transfers,_deferred){if(this.working[workerId])throw Error("Posting a job t a working worker");return this.working[workerId]=!0,this.pendingDeferreds[workerId]=_deferred||new Deferred,this.workers[workerId].postMessage(e,transfers),this.pendingDeferreds[workerId].promise}processWorks(){for(let i=0;i<this.workers.length&&this.actionQueue.length>0;i++)if(!1==this.working[i]){let work=this.actionQueue.shift();this.postAction(i,work.data,work.transfers,work.deferred)}}queueAction(actionData,transfers){let d=new Deferred;if(this.singleThread){let res=this.taskManager(actionData);d.resolve(res)}else this.actionQueue.push({data:actionData,transfers:transfers,deferred:d}),this.processWorks();return d.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(buff){let pointer=this.alloc(buff.byteLength);return this.setBuff(pointer,buff),pointer}getBuff(pointer,length){return this.u8.slice(pointer,pointer+length)}setBuff(pointer,buffer){this.u8.set(new Uint8Array(buffer),pointer)}alloc(length){for(;3&this.u32[0];)this.u32[0]++;let res=this.u32[0];return this.u32[0]+=length,res}async terminate(){for(let i=0;i<this.workers.length;i++)this.workers[i].postMessage([{cmd:"TERMINATE"}]);await sleep(200)}}function buildBatchApplyKey(curve,groupName){let G=curve[groupName],Fr=curve.Fr,tm=curve.tm;curve[groupName].batchApplyKey=async function(buff,first,inc,inType,outType){let fnName,fnAffine,sGin,sGmid,sGout,outBuff;if(inType=inType||"affine",outType=outType||"affine","G1"==groupName)"jacobian"==inType?(sGin=3*G.F.n8,fnName="g1m_batchApplyKey"):(sGin=2*G.F.n8,fnName="g1m_batchApplyKeyMixed"),sGmid=3*G.F.n8,"jacobian"==outType?sGout=3*G.F.n8:(fnAffine="g1m_batchToAffine",sGout=2*G.F.n8);else if("G2"==groupName)"jacobian"==inType?(sGin=3*G.F.n8,fnName="g2m_batchApplyKey"):(sGin=2*G.F.n8,fnName="g2m_batchApplyKeyMixed"),sGmid=3*G.F.n8,"jacobian"==outType?sGout=3*G.F.n8:(fnAffine="g2m_batchToAffine",sGout=2*G.F.n8);else if("Fr"==groupName)fnName="frm_batchApplyKey",sGin=G.n8,sGmid=G.n8,sGout=G.n8;else throw Error("Invalid group: "+groupName);let nPoints=Math.floor(buff.byteLength/sGin),pointsPerChunk=Math.floor(nPoints/tm.concurrency),opPromises=[];inc=Fr.e(inc);let t=Fr.e(first);for(let i=0;i<tm.concurrency;i++){let n;if(0==(n=i<tm.concurrency-1?pointsPerChunk:nPoints-i*pointsPerChunk))continue;let task=[];task.push({cmd:"ALLOCSET",var:0,buff:buff.slice(i*pointsPerChunk*sGin,i*pointsPerChunk*sGin+n*sGin)}),task.push({cmd:"ALLOCSET",var:1,buff:t}),task.push({cmd:"ALLOCSET",var:2,buff:inc}),task.push({cmd:"ALLOC",var:3,len:n*Math.max(sGmid,sGout)}),task.push({cmd:"CALL",fnName:fnName,params:[{var:0},{val:n},{var:1},{var:2},{var:3}]}),fnAffine&&task.push({cmd:"CALL",fnName:fnAffine,params:[{var:3},{val:n},{var:3}]}),task.push({cmd:"GET",out:0,var:3,len:n*sGout}),opPromises.push(tm.queueAction(task)),t=Fr.mul(t,Fr.exp(inc,n))}let result=await Promise.all(opPromises);outBuff=buff instanceof BigBuffer?new BigBuffer(nPoints*sGout):new Uint8Array(nPoints*sGout);let p=0;for(let i1=0;i1<result.length;i1++)outBuff.set(result[i1][0],p),p+=result[i1][0].byteLength;return outBuff}}function buildPairing(curve){let tm=curve.tm;curve.pairing=function(a,b){tm.startSyncOp();let pA=tm.allocBuff(curve.G1.toJacobian(a)),pB=tm.allocBuff(curve.G2.toJacobian(b)),pRes=tm.alloc(curve.Gt.n8);tm.instance.exports[curve.name+"_pairing"](pA,pB,pRes);let res=tm.getBuff(pRes,curve.Gt.n8);return tm.endSyncOp(),res},curve.pairingEq=async function(){let buffCt,nEqs;arguments.length%2==1?(buffCt=arguments[arguments.length-1],nEqs=(arguments.length-1)/2):(buffCt=curve.Gt.one,nEqs=arguments.length/2);let opPromises=[];for(let i=0;i<nEqs;i++){let task=[],g1Buff=curve.G1.toJacobian(arguments[2*i]);task.push({cmd:"ALLOCSET",var:0,buff:g1Buff}),task.push({cmd:"ALLOC",var:1,len:curve.prePSize});let g2Buff=curve.G2.toJacobian(arguments[2*i+1]);task.push({cmd:"ALLOCSET",var:2,buff:g2Buff}),task.push({cmd:"ALLOC",var:3,len:curve.preQSize}),task.push({cmd:"ALLOC",var:4,len:curve.Gt.n8}),task.push({cmd:"CALL",fnName:curve.name+"_prepareG1",params:[{var:0},{var:1}]}),task.push({cmd:"CALL",fnName:curve.name+"_prepareG2",params:[{var:2},{var:3}]}),task.push({cmd:"CALL",fnName:curve.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),task.push({cmd:"GET",out:0,var:4,len:curve.Gt.n8}),opPromises.push(tm.queueAction(task))}let result=await Promise.all(opPromises);tm.startSyncOp();let pRes=tm.alloc(curve.Gt.n8);tm.instance.exports.ftm_one(pRes);for(let i1=0;i1<result.length;i1++){let pMR=tm.allocBuff(result[i1][0]);tm.instance.exports.ftm_mul(pRes,pMR,pRes)}tm.instance.exports[curve.name+"_finalExponentiation"](pRes,pRes);let pCt=tm.allocBuff(buffCt),r=!!tm.instance.exports.ftm_eq(pRes,pCt);return tm.endSyncOp(),r},curve.prepareG1=function(p){this.tm.startSyncOp();let pP=this.tm.allocBuff(p),pPrepP=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](pP,pPrepP);let res=this.tm.getBuff(pPrepP,this.prePSize);return this.tm.endSyncOp(),res},curve.prepareG2=function(q){this.tm.startSyncOp();let pQ=this.tm.allocBuff(q),pPrepQ=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](pQ,pPrepQ);let res=this.tm.getBuff(pPrepQ,this.preQSize);return this.tm.endSyncOp(),res},curve.millerLoop=function(preP,preQ){this.tm.startSyncOp();let pPreP=this.tm.allocBuff(preP),pPreQ=this.tm.allocBuff(preQ),pRes=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](pPreP,pPreQ,pRes);let res=this.tm.getBuff(pRes,this.Gt.n8);return this.tm.endSyncOp(),res},curve.finalExponentiation=function(a){this.tm.startSyncOp();let pA=this.tm.allocBuff(a),pRes=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](pA,pRes);let res=this.tm.getBuff(pRes,this.Gt.n8);return this.tm.endSyncOp(),res}}let pTSizes=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function buildMultiexp(curve,groupName){let G=curve[groupName],tm=G.tm;async function _multiExpChunk(buffBases,buffScalars,inType,logger,logText){let sGIn,fnName;if(!(buffBases instanceof Uint8Array))throw logger&&logger.error(`${logText} _multiExpChunk buffBases is not Uint8Array`),Error(`${logText} _multiExpChunk buffBases is not Uint8Array`);if(!(buffScalars instanceof Uint8Array))throw logger&&logger.error(`${logText} _multiExpChunk buffScalars is not Uint8Array`),Error(`${logText} _multiExpChunk buffScalars is not Uint8Array`);if(inType=inType||"affine","G1"==groupName)"affine"==inType?(fnName="g1m_multiexpAffine_chunk",sGIn=2*G.F.n8):(fnName="g1m_multiexp_chunk",sGIn=3*G.F.n8);else if("G2"==groupName)"affine"==inType?(fnName="g2m_multiexpAffine_chunk",sGIn=2*G.F.n8):(fnName="g2m_multiexp_chunk",sGIn=3*G.F.n8);else throw Error("Invalid group");let nPoints=Math.floor(buffBases.byteLength/sGIn);if(0==nPoints)return G.zero;let sScalar=Math.floor(buffScalars.byteLength/nPoints);if(sScalar*nPoints!=buffScalars.byteLength)throw Error("Scalar size does not match");let bitChunkSize=pTSizes[utils_log2(nPoints)],nChunks=Math.floor((8*sScalar-1)/bitChunkSize)+1,opPromises=[];for(let i=0;i<nChunks;i++){let task=[{cmd:"ALLOCSET",var:0,buff:buffBases},{cmd:"ALLOCSET",var:1,buff:buffScalars},{cmd:"ALLOC",var:2,len:3*G.F.n8},{cmd:"CALL",fnName:fnName,params:[{var:0},{var:1},{val:sScalar},{val:nPoints},{val:i*bitChunkSize},{val:Math.min(8*sScalar-i*bitChunkSize,bitChunkSize)},{var:2}]},{cmd:"GET",out:0,var:2,len:3*G.F.n8}];opPromises.push(G.tm.queueAction(task))}let result=await Promise.all(opPromises),res=G.zero;for(let i1=result.length-1;i1>=0;i1--){if(!G.isZero(res))for(let j=0;j<bitChunkSize;j++)res=G.double(res);res=G.add(res,result[i1][0])}return res}async function _multiExp(buffBases,buffScalars,inType,logger,logText){let sGIn,chunkSize;let MAX_CHUNK_SIZE=4194304,MIN_CHUNK_SIZE=1024;if("G1"==groupName)sGIn="affine"==inType?2*G.F.n8:3*G.F.n8;else if("G2"==groupName)sGIn="affine"==inType?2*G.F.n8:3*G.F.n8;else throw Error("Invalid group");let nPoints=Math.floor(buffBases.byteLength/sGIn),sScalar=Math.floor(buffScalars.byteLength/nPoints);if(sScalar*nPoints!=buffScalars.byteLength)throw Error("Scalar size does not match");let bitChunkSize=pTSizes[utils_log2(nPoints)],nChunks=Math.floor((8*sScalar-1)/bitChunkSize)+1;(chunkSize=Math.floor(nPoints/(tm.concurrency/nChunks)))>MAX_CHUNK_SIZE&&(chunkSize=MAX_CHUNK_SIZE),chunkSize<MIN_CHUNK_SIZE&&(chunkSize=MIN_CHUNK_SIZE);let opPromises=[];for(let i=0;i<nPoints;i+=chunkSize){logger&&logger.debug(`Multiexp start: ${logText}: ${i}/${nPoints}`);let n=Math.min(nPoints-i,chunkSize),buffBasesChunk=buffBases.slice(i*sGIn,(i+n)*sGIn),buffScalarsChunk=buffScalars.slice(i*sScalar,(i+n)*sScalar);opPromises.push(_multiExpChunk(buffBasesChunk,buffScalarsChunk,inType,logger,logText).then(r=>(logger&&logger.debug(`Multiexp end: ${logText}: ${i}/${nPoints}`),r)))}let result=await Promise.all(opPromises),res=G.zero;for(let i1=result.length-1;i1>=0;i1--)res=G.add(res,result[i1]);return res}G.multiExp=async function(buffBases,buffScalars,logger,logText){return await _multiExp(buffBases,buffScalars,"jacobian",logger,logText)},G.multiExpAffine=async function(buffBases,buffScalars,logger,logText){return await _multiExp(buffBases,buffScalars,"affine",logger,logText)}}function buildFFT(curve,groupName){let G=curve[groupName],Fr=curve.Fr,tm=G.tm;async function _fft(buff,inverse,inType,outType,logger,loggerTxt){let sIn,sMid,sOut,fnIn2Mid,fnMid2Out,fnFFTMix,fnFFTJoin,fnFFTFinal,inv,buffOut,chunks;inType=inType||"affine",outType=outType||"affine";let MAX_BITS_THREAD=14;"G1"==groupName?("affine"==inType?(sIn=2*G.F.n8,fnIn2Mid="g1m_batchToJacobian"):sIn=3*G.F.n8,sMid=3*G.F.n8,inverse&&(fnFFTFinal="g1m_fftFinal"),fnFFTJoin="g1m_fftJoin",fnFFTMix="g1m_fftMix","affine"==outType?(sOut=2*G.F.n8,fnMid2Out="g1m_batchToAffine"):sOut=3*G.F.n8):"G2"==groupName?("affine"==inType?(sIn=2*G.F.n8,fnIn2Mid="g2m_batchToJacobian"):sIn=3*G.F.n8,sMid=3*G.F.n8,inverse&&(fnFFTFinal="g2m_fftFinal"),fnFFTJoin="g2m_fftJoin",fnFFTMix="g2m_fftMix","affine"==outType?(sOut=2*G.F.n8,fnMid2Out="g2m_batchToAffine"):sOut=3*G.F.n8):"Fr"==groupName&&(sIn=G.n8,sMid=G.n8,sOut=G.n8,inverse&&(fnFFTFinal="frm_fftFinal"),fnFFTMix="frm_fftMix",fnFFTJoin="frm_fftJoin");let returnArray=!1;Array.isArray(buff)?(buff=array2buffer(buff,sIn),returnArray=!0):buff=buff.slice(0,buff.byteLength);let nPoints=buff.byteLength/sIn,bits=utils_log2(nPoints);if(1<<bits!=nPoints)throw Error("fft must be multiple of 2");if(bits==Fr.s+1){let buffOut1;return(buffOut1=inverse?await _fftExtInv(buff,inType,outType,logger,loggerTxt):await _fftExt(buff,inType,outType,logger,loggerTxt),returnArray)?buffer2array(buffOut1,sOut):buffOut1}inverse&&(inv=Fr.inv(Fr.e(nPoints))),buffReverseBits(buff,sIn);let pointsInChunk=Math.min(1<<MAX_BITS_THREAD,nPoints),nChunks=nPoints/pointsInChunk;for(;nChunks<tm.concurrency&&pointsInChunk>=16;)nChunks*=2,pointsInChunk/=2;let l2Chunk=utils_log2(pointsInChunk),promises=[];for(let i=0;i<nChunks;i++){logger&&logger.debug(`${loggerTxt}: fft ${bits} mix start: ${i}/${nChunks}`);let task=[];task.push({cmd:"ALLOC",var:0,len:sMid*pointsInChunk});let buffChunk=buff.slice(pointsInChunk*i*sIn,pointsInChunk*(i+1)*sIn);task.push({cmd:"SET",var:0,buff:buffChunk}),fnIn2Mid&&task.push({cmd:"CALL",fnName:fnIn2Mid,params:[{var:0},{val:pointsInChunk},{var:0}]});for(let j=1;j<=l2Chunk;j++)task.push({cmd:"CALL",fnName:fnFFTMix,params:[{var:0},{val:pointsInChunk},{val:j}]});l2Chunk==bits?(fnFFTFinal&&(task.push({cmd:"ALLOCSET",var:1,buff:inv}),task.push({cmd:"CALL",fnName:fnFFTFinal,params:[{var:0},{val:pointsInChunk},{var:1}]})),fnMid2Out&&task.push({cmd:"CALL",fnName:fnMid2Out,params:[{var:0},{val:pointsInChunk},{var:0}]}),task.push({cmd:"GET",out:0,var:0,len:pointsInChunk*sOut})):task.push({cmd:"GET",out:0,var:0,len:sMid*pointsInChunk}),promises.push(tm.queueAction(task).then(r=>(logger&&logger.debug(`${loggerTxt}: fft ${bits} mix end: ${i}/${nChunks}`),r)))}chunks=await Promise.all(promises);for(let i1=0;i1<nChunks;i1++)chunks[i1]=chunks[i1][0];for(let i2=l2Chunk+1;i2<=bits;i2++){logger&&logger.debug(`${loggerTxt}: fft  ${bits}  join: ${i2}/${bits}`);let nGroups=1<<bits-i2,nChunksPerGroup=nChunks/nGroups,opPromises=[];for(let j1=0;j1<nGroups;j1++)for(let k=0;k<nChunksPerGroup/2;k++){let first=Fr.exp(Fr.w[i2],k*pointsInChunk),inc=Fr.w[i2],o1=j1*nChunksPerGroup+k,o2=j1*nChunksPerGroup+k+nChunksPerGroup/2,task1=[];task1.push({cmd:"ALLOCSET",var:0,buff:chunks[o1]}),task1.push({cmd:"ALLOCSET",var:1,buff:chunks[o2]}),task1.push({cmd:"ALLOCSET",var:2,buff:first}),task1.push({cmd:"ALLOCSET",var:3,buff:inc}),task1.push({cmd:"CALL",fnName:fnFFTJoin,params:[{var:0},{var:1},{val:pointsInChunk},{var:2},{var:3}]}),i2==bits?(fnFFTFinal&&(task1.push({cmd:"ALLOCSET",var:4,buff:inv}),task1.push({cmd:"CALL",fnName:fnFFTFinal,params:[{var:0},{val:pointsInChunk},{var:4}]}),task1.push({cmd:"CALL",fnName:fnFFTFinal,params:[{var:1},{val:pointsInChunk},{var:4}]})),fnMid2Out&&(task1.push({cmd:"CALL",fnName:fnMid2Out,params:[{var:0},{val:pointsInChunk},{var:0}]}),task1.push({cmd:"CALL",fnName:fnMid2Out,params:[{var:1},{val:pointsInChunk},{var:1}]})),task1.push({cmd:"GET",out:0,var:0,len:pointsInChunk*sOut}),task1.push({cmd:"GET",out:1,var:1,len:pointsInChunk*sOut})):(task1.push({cmd:"GET",out:0,var:0,len:pointsInChunk*sMid}),task1.push({cmd:"GET",out:1,var:1,len:pointsInChunk*sMid})),opPromises.push(tm.queueAction(task1).then(r=>(logger&&logger.debug(`${loggerTxt}: fft ${bits} join  ${i2}/${bits}  ${j1+1}/${nGroups} ${k}/${nChunksPerGroup/2}`),r)))}let res=await Promise.all(opPromises);for(let j2=0;j2<nGroups;j2++)for(let k1=0;k1<nChunksPerGroup/2;k1++){let o11=j2*nChunksPerGroup+k1,o21=j2*nChunksPerGroup+k1+nChunksPerGroup/2,resChunk=res.shift();chunks[o11]=resChunk[0],chunks[o21]=resChunk[1]}}if(buffOut=buff instanceof BigBuffer?new BigBuffer(nPoints*sOut):new Uint8Array(nPoints*sOut),inverse){buffOut.set(chunks[0].slice((pointsInChunk-1)*sOut));let p=sOut;for(let i3=nChunks-1;i3>0;i3--)buffOut.set(chunks[i3],p),p+=pointsInChunk*sOut,delete chunks[i3];buffOut.set(chunks[0].slice(0,(pointsInChunk-1)*sOut),p),delete chunks[0]}else for(let i4=0;i4<nChunks;i4++)buffOut.set(chunks[i4],pointsInChunk*sOut*i4),delete chunks[i4];return returnArray?buffer2array(buffOut,sOut):buffOut}async function _fftExt(buff,inType,outType,logger,loggerTxt){let b1,b2,buffOut;b1=buff.slice(0,buff.byteLength/2),b2=buff.slice(buff.byteLength/2,buff.byteLength);let promises=[];[b1,b2]=await _fftJoinExt(b1,b2,"fftJoinExt",Fr.one,Fr.shift,inType,"jacobian",logger,loggerTxt),promises.push(_fft(b1,!1,"jacobian",outType,logger,loggerTxt)),promises.push(_fft(b2,!1,"jacobian",outType,logger,loggerTxt));let res1=await Promise.all(promises);return(buffOut=res1[0].byteLength>268435456?new BigBuffer(2*res1[0].byteLength):new Uint8Array(2*res1[0].byteLength)).set(res1[0]),buffOut.set(res1[1],res1[0].byteLength),buffOut}async function _fftExtInv(buff,inType,outType,logger,loggerTxt){let b1,b2,buffOut;b1=buff.slice(0,buff.byteLength/2),b2=buff.slice(buff.byteLength/2,buff.byteLength);let promises=[];promises.push(_fft(b1,!0,inType,"jacobian",logger,loggerTxt)),promises.push(_fft(b2,!0,inType,"jacobian",logger,loggerTxt)),[b1,b2]=await Promise.all(promises);let res1=await _fftJoinExt(b1,b2,"fftJoinExtInv",Fr.one,Fr.shiftInv,"jacobian",outType,logger,loggerTxt);return(buffOut=res1[0].byteLength>268435456?new BigBuffer(2*res1[0].byteLength):new Uint8Array(2*res1[0].byteLength)).set(res1[0]),buffOut.set(res1[1],res1[0].byteLength),buffOut}async function _fftJoinExt(buff1,buff2,fn,first,inc,inType,outType,logger,loggerTxt){let fnName,fnIn2Mid,fnMid2Out,sOut,sIn,sMid,fullBuffOut1,fullBuffOut2;let MAX_CHUNK_SIZE=65536,MIN_CHUNK_SIZE=16;if("G1"==groupName)"affine"==inType?(sIn=2*G.F.n8,fnIn2Mid="g1m_batchToJacobian"):sIn=3*G.F.n8,sMid=3*G.F.n8,fnName="g1m_"+fn,"affine"==outType?(fnMid2Out="g1m_batchToAffine",sOut=2*G.F.n8):sOut=3*G.F.n8;else if("G2"==groupName)"affine"==inType?(sIn=2*G.F.n8,fnIn2Mid="g2m_batchToJacobian"):sIn=3*G.F.n8,fnName="g2m_"+fn,sMid=3*G.F.n8,"affine"==outType?(fnMid2Out="g2m_batchToAffine",sOut=2*G.F.n8):sOut=3*G.F.n8;else if("Fr"==groupName)sIn=Fr.n8,sOut=Fr.n8,sMid=Fr.n8,fnName="frm_"+fn;else throw Error("Invalid group");if(buff1.byteLength!=buff2.byteLength)throw Error("Invalid buffer size");let nPoints=Math.floor(buff1.byteLength/sIn);if(nPoints!=1<<utils_log2(nPoints))throw Error("Invalid number of points");let chunkSize=Math.floor(nPoints/tm.concurrency);chunkSize<MIN_CHUNK_SIZE&&(chunkSize=MIN_CHUNK_SIZE),chunkSize>MAX_CHUNK_SIZE&&(chunkSize=MAX_CHUNK_SIZE);let opPromises=[];for(let i=0;i<nPoints;i+=chunkSize){logger&&logger.debug(`${loggerTxt}: fftJoinExt Start: ${i}/${nPoints}`);let n=Math.min(nPoints-i,chunkSize),firstChunk=Fr.mul(first,Fr.exp(inc,i)),task=[],b1=buff1.slice(i*sIn,(i+n)*sIn),b2=buff2.slice(i*sIn,(i+n)*sIn);task.push({cmd:"ALLOC",var:0,len:sMid*n}),task.push({cmd:"SET",var:0,buff:b1}),task.push({cmd:"ALLOC",var:1,len:sMid*n}),task.push({cmd:"SET",var:1,buff:b2}),task.push({cmd:"ALLOCSET",var:2,buff:firstChunk}),task.push({cmd:"ALLOCSET",var:3,buff:inc}),fnIn2Mid&&(task.push({cmd:"CALL",fnName:fnIn2Mid,params:[{var:0},{val:n},{var:0}]}),task.push({cmd:"CALL",fnName:fnIn2Mid,params:[{var:1},{val:n},{var:1}]})),task.push({cmd:"CALL",fnName:fnName,params:[{var:0},{var:1},{val:n},{var:2},{var:3},{val:Fr.s}]}),fnMid2Out&&(task.push({cmd:"CALL",fnName:fnMid2Out,params:[{var:0},{val:n},{var:0}]}),task.push({cmd:"CALL",fnName:fnMid2Out,params:[{var:1},{val:n},{var:1}]})),task.push({cmd:"GET",out:0,var:0,len:n*sOut}),task.push({cmd:"GET",out:1,var:1,len:n*sOut}),opPromises.push(tm.queueAction(task).then(r=>(logger&&logger.debug(`${loggerTxt}: fftJoinExt End: ${i}/${nPoints}`),r)))}let result=await Promise.all(opPromises);nPoints*sOut>268435456?(fullBuffOut1=new BigBuffer(nPoints*sOut),fullBuffOut2=new BigBuffer(nPoints*sOut)):(fullBuffOut1=new Uint8Array(nPoints*sOut),fullBuffOut2=new Uint8Array(nPoints*sOut));let p=0;for(let i1=0;i1<result.length;i1++)fullBuffOut1.set(result[i1][0],p),fullBuffOut2.set(result[i1][1],p),p+=result[i1][0].byteLength;return[fullBuffOut1,fullBuffOut2]}G.fft=async function(buff,inType,outType,logger,loggerTxt){return await _fft(buff,!1,inType,outType,logger,loggerTxt)},G.ifft=async function(buff,inType,outType,logger,loggerTxt){return await _fft(buff,!0,inType,outType,logger,loggerTxt)},G.lagrangeEvaluations=async function(buff,inType,outType,logger,loggerTxt){let sIn,buffOut;if(inType=inType||"affine",outType=outType||"affine","G1"==groupName)sIn="affine"==inType?2*G.F.n8:3*G.F.n8;else if("G2"==groupName)sIn="affine"==inType?2*G.F.n8:3*G.F.n8;else if("Fr"==groupName)sIn=Fr.n8;else throw Error("Invalid group");let nPoints=buff.byteLength/sIn,bits=utils_log2(nPoints);if(2**bits*sIn!=buff.byteLength)throw logger&&logger.error("lagrangeEvaluations iinvalid input size"),Error("lagrangeEvaluations invalid Input size");if(bits<=Fr.s)return await G.ifft(buff,inType,outType,logger,loggerTxt);if(bits>Fr.s+1)throw logger&&logger.error("lagrangeEvaluations input too big"),Error("lagrangeEvaluations input too big");let t0=buff.slice(0,buff.byteLength/2),t1=buff.slice(buff.byteLength/2,buff.byteLength),shiftToSmallM=Fr.exp(Fr.shift,nPoints/2),sConst=Fr.inv(Fr.sub(Fr.one,shiftToSmallM));[t0,t1]=await _fftJoinExt(t0,t1,"prepareLagrangeEvaluation",sConst,Fr.shiftInv,inType,"jacobian",logger,loggerTxt+" prep");let promises=[];return promises.push(_fft(t0,!0,"jacobian",outType,logger,loggerTxt+" t0")),promises.push(_fft(t1,!0,"jacobian",outType,logger,loggerTxt+" t1")),[t0,t1]=await Promise.all(promises),(buffOut=t0.byteLength>268435456?new BigBuffer(2*t0.byteLength):new Uint8Array(2*t0.byteLength)).set(t0),buffOut.set(t1,t0.byteLength),buffOut},G.fftMix=async function(buff){let fnName,fnFFTJoin,fullBuffOut;let sG=3*G.F.n8;if("G1"==groupName)fnName="g1m_fftMix",fnFFTJoin="g1m_fftJoin";else if("G2"==groupName)fnName="g2m_fftMix",fnFFTJoin="g2m_fftJoin";else if("Fr"==groupName)fnName="frm_fftMix",fnFFTJoin="frm_fftJoin";else throw Error("Invalid group");let nPoints=Math.floor(buff.byteLength/sG),power=utils_log2(nPoints),nChunks=1<<utils_log2(tm.concurrency);nPoints<=2*nChunks&&(nChunks=1);let pointsPerChunk=nPoints/nChunks,powerChunk=utils_log2(pointsPerChunk),opPromises=[];for(let i=0;i<nChunks;i++){let task=[],b=buff.slice(i*pointsPerChunk*sG,(i+1)*pointsPerChunk*sG);task.push({cmd:"ALLOCSET",var:0,buff:b});for(let j=1;j<=powerChunk;j++)task.push({cmd:"CALL",fnName:fnName,params:[{var:0},{val:pointsPerChunk},{val:j}]});task.push({cmd:"GET",out:0,var:0,len:pointsPerChunk*sG}),opPromises.push(tm.queueAction(task))}let result=await Promise.all(opPromises),chunks=[];for(let i1=0;i1<result.length;i1++)chunks[i1]=result[i1][0];for(let i2=powerChunk+1;i2<=power;i2++){let nGroups=1<<power-i2,nChunksPerGroup=nChunks/nGroups,opPromises1=[];for(let j1=0;j1<nGroups;j1++)for(let k=0;k<nChunksPerGroup/2;k++){let first=Fr.exp(Fr.w[i2],k*pointsPerChunk),inc=Fr.w[i2],o1=j1*nChunksPerGroup+k,o2=j1*nChunksPerGroup+k+nChunksPerGroup/2,task1=[];task1.push({cmd:"ALLOCSET",var:0,buff:chunks[o1]}),task1.push({cmd:"ALLOCSET",var:1,buff:chunks[o2]}),task1.push({cmd:"ALLOCSET",var:2,buff:first}),task1.push({cmd:"ALLOCSET",var:3,buff:inc}),task1.push({cmd:"CALL",fnName:fnFFTJoin,params:[{var:0},{var:1},{val:pointsPerChunk},{var:2},{var:3}]}),task1.push({cmd:"GET",out:0,var:0,len:pointsPerChunk*sG}),task1.push({cmd:"GET",out:1,var:1,len:pointsPerChunk*sG}),opPromises1.push(tm.queueAction(task1))}let res=await Promise.all(opPromises1);for(let j2=0;j2<nGroups;j2++)for(let k1=0;k1<nChunksPerGroup/2;k1++){let o11=j2*nChunksPerGroup+k1,o21=j2*nChunksPerGroup+k1+nChunksPerGroup/2,resChunk=res.shift();chunks[o11]=resChunk[0],chunks[o21]=resChunk[1]}}fullBuffOut=buff instanceof BigBuffer?new BigBuffer(nPoints*sG):new Uint8Array(nPoints*sG);let p=0;for(let i3=0;i3<nChunks;i3++)fullBuffOut.set(chunks[i3],p),p+=chunks[i3].byteLength;return fullBuffOut},G.fftJoin=async function(buff1,buff2,first,inc){let fnName,fullBuffOut1,fullBuffOut2;let sG=3*G.F.n8;if("G1"==groupName)fnName="g1m_fftJoin";else if("G2"==groupName)fnName="g2m_fftJoin";else if("Fr"==groupName)fnName="frm_fftJoin";else throw Error("Invalid group");if(buff1.byteLength!=buff2.byteLength)throw Error("Invalid buffer size");let nPoints=Math.floor(buff1.byteLength/sG);if(nPoints!=1<<utils_log2(nPoints))throw Error("Invalid number of points");let nChunks=1<<utils_log2(tm.concurrency);nPoints<=2*nChunks&&(nChunks=1);let pointsPerChunk=nPoints/nChunks,opPromises=[];for(let i=0;i<nChunks;i++){let task=[],firstChunk=Fr.mul(first,Fr.exp(inc,i*pointsPerChunk)),b1=buff1.slice(i*pointsPerChunk*sG,(i+1)*pointsPerChunk*sG),b2=buff2.slice(i*pointsPerChunk*sG,(i+1)*pointsPerChunk*sG);task.push({cmd:"ALLOCSET",var:0,buff:b1}),task.push({cmd:"ALLOCSET",var:1,buff:b2}),task.push({cmd:"ALLOCSET",var:2,buff:firstChunk}),task.push({cmd:"ALLOCSET",var:3,buff:inc}),task.push({cmd:"CALL",fnName:fnName,params:[{var:0},{var:1},{val:pointsPerChunk},{var:2},{var:3}]}),task.push({cmd:"GET",out:0,var:0,len:pointsPerChunk*sG}),task.push({cmd:"GET",out:1,var:1,len:pointsPerChunk*sG}),opPromises.push(tm.queueAction(task))}let result=await Promise.all(opPromises);buff1 instanceof BigBuffer?(fullBuffOut1=new BigBuffer(nPoints*sG),fullBuffOut2=new BigBuffer(nPoints*sG)):(fullBuffOut1=new Uint8Array(nPoints*sG),fullBuffOut2=new Uint8Array(nPoints*sG));let p=0;for(let i1=0;i1<result.length;i1++)fullBuffOut1.set(result[i1][0],p),fullBuffOut2.set(result[i1][1],p),p+=result[i1][0].byteLength;return[fullBuffOut1,fullBuffOut2]},G.fftFinal=async function(buff,factor){let fnName,fnToAffine,fullBuffOut;let sG=3*G.F.n8,sGout=2*G.F.n8;if("G1"==groupName)fnName="g1m_fftFinal",fnToAffine="g1m_batchToAffine";else if("G2"==groupName)fnName="g2m_fftFinal",fnToAffine="g2m_batchToAffine";else throw Error("Invalid group");let nPoints=Math.floor(buff.byteLength/sG);if(nPoints!=1<<utils_log2(nPoints))throw Error("Invalid number of points");let pointsPerChunk=Math.floor(nPoints/tm.concurrency),opPromises=[];for(let i=0;i<tm.concurrency;i++){let n;if(0==(n=i<tm.concurrency-1?pointsPerChunk:nPoints-i*pointsPerChunk))continue;let task=[],b=buff.slice(i*pointsPerChunk*sG,(i*pointsPerChunk+n)*sG);task.push({cmd:"ALLOCSET",var:0,buff:b}),task.push({cmd:"ALLOCSET",var:1,buff:factor}),task.push({cmd:"CALL",fnName:fnName,params:[{var:0},{val:n},{var:1}]}),task.push({cmd:"CALL",fnName:fnToAffine,params:[{var:0},{val:n},{var:0}]}),task.push({cmd:"GET",out:0,var:0,len:n*sGout}),opPromises.push(tm.queueAction(task))}let result=await Promise.all(opPromises);fullBuffOut=buff instanceof BigBuffer?new BigBuffer(nPoints*sGout):new Uint8Array(nPoints*sGout);let p=0;for(let i1=result.length-1;i1>=0;i1--)fullBuffOut.set(result[i1][0],p),p+=result[i1][0].byteLength;return fullBuffOut}}async function buildEngine(params){let tm=await buildThreadManager(params.wasm,params.singleThread),curve={};return curve.q=e(params.wasm.q.toString()),curve.r=e(params.wasm.r.toString()),curve.name=params.name,curve.tm=tm,curve.prePSize=params.wasm.prePSize,curve.preQSize=params.wasm.preQSize,curve.Fr=new WasmField1(tm,"frm",params.n8r,params.r),curve.F1=new WasmField1(tm,"f1m",params.n8q,params.q),curve.F2=new WasmField2(tm,"f2m",curve.F1),curve.G1=new WasmCurve(tm,"g1m",curve.F1,params.wasm.pG1gen,params.wasm.pG1b,params.cofactorG1),curve.G2=new WasmCurve(tm,"g2m",curve.F2,params.wasm.pG2gen,params.wasm.pG2b,params.cofactorG2),curve.F6=new WasmField3(tm,"f6m",curve.F2),curve.F12=new WasmField2(tm,"ftm",curve.F6),curve.Gt=curve.F12,buildBatchApplyKey(curve,"G1"),buildBatchApplyKey(curve,"G2"),buildBatchApplyKey(curve,"Fr"),buildMultiexp(curve,"G1"),buildMultiexp(curve,"G2"),buildFFT(curve,"G1"),buildFFT(curve,"G2"),buildFFT(curve,"Fr"),buildPairing(curve),curve.array2buffer=function(arr,sG){let buff=new Uint8Array(sG*arr.length);for(let i=0;i<arr.length;i++)buff.set(arr[i],i*sG);return buff},curve.buffer2array=function(buff,sG){let n=buff.byteLength/sG,arr=Array(n);for(let i=0;i<n;i++)arr[i]=buff.slice(i*sG,i*sG+sG);return arr},curve}function utils_toNumber(n){return BigInt(n)}function utils_isNegative(n){return n<0n}function utils_isZero(n){return 0n===n}function utils_bitLength(n){return utils_isNegative(n)?n.toString(2).length-1:n.toString(2).length}function u32(n){let b=[],v=utils_toNumber(n);return b.push(Number(255n&v)),b.push(Number(v>>8n&255n)),b.push(Number(v>>16n&255n)),b.push(Number(v>>24n&255n)),b}function toUTF8Array(str){for(var utf8=[],i=0;i<str.length;i++){var charcode=str.charCodeAt(i);charcode<128?utf8.push(charcode):charcode<2048?utf8.push(192|charcode>>6,128|63&charcode):charcode<55296||charcode>=57344?utf8.push(224|charcode>>12,128|charcode>>6&63,128|63&charcode):(i++,charcode=65536+((1023&charcode)<<10|1023&str.charCodeAt(i)),utf8.push(240|charcode>>18,128|charcode>>12&63,128|charcode>>6&63,128|63&charcode))}return utf8}function string(str){let bytes=toUTF8Array(str);return[...varuint32(bytes.length),...bytes]}function varuint(n){let code=[],v=utils_toNumber(n);if(utils_isNegative(v))throw Error("Number cannot be negative");for(;!utils_isZero(v);)code.push(Number(127n&v)),v>>=7n;0==code.length&&code.push(0);for(let i=0;i<code.length-1;i++)code[i]=128|code[i];return code}function varint(_n){let n,sign;let bits=utils_bitLength(_n);_n<0?(sign=!0,n=(1n<<BigInt(bits))+_n):(sign=!1,n=utils_toNumber(_n));let paddingBits=7-bits%7,padding=(1n<<BigInt(paddingBits))-1n<<BigInt(bits),paddingMask=(1<<7-paddingBits)-1|128,code=varuint(n+padding);return sign||(code[code.length-1]=code[code.length-1]&paddingMask),code}function varint32(n){let v=utils_toNumber(n);if(v>4294967295n)throw Error("Number too big");if(v>2147483647n&&(v-=4294967296n),v<-2147483648n)throw Error("Number too small");return varint(v)}function varint64(n){let v=utils_toNumber(n);if(v>0xffffffffffffffffn)throw Error("Number too big");if(v>0x7fffffffffffffffn&&(v-=0x10000000000000000n),v<-0x8000000000000000n)throw Error("Number too small");return varint(v)}function varuint32(n){let v=utils_toNumber(n);if(v>4294967295n)throw Error("Number too big");return varuint(v)}function toHexString(byteArray){return Array.from(byteArray,function(byte){return("0"+(255&byte).toString(16)).slice(-2)}).join("")}class CodeBuilder{constructor(func){this.func=func,this.functionName=func.functionName,this.module=func.module}setLocal(localName,valCode){let idx=this.func.localIdxByName[localName];if(void 0===idx)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);return[...valCode,33,...varuint32(idx)]}teeLocal(localName,valCode){let idx=this.func.localIdxByName[localName];if(void 0===idx)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);return[...valCode,34,...varuint32(idx)]}getLocal(localName){let idx=this.func.localIdxByName[localName];if(void 0===idx)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);return[32,...varuint32(idx)]}i64_load8_s(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?0:_align;return[...idxCode,48,align,...varuint32(offset)]}i64_load8_u(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?0:_align;return[...idxCode,49,align,...varuint32(offset)]}i64_load16_s(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?1:_align;return[...idxCode,50,align,...varuint32(offset)]}i64_load16_u(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?1:_align;return[...idxCode,51,align,...varuint32(offset)]}i64_load32_s(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?2:_align;return[...idxCode,52,align,...varuint32(offset)]}i64_load32_u(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?2:_align;return[...idxCode,53,align,...varuint32(offset)]}i64_load(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?3:_align;return[...idxCode,41,align,...varuint32(offset)]}i64_store(idxCode,_offset,_align,_codeVal){let offset,align,codeVal;return Array.isArray(_offset)?(offset=0,align=3,codeVal=_offset):Array.isArray(_align)?(offset=_offset,align=3,codeVal=_align):Array.isArray(_codeVal)&&(offset=_offset,align=_align,codeVal=_codeVal),[...idxCode,...codeVal,55,align,...varuint32(offset)]}i64_store32(idxCode,_offset,_align,_codeVal){let offset,align,codeVal;return Array.isArray(_offset)?(offset=0,align=2,codeVal=_offset):Array.isArray(_align)?(offset=_offset,align=2,codeVal=_align):Array.isArray(_codeVal)&&(offset=_offset,align=_align,codeVal=_codeVal),[...idxCode,...codeVal,62,align,...varuint32(offset)]}i64_store16(idxCode,_offset,_align,_codeVal){let offset,align,codeVal;return Array.isArray(_offset)?(offset=0,align=1,codeVal=_offset):Array.isArray(_align)?(offset=_offset,align=1,codeVal=_align):Array.isArray(_codeVal)&&(offset=_offset,align=_align,codeVal=_codeVal),[...idxCode,...codeVal,61,align,...varuint32(offset)]}i64_store8(idxCode,_offset,_align,_codeVal){let offset,align,codeVal;return Array.isArray(_offset)?(offset=0,align=0,codeVal=_offset):Array.isArray(_align)?(offset=_offset,align=0,codeVal=_align):Array.isArray(_codeVal)&&(offset=_offset,align=_align,codeVal=_codeVal),[...idxCode,...codeVal,60,align,...varuint32(offset)]}i32_load8_s(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?0:_align;return[...idxCode,44,align,...varuint32(offset)]}i32_load8_u(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?0:_align;return[...idxCode,45,align,...varuint32(offset)]}i32_load16_s(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?1:_align;return[...idxCode,46,align,...varuint32(offset)]}i32_load16_u(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?1:_align;return[...idxCode,47,align,...varuint32(offset)]}i32_load(idxCode,_offset,_align){let offset=_offset||0,align=void 0===_align?2:_align;return[...idxCode,40,align,...varuint32(offset)]}i32_store(idxCode,_offset,_align,_codeVal){let offset,align,codeVal;return Array.isArray(_offset)?(offset=0,align=2,codeVal=_offset):Array.isArray(_align)?(offset=_offset,align=2,codeVal=_align):Array.isArray(_codeVal)&&(offset=_offset,align=_align,codeVal=_codeVal),[...idxCode,...codeVal,54,align,...varuint32(offset)]}i32_store16(idxCode,_offset,_align,_codeVal){let offset,align,codeVal;return Array.isArray(_offset)?(offset=0,align=1,codeVal=_offset):Array.isArray(_align)?(offset=_offset,align=1,codeVal=_align):Array.isArray(_codeVal)&&(offset=_offset,align=_align,codeVal=_codeVal),[...idxCode,...codeVal,59,align,...varuint32(offset)]}i32_store8(idxCode,_offset,_align,_codeVal){let offset,align,codeVal;return Array.isArray(_offset)?(offset=0,align=0,codeVal=_offset):Array.isArray(_align)?(offset=_offset,align=0,codeVal=_align):Array.isArray(_codeVal)&&(offset=_offset,align=_align,codeVal=_codeVal),[...idxCode,...codeVal,58,align,...varuint32(offset)]}call(fnName,...args){let idx=this.module.functionIdxByName[fnName];if(void 0===idx)throw Error(`Function not defined: Function: ${fnName}`);return[...[].concat(...args),16,...varuint32(idx)]}call_indirect(fnIdx,...args){return[...[].concat(...args),...fnIdx,17,0,0]}if(condCode,thenCode,elseCode){return elseCode?[...condCode,4,64,...thenCode,5,...elseCode,11]:[...condCode,4,64,...thenCode,11]}block(bCode){return[2,64,...bCode,11]}loop(...args){return[3,64,...[].concat(...[...args]),11]}br_if(relPath,condCode){return[...condCode,13,...varuint32(relPath)]}br(relPath){return[12,...varuint32(relPath)]}ret(rCode){return[...rCode,15]}drop(dCode){return[...dCode,26]}i64_const(num){return[66,...varint64(num)]}i32_const(num){return[65,...varint32(num)]}i64_eqz(opcode){return[...opcode,80]}i64_eq(op1code,op2code){return[...op1code,...op2code,81]}i64_ne(op1code,op2code){return[...op1code,...op2code,82]}i64_lt_s(op1code,op2code){return[...op1code,...op2code,83]}i64_lt_u(op1code,op2code){return[...op1code,...op2code,84]}i64_gt_s(op1code,op2code){return[...op1code,...op2code,85]}i64_gt_u(op1code,op2code){return[...op1code,...op2code,86]}i64_le_s(op1code,op2code){return[...op1code,...op2code,87]}i64_le_u(op1code,op2code){return[...op1code,...op2code,88]}i64_ge_s(op1code,op2code){return[...op1code,...op2code,89]}i64_ge_u(op1code,op2code){return[...op1code,...op2code,90]}i64_add(op1code,op2code){return[...op1code,...op2code,124]}i64_sub(op1code,op2code){return[...op1code,...op2code,125]}i64_mul(op1code,op2code){return[...op1code,...op2code,126]}i64_div_s(op1code,op2code){return[...op1code,...op2code,127]}i64_div_u(op1code,op2code){return[...op1code,...op2code,128]}i64_rem_s(op1code,op2code){return[...op1code,...op2code,129]}i64_rem_u(op1code,op2code){return[...op1code,...op2code,130]}i64_and(op1code,op2code){return[...op1code,...op2code,131]}i64_or(op1code,op2code){return[...op1code,...op2code,132]}i64_xor(op1code,op2code){return[...op1code,...op2code,133]}i64_shl(op1code,op2code){return[...op1code,...op2code,134]}i64_shr_s(op1code,op2code){return[...op1code,...op2code,135]}i64_shr_u(op1code,op2code){return[...op1code,...op2code,136]}i64_extend_i32_s(op1code){return[...op1code,172]}i64_extend_i32_u(op1code){return[...op1code,173]}i64_clz(op1code){return[...op1code,121]}i64_ctz(op1code){return[...op1code,122]}i32_eqz(op1code){return[...op1code,69]}i32_eq(op1code,op2code){return[...op1code,...op2code,70]}i32_ne(op1code,op2code){return[...op1code,...op2code,71]}i32_lt_s(op1code,op2code){return[...op1code,...op2code,72]}i32_lt_u(op1code,op2code){return[...op1code,...op2code,73]}i32_gt_s(op1code,op2code){return[...op1code,...op2code,74]}i32_gt_u(op1code,op2code){return[...op1code,...op2code,75]}i32_le_s(op1code,op2code){return[...op1code,...op2code,76]}i32_le_u(op1code,op2code){return[...op1code,...op2code,77]}i32_ge_s(op1code,op2code){return[...op1code,...op2code,78]}i32_ge_u(op1code,op2code){return[...op1code,...op2code,79]}i32_add(op1code,op2code){return[...op1code,...op2code,106]}i32_sub(op1code,op2code){return[...op1code,...op2code,107]}i32_mul(op1code,op2code){return[...op1code,...op2code,108]}i32_div_s(op1code,op2code){return[...op1code,...op2code,109]}i32_div_u(op1code,op2code){return[...op1code,...op2code,110]}i32_rem_s(op1code,op2code){return[...op1code,...op2code,111]}i32_rem_u(op1code,op2code){return[...op1code,...op2code,112]}i32_and(op1code,op2code){return[...op1code,...op2code,113]}i32_or(op1code,op2code){return[...op1code,...op2code,114]}i32_xor(op1code,op2code){return[...op1code,...op2code,115]}i32_shl(op1code,op2code){return[...op1code,...op2code,116]}i32_shr_s(op1code,op2code){return[...op1code,...op2code,117]}i32_shr_u(op1code,op2code){return[...op1code,...op2code,118]}i32_rotl(op1code,op2code){return[...op1code,...op2code,119]}i32_rotr(op1code,op2code){return[...op1code,...op2code,120]}i32_wrap_i64(op1code){return[...op1code,167]}i32_clz(op1code){return[...op1code,103]}i32_ctz(op1code){return[...op1code,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}let typeCodes={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class FunctionBuilder{constructor(module,fnName,fnType,moduleName,fieldName){if("import"==fnType)this.fnType="import",this.moduleName=moduleName,this.fieldName=fieldName;else if("internal"==fnType)this.fnType="internal";else throw Error("Invalid function fnType: "+fnType);this.module=module,this.fnName=fnName,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(paramName,paramType){if(this.localIdxByName[paramName])throw Error(`param already exists. Function: ${this.fnName}, Param: ${paramName} `);let idx=this.nextLocal++;this.localIdxByName[paramName]=idx,this.params.push({type:paramType})}addLocal(localName,localType,_length){let length=_length||1;if(this.localIdxByName[localName])throw Error(`local already exists. Function: ${this.fnName}, Param: ${localName} `);let idx=this.nextLocal++;this.localIdxByName[localName]=idx,this.locals.push({type:localType,length:length})}setReturnType(returnType){if(this.returnType)throw Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=returnType}getSignature(){let params=[...varuint32(this.params.length),...this.params.map(p=>typeCodes[p.type])],returns=this.returnType?[1,typeCodes[this.returnType]]:[0];return[96,...params,...returns]}getBody(){let locals=this.locals.map(l=>[...varuint32(l.length),typeCodes[l.type]]),body=[...varuint32(this.locals.length),...[].concat(...locals),...this.code,11];return[...varuint32(body.length),...body]}addCode(...code){this.code.push(...[].concat(...[...code]))}getCodeBuilder(){return new CodeBuilder(this)}}class modulebuilder_ModuleBuilder{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...u32(1836278016),...u32(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(fnName){if(void 0!==this.functionIdxByName[fnName])throw Error(`Function already defined: ${fnName}`);let idx=this.functions.length;return this.functionIdxByName[fnName]=idx,this.functions.push(new FunctionBuilder(this,fnName,"internal")),this.nInternalFunctions++,this.functions[idx]}addIimportFunction(fnName,moduleName,_fieldName){if(void 0!==this.functionIdxByName[fnName])throw Error(`Function already defined: ${fnName}`);if(this.functions.length>0&&"internal"==this.functions[this.functions.length-1].type)throw Error(`Import functions must be declared before internal: ${fnName}`);let fieldName=_fieldName||fnName,idx=this.functions.length;return this.functionIdxByName[fnName]=idx,this.functions.push(new FunctionBuilder(this,fnName,"import",moduleName,fieldName)),this.nImportFunctions++,this.functions[idx]}setMemory(pagesSize,moduleName,fieldName){this.memory={pagesSize:pagesSize,moduleName:moduleName||"env",fieldName:fieldName||"memory"}}exportFunction(fnName,_exportName){let exportName=_exportName||fnName;if(void 0===this.functionIdxByName[fnName])throw Error(`Function not defined: ${fnName}`);let idx=this.functionIdxByName[fnName];exportName!=fnName&&(this.functionIdxByName[exportName]=idx),this.exports.push({exportName:exportName,idx:idx})}addFunctionToTable(fnName){let idx=this.functionIdxByName[fnName];this.functionsTable.push(idx)}addData(offset,bytes){this.datas.push({offset:offset,bytes:bytes})}alloc(a,b){let size,bytes;(Array.isArray(a)||ArrayBuffer.isView(a))&&void 0===b?(size=a.length,bytes=a):(size=a,bytes=b),size=(size-1>>3)+1<<3;let p=this.free;return this.free+=size,bytes&&this.addData(p,bytes),p}allocString(s){let encoder=new globalThis.TextEncoder,uint8array=encoder.encode(s);return this.alloc([...uint8array,0])}_setSignatures(){this.signatures=[];let signatureIdxByName={};if(this.functionsTable.length>0){let signature=this.functions[this.functionsTable[0]].getSignature(),signatureName="s_"+toHexString(signature);signatureIdxByName[signatureName]=0,this.signatures.push(signature)}for(let i=0;i<this.functions.length;i++){let signature1=this.functions[i].getSignature(),signatureName1="s_"+toHexString(signature1);void 0===signatureIdxByName[signatureName1]&&(signatureIdxByName[signatureName1]=this.signatures.length,this.signatures.push(signature1)),this.functions[i].signatureIdx=signatureIdxByName[signatureName1]}}_buildSection(sectionType,section){return[sectionType,...varuint32(section.length),...section]}_buildType(){return this._buildSection(1,[...varuint32(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){let entries=[];entries.push([...string(this.memory.moduleName),...string(this.memory.fieldName),2,0,...varuint32(this.memory.pagesSize)]);for(let i=0;i<this.nImportFunctions;i++)entries.push([...string(this.functions[i].moduleName),...string(this.functions[i].fieldName),0,...varuint32(this.functions[i].signatureIdx)]);return this._buildSection(2,varuint32(entries.length).concat(...entries))}_buildFunctionDeclarations(){let entries=[];for(let i=this.nImportFunctions;i<this.nImportFunctions+this.nInternalFunctions;i++)entries.push(...varuint32(this.functions[i].signatureIdx));return this._buildSection(3,[...varuint32(entries.length),...entries])}_buildFunctionsTable(){return 0==this.functionsTable.length?[]:this._buildSection(4,[...varuint32(1),112,0,...varuint32(this.functionsTable.length)])}_buildElements(){if(0==this.functionsTable.length)return[];let entries=[];for(let i=0;i<this.functionsTable.length;i++)entries.push(...varuint32(this.functionsTable[i]));return this._buildSection(9,[...varuint32(1),...varuint32(0),65,...varint32(0),11,...varuint32(this.functionsTable.length),...entries])}_buildExports(){let entries=[];for(let i=0;i<this.exports.length;i++)entries.push([...string(this.exports[i].exportName),0,...varuint32(this.exports[i].idx)]);return this._buildSection(7,varuint32(entries.length).concat(...entries))}_buildCode(){let entries=[];for(let i=this.nImportFunctions;i<this.nImportFunctions+this.nInternalFunctions;i++)entries.push(this.functions[i].getBody());return this._buildSection(10,varuint32(entries.length).concat(...entries))}_buildData(){let entries=[];entries.push([0,65,0,11,4,...u32(this.free)]);for(let i=0;i<this.datas.length;i++)entries.push([0,65,...varint32(this.datas[i].offset),11,...varuint32(this.datas[i].bytes.length),...this.datas[i].bytes]);return this._buildSection(11,varuint32(entries.length).concat(...entries))}}async function bn128_buildBn128(singleThread,plugins){let moduleBuilder=new modulebuilder_ModuleBuilder;moduleBuilder.setMemory(25),(0,wasmcurves.buildBn128)(moduleBuilder),plugins&&plugins(moduleBuilder);let bn128wasm={};if(bn128wasm.code=moduleBuilder.build(),bn128wasm.pq=moduleBuilder.modules.f1m.pq,bn128wasm.pr=moduleBuilder.modules.frm.pq,bn128wasm.pG1gen=moduleBuilder.modules.bn128.pG1gen,bn128wasm.pG1zero=moduleBuilder.modules.bn128.pG1zero,bn128wasm.pG1b=moduleBuilder.modules.bn128.pG1b,bn128wasm.pG2gen=moduleBuilder.modules.bn128.pG2gen,bn128wasm.pG2zero=moduleBuilder.modules.bn128.pG2zero,bn128wasm.pG2b=moduleBuilder.modules.bn128.pG2b,bn128wasm.pOneT=moduleBuilder.modules.bn128.pOneT,bn128wasm.prePSize=moduleBuilder.modules.bn128.prePSize,bn128wasm.preQSize=moduleBuilder.modules.bn128.preQSize,bn128wasm.n8q=32,bn128wasm.n8r=32,bn128wasm.q=moduleBuilder.modules.bn128.q,bn128wasm.r=moduleBuilder.modules.bn128.r,!singleThread&&globalThis.curve_bn128)return globalThis.curve_bn128;let params={name:"bn128",wasm:bn128wasm,q:e("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:e("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:e("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!singleThread},curve=await buildEngine(params);return curve.terminate=async function(){params.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},singleThread||(globalThis.curve_bn128=curve),curve}async function buildBls12381(singleThread,plugins){let moduleBuilder=new modulebuilder_ModuleBuilder;moduleBuilder.setMemory(25),(0,wasmcurves.buildBls12381)(moduleBuilder),plugins&&plugins(moduleBuilder);let bls12381wasm={};if(bls12381wasm.code=moduleBuilder.build(),bls12381wasm.pq=moduleBuilder.modules.f1m.pq,bls12381wasm.pr=moduleBuilder.modules.frm.pq,bls12381wasm.pG1gen=moduleBuilder.modules.bls12381.pG1gen,bls12381wasm.pG1zero=moduleBuilder.modules.bls12381.pG1zero,bls12381wasm.pG1b=moduleBuilder.modules.bls12381.pG1b,bls12381wasm.pG2gen=moduleBuilder.modules.bls12381.pG2gen,bls12381wasm.pG2zero=moduleBuilder.modules.bls12381.pG2zero,bls12381wasm.pG2b=moduleBuilder.modules.bls12381.pG2b,bls12381wasm.pOneT=moduleBuilder.modules.bls12381.pOneT,bls12381wasm.prePSize=moduleBuilder.modules.bls12381.prePSize,bls12381wasm.preQSize=moduleBuilder.modules.bls12381.preQSize,bls12381wasm.n8q=48,bls12381wasm.n8r=32,bls12381wasm.q=moduleBuilder.modules.bls12381.q,bls12381wasm.r=moduleBuilder.modules.bls12381.r,!singleThread&&globalThis.curve_bls12381)return globalThis.curve_bls12381;let params={name:"bls12381",wasm:bls12381wasm,q:e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:e("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:e("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!singleThread},curve=await buildEngine(params);return curve.terminate=async function(){params.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},singleThread||(globalThis.curve_bls12381=curve),curve}__webpack_require__(8834).Buffer,globalThis.curve_bn128=null,globalThis.curve_bls12381=null;let bls12381r=e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),bn128r=e("21888242871839275222246405745257275088548364400416034343698204186575808495617"),bls12381q=e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),bn128q=e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function getCurveFromR(r,singleThread,plugins){let curve;if(eq(r,bn128r))curve=await bn128_buildBn128(singleThread,plugins);else if(eq(r,bls12381r))curve=await buildBls12381(singleThread,plugins);else throw Error(`Curve not supported: ${scalar_toString(r)}`);return curve}async function getCurveFromQ(q,singleThread,plugins){let curve;if(eq(q,bn128q))curve=await bn128_buildBn128(singleThread,plugins);else if(eq(q,bls12381q))curve=await buildBls12381(singleThread,plugins);else throw Error(`Curve not supported: ${scalar_toString(q,16)}`);return curve}async function getCurveFromName(name,singleThread,plugins){let curve;let normName=normalizeName(name);if(["BN128","BN254","ALTBN128"].indexOf(normName)>=0)curve=await bn128_buildBn128(singleThread,plugins);else if(["BLS12381"].indexOf(normName)>=0)curve=await buildBls12381(singleThread,plugins);else throw Error(`Curve not supported: ${name}`);return curve;function normalizeName(n){return n.toUpperCase().match(/[A-Za-z0-9]+/g).join("")}}let main_Scalar=scalar_namespaceObject,main_utils=utils_namespaceObject;function flatArray(a){var res=[];return fillArray(res,a),res;function fillArray(res,a){if(Array.isArray(a))for(let i=0;i<a.length;i++)fillArray(res,a[i]);else res.push(a)}}function fnvHash(str){let uint64_max=BigInt(2)**BigInt(64),hash=BigInt("0xCBF29CE484222325");for(var i=0;i<str.length;i++)hash^=BigInt(str[i].charCodeAt()),hash*=BigInt(1099511628211),hash%=uint64_max;let shash=hash.toString(16),n=16-shash.length;return"0".repeat(n).concat(shash)}function toArray32(s,size){let res=[],rem=BigInt(s),radix=BigInt(4294967296);for(;rem;)res.unshift(Number(rem%radix)),rem/=radix;if(size)for(var i=size-res.length;i>0;)res.unshift(0),i--;return res}async function builder(code,options){let memory,wc;options=options||{};let memorySize=32767,memoryAllocated=!1;for(;!memoryAllocated;)try{memory=new WebAssembly.Memory({initial:memorySize}),memoryAllocated=!0}catch(err){if(1===memorySize)throw err;console.warn("Could not allocate "+65536*memorySize+" bytes. This may cause severe instability. Trying with "+65536*memorySize/2+" bytes"),memorySize=Math.floor(memorySize/2)}let wasmModule=await WebAssembly.compile(code),errStr="",msgStr="",majorVersion=1,minorVersion=0,patchVersion=0,instance=await WebAssembly.instantiate(wasmModule,{env:{memory:memory},runtime:{exceptionHandler:function(code){let err;throw err=1==code?"Signal not found. ":2==code?"Too many signals set. ":3==code?"Signal already set. ":4==code?"Assert Failed. ":5==code?"Not enough memory. ":6==code?"Input signal array access exceeds the size. ":"Unknown error. ",console.error("ERROR: ",code,errStr),Error(err+errStr)},printErrorMessage:function(){errStr+=getMessage()+"\n"},writeBufferMessage:function(){let msg=getMessage();"\n"===msg?(console.log(msgStr),msgStr=""):(""!==msgStr&&(msgStr+=" "),msgStr+=msg)},showSharedRWMemory:function(){let shared_rw_memory_size=instance.exports.getFieldNumLen32(),arr=new Uint32Array(shared_rw_memory_size);for(let j=0;j<shared_rw_memory_size;j++)arr[shared_rw_memory_size-1-j]=instance.exports.readSharedRWMemory(j);if(majorVersion>=2&&(minorVersion>=1||patchVersion>=7)){""!==msgStr&&(msgStr+=" ");let msg=main_Scalar.fromArray(arr,4294967296).toString();msgStr+=msg}else console.log(main_Scalar.fromArray(arr,4294967296))},error:function(code,pstr,a,b,c,d){let errStr;throw errStr=7==code?p2str(pstr)+" "+wc.getFr(b).toString()+" != "+wc.getFr(c).toString()+" "+p2str(d):9==code?p2str(pstr)+" "+wc.getFr(b).toString()+" "+p2str(c):5==code&&options.sym?p2str(pstr)+" "+options.sym.labelIdx2Name[c]:p2str(pstr)+" "+a+" "+b+" "+c+" "+d,console.log("ERROR: ",code,errStr),Error(errStr)},log:function(a){console.log(wc.getFr(a).toString())},logGetSignal:function(signal,pVal){options.logGetSignal&&options.logGetSignal(signal,wc.getFr(pVal))},logSetSignal:function(signal,pVal){options.logSetSignal&&options.logSetSignal(signal,wc.getFr(pVal))},logStartComponent:function(cIdx){options.logStartComponent&&options.logStartComponent(cIdx)},logFinishComponent:function(cIdx){options.logFinishComponent&&options.logFinishComponent(cIdx)}}});"function"==typeof instance.exports.getVersion&&(majorVersion=instance.exports.getVersion()),"function"==typeof instance.exports.getMinorVersion&&(minorVersion=instance.exports.getMinorVersion()),"function"==typeof instance.exports.getPatchVersion&&(patchVersion=instance.exports.getPatchVersion());let sanityCheck=options&&(options.sanityCheck||options.logGetSignal||options.logSetSignal||options.logStartComponent||options.logFinishComponent);return wc=2===majorVersion?new WitnessCalculatorCircom2(instance,sanityCheck):new WitnessCalculatorCircom1(memory,instance,sanityCheck);function getMessage(){for(var message="",c=instance.exports.getMessageChar();0!=c;)message+=String.fromCharCode(c),c=instance.exports.getMessageChar();return message}function p2str(p){let i8=new Uint8Array(memory.buffer),bytes=[];for(let i=0;i8[p+i]>0;i++)bytes.push(i8[p+i]);return String.fromCharCode.apply(null,bytes)}}class WitnessCalculatorCircom1{constructor(memory,instance,sanityCheck){this.memory=memory,this.i32=new Uint32Array(memory.buffer),this.instance=instance,this.n32=(this.instance.exports.getFrLen()>>2)-2;let pRawPrime=this.instance.exports.getPRawPrime(),arr=Array(this.n32);for(let i=0;i<this.n32;i++)arr[this.n32-1-i]=this.i32[(pRawPrime>>2)+i];this.prime=main_Scalar.fromArray(arr,4294967296),this.Fr=new ZqField(this.prime),this.mask32=main_Scalar.fromString("FFFFFFFF",16),this.NVars=this.instance.exports.getNVars(),this.n64=Math.floor((this.Fr.bitLength-1)/64)+1,this.R=this.Fr.e(main_Scalar.shiftLeft(1,64*this.n64)),this.RInv=this.Fr.inv(this.R),this.sanityCheck=sanityCheck}circom_version(){return 1}async _doCalculateWitness(input,sanityCheck){this.instance.exports.init(this.sanityCheck||sanityCheck?1:0);let pSigOffset=this.allocInt(),pFr=this.allocFr(),keys=Object.keys(input);keys.forEach(k=>{let h=fnvHash(k),hMSB=parseInt(h.slice(0,8),16),hLSB=parseInt(h.slice(8,16),16);try{this.instance.exports.getSignalOffset32(pSigOffset,0,hMSB,hLSB)}catch(err){throw Error(`Signal ${k} is not an input of the circuit.`)}let sigOffset=this.getInt(pSigOffset),fArr=flatArray(input[k]);for(let i=0;i<fArr.length;i++)this.setFr(pFr,fArr[i]),this.instance.exports.setSignal(0,0,sigOffset+i,pFr)})}async calculateWitness(input,sanityCheck){let self1=this,old0=self1.i32[0],w=[];await self1._doCalculateWitness(input,sanityCheck);for(let i=0;i<self1.NVars;i++){let pWitness=self1.instance.exports.getPWitness(i);w.push(self1.getFr(pWitness))}return self1.i32[0]=old0,w}async calculateBinWitness(input,sanityCheck){let self1=this,old0=self1.i32[0];await self1._doCalculateWitness(input,sanityCheck);let pWitnessBuffer=self1.instance.exports.getWitnessBuffer();self1.i32[0]=old0;let buff=self1.memory.buffer.slice(pWitnessBuffer,pWitnessBuffer+self1.NVars*self1.n64*8);return new Uint8Array(buff)}allocInt(){let p=this.i32[0];return this.i32[0]=p+8,p}allocFr(){let p=this.i32[0];return this.i32[0]=p+4*this.n32+8,p}getInt(p){return this.i32[p>>2]}setInt(p,v){this.i32[p>>2]=v}getFr(p){let self1=this,idx=p>>2;if(2147483648&self1.i32[idx+1]){let arr=Array(self1.n32);for(let i=0;i<self1.n32;i++)arr[self1.n32-1-i]=self1.i32[idx+2+i];let res=self1.Fr.e(main_Scalar.fromArray(arr,4294967296));return 1073741824&self1.i32[idx+1]?fromMontgomery(res):res}return 2147483648&self1.i32[idx]?self1.Fr.e(self1.i32[idx]-4294967296):self1.Fr.e(self1.i32[idx]);function fromMontgomery(n){return self1.Fr.mul(self1.RInv,n)}}setFr(p,v){let self1=this;v=self1.Fr.e(v);let minShort=self1.Fr.neg(self1.Fr.e("80000000",16)),maxShort=self1.Fr.e("7FFFFFFF",16);if(self1.Fr.geq(v,minShort)&&self1.Fr.leq(v,maxShort)){let a;a=self1.Fr.geq(v,self1.Fr.zero)?main_Scalar.toNumber(v):4294967296+(a=main_Scalar.toNumber(self1.Fr.sub(v,minShort))-2147483648),self1.i32[p>>2]=a,self1.i32[(p>>2)+1]=0;return}self1.i32[p>>2]=0,self1.i32[(p>>2)+1]=2147483648;let arr=main_Scalar.toArray(v,4294967296);for(let i=0;i<self1.n32;i++){let idx=arr.length-1-i;idx>=0?self1.i32[(p>>2)+2+i]=arr[idx]:self1.i32[(p>>2)+2+i]=0}}}class WitnessCalculatorCircom2{constructor(instance,sanityCheck){this.instance=instance,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();let arr=Array(this.n32);for(let i=0;i<this.n32;i++)arr[this.n32-1-i]=this.instance.exports.readSharedRWMemory(i);this.prime=main_Scalar.fromArray(arr,4294967296),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=sanityCheck}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(input,sanityCheck){this.instance.exports.init(this.sanityCheck||sanityCheck?1:0);let keys=Object.keys(input);var input_counter=0;if(keys.forEach(k=>{let h=fnvHash(k),hMSB=parseInt(h.slice(0,8),16),hLSB=parseInt(h.slice(8,16),16),fArr=flatArray(input[k]);for(let i=0;i<fArr.length;i++){let arrFr=toArray32(fArr[i],this.n32);for(let j=0;j<this.n32;j++)this.instance.exports.writeSharedRWMemory(j,arrFr[this.n32-1-j]);try{this.instance.exports.setInputSignal(hMSB,hLSB,i),input_counter++}catch(err){throw Error(err)}}}),input_counter<this.instance.exports.getInputSize())throw Error(`Not all inputs have been set. Only ${input_counter} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(input,sanityCheck){let w=[];await this._doCalculateWitness(input,sanityCheck);for(let i=0;i<this.witnessSize;i++){this.instance.exports.getWitness(i);let arr=new Uint32Array(this.n32);for(let j=0;j<this.n32;j++)arr[this.n32-1-j]=this.instance.exports.readSharedRWMemory(j);w.push(main_Scalar.fromArray(arr,4294967296))}return w}async calculateWTNSBin(input,sanityCheck){let buff32=new Uint32Array(this.witnessSize*this.n32+this.n32+11),buff=new Uint8Array(buff32.buffer);await this._doCalculateWitness(input,sanityCheck),buff[0]=119,buff[1]=116,buff[2]=110,buff[3]=115,buff32[1]=2,buff32[2]=2,buff32[3]=1;let n8=4*this.n32,idSection1length=8+n8,idSection1lengthHex=idSection1length.toString(16);buff32[4]=parseInt(idSection1lengthHex.slice(0,8),16),buff32[5]=parseInt(idSection1lengthHex.slice(8,16),16),buff32[6]=n8,this.instance.exports.getRawPrime();var pos=7;for(let j=0;j<this.n32;j++)buff32[pos+j]=this.instance.exports.readSharedRWMemory(j);buff32[pos+=this.n32]=this.witnessSize,buff32[++pos]=2,pos++;let idSection2length=n8*this.witnessSize,idSection2lengthHex=idSection2length.toString(16);buff32[pos]=parseInt(idSection2lengthHex.slice(0,8),16),buff32[pos+1]=parseInt(idSection2lengthHex.slice(8,16),16),pos+=2;for(let i=0;i<this.witnessSize;i++){this.instance.exports.getWitness(i);for(let j1=0;j1<this.n32;j1++)buff32[pos+j1]=this.instance.exports.readSharedRWMemory(j1);pos+=this.n32}return buff}}/**
 * @module @zk-kit/groth16
 * @version 0.1.0
 * @file A snippet of SnarkJS code for verifying and generating Groth16 proofs only.
 * @copyright Ethereum Foundation 2023
 * @license MIT
 * @see [Github]{@link https://github.com/privacy-scaling-explorations/zk-kit/tree/main/packages/groth16}
*/ function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function getAugmentedNamespace(n){if(n.__esModule)return n;var f=n.default;if("function"==typeof f){var a=function a(){if(this instanceof a){var args=[null];return args.push.apply(args,arguments),new(Function.bind.apply(f,args))}return f.apply(this,arguments)};a.prototype=f.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(k){var d=Object.getOwnPropertyDescriptor(n,k);Object.defineProperty(a,k,d.get?d:{enumerable:!0,get:function(){return n[k]}})}),a}"function"==typeof SuppressedError&&SuppressedError;var main$1={},require$$0$1=getAugmentedNamespace(ffjavascript_main_namespaceObject),main={},require$$0=getAugmentedNamespace(Object.freeze({__proto__:null,default:{}}));let O_TRUNC=512,O_CREAT=64,O_RDWR=2,O_EXCL=128,O_RDONLY=0;var require$$1=getAugmentedNamespace(Object.freeze({__proto__:null,O_CREAT:O_CREAT,O_EXCL:O_EXCL,O_RDONLY:O_RDONLY,O_RDWR:O_RDWR,O_TRUNC:O_TRUNC}));Object.defineProperty(main,"__esModule",{value:!0});var fs=(ex=require$$0)&&"object"==typeof ex&&"default"in ex?ex.default:ex,constants=require$$1;async function index_browser_open(fileName,openFlags,cacheSize,pageSize){if(cacheSize=cacheSize||262144,"number"!=typeof openFlags&&0>["w+","wx+","r","ax+","a+"].indexOf(openFlags))throw Error("Invalid open option");let fd=await fs.promises.open(fileName,openFlags),stats=await fd.stat();return new FastFile(fd,stats,cacheSize,pageSize,fileName)}class FastFile{constructor(fd,stats,cacheSize,pageSize,fileName){for(this.fileName=fileName,this.fd=fd,this.pos=0,this.pageSize=pageSize||256;this.pageSize<stats.blksize;)this.pageSize*=2;this.totalSize=stats.size,this.totalPages=Math.floor((stats.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(cacheSize/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(p){let self1=this,P=new Promise((resolve,reject)=>{self1.pendingLoads.push({page:p,resolve:resolve,reject:reject})});return self1.__statusPage("After Load request: ",p),P}__statusPage(s,p){let logEntry=[],self1=this;if(!self1.logHistory)return;logEntry.push("=="+s+" "+p);let S="";for(let i=0;i<self1.pendingLoads.length;i++)self1.pendingLoads[i].page==p&&(S=S+" "+i);if(S&&logEntry.push("Pending loads:"+S),void 0!==self1.pages[p]){let page=self1.pages[p];logEntry.push("Loaded"),logEntry.push("pendingOps: "+page.pendingOps),page.loading&&logEntry.push("loading: "+page.loading),page.writing&&logEntry.push("writing"),page.dirty&&logEntry.push("dirty")}logEntry.push("=="),self1.history[p]||(self1.history[p]=[]),self1.history[p].push(logEntry)}__printHistory(p){let self1=this;self1.history[p]||console.log("Empty History ",p),console.log("History "+p);for(let i=0;i<self1.history[p].length;i++)for(let j=0;j<self1.history[p][i].length;j++)console.log("-> "+self1.history[p][i][j])}_triggerLoad(){let self1=this;if(self1.reading||0==self1.pendingLoads.length)return;let pageIdxs=Object.keys(self1.pages),deletablePages=[];for(let i=0;i<pageIdxs.length;i++){let page=self1.pages[parseInt(pageIdxs[i])];!1!=page.dirty||0!=page.pendingOps||page.writing||page.loading||deletablePages.push(parseInt(pageIdxs[i]))}let freePages=self1.maxPagesLoaded-pageIdxs.length,ops=[];for(;self1.pendingLoads.length>0&&(void 0!==self1.pages[self1.pendingLoads[0].page]||freePages>0||deletablePages.length>0);){let load=self1.pendingLoads.shift();if(void 0!==self1.pages[load.page]){self1.pages[load.page].pendingOps++;let idx=deletablePages.indexOf(load.page);idx>=0&&deletablePages.splice(idx,1),self1.pages[load.page].loading?self1.pages[load.page].loading.push(load):load.resolve(),self1.__statusPage("After Load (cached): ",load.page)}else{if(freePages)freePages--;else{let fp=deletablePages.shift();self1.__statusPage("Before Unload: ",fp),self1.avBuffs.unshift(self1.pages[fp]),delete self1.pages[fp],self1.__statusPage("After Unload: ",fp)}load.page>=self1.totalPages?(self1.pages[load.page]=getNewPage(),load.resolve(),self1.__statusPage("After Load (new): ",load.page)):(self1.reading=!0,self1.pages[load.page]=getNewPage(),self1.pages[load.page].loading=[load],ops.push(self1.fd.read(self1.pages[load.page].buff,0,self1.pageSize,load.page*self1.pageSize).then(res=>{self1.pages[load.page].size=res.bytesRead;let loading=self1.pages[load.page].loading;delete self1.pages[load.page].loading;for(let i=0;i<loading.length;i++)loading[i].resolve();return self1.__statusPage("After Load (loaded): ",load.page),res},err=>{load.reject(err)})),self1.__statusPage("After Load (loading): ",load.page))}}function getNewPage(){if(!(self1.avBuffs.length>0))return{dirty:!1,buff:new Uint8Array(self1.pageSize),pendingOps:1,size:0};{let p=self1.avBuffs.shift();return p.dirty=!1,p.pendingOps=1,p.size=0,p}}Promise.all(ops).then(()=>{self1.reading=!1,self1.pendingLoads.length>0&&setImmediate(self1._triggerLoad.bind(self1)),self1._tryClose()})}_triggerWrite(){let self1=this;if(self1.writing)return;let pageIdxs=Object.keys(self1.pages),ops=[];for(let i=0;i<pageIdxs.length;i++){let page=self1.pages[parseInt(pageIdxs[i])];page.dirty&&(page.dirty=!1,page.writing=!0,self1.writing=!0,ops.push(self1.fd.write(page.buff,0,page.size,parseInt(pageIdxs[i])*self1.pageSize).then(()=>{page.writing=!1},err=>{console.log("ERROR Writing: "+err),self1.error=err,self1._tryClose()})))}self1.writing&&Promise.all(ops).then(()=>{self1.writing=!1,setImmediate(self1._triggerWrite.bind(self1)),self1._tryClose(),self1.pendingLoads.length>0&&setImmediate(self1._triggerLoad.bind(self1))})}_getDirtyPage(){for(let p in this.pages)if(this.pages[p].dirty)return p;return -1}async write(buff,pos){if(0==buff.byteLength)return;let self1=this;if(void 0===pos&&(pos=self1.pos),self1.pos=pos+buff.byteLength,self1.totalSize<pos+buff.byteLength&&(self1.totalSize=pos+buff.byteLength),self1.pendingClose)throw Error("Writing a closing file");let firstPage=Math.floor(pos/self1.pageSize),lastPage=Math.floor((pos+buff.byteLength-1)/self1.pageSize),pagePromises=[];for(let i=firstPage;i<=lastPage;i++)pagePromises.push(self1._loadPage(i));self1._triggerLoad();let p=firstPage,o=pos%self1.pageSize,r=buff.byteLength;for(;r>0;){await pagePromises[p-firstPage];let l=o+r>self1.pageSize?self1.pageSize-o:r,srcView=buff.slice(buff.byteLength-r,buff.byteLength-r+l),dstView=new Uint8Array(self1.pages[p].buff.buffer,o,l);dstView.set(srcView),self1.pages[p].dirty=!0,self1.pages[p].pendingOps--,self1.pages[p].size=Math.max(o+l,self1.pages[p].size),p>=self1.totalPages&&(self1.totalPages=p+1),r-=l,p++,o=0,self1.writing||setImmediate(self1._triggerWrite.bind(self1))}}async read(len,pos){let self1=this,buff=new Uint8Array(len);return await self1.readToBuffer(buff,0,len,pos),buff}async readToBuffer(buffDst,offset,len,pos){if(0==len)return;let self1=this;if(len>self1.pageSize*self1.maxPagesLoaded*.8){let cacheSize=Math.floor(1.1*len);this.maxPagesLoaded=Math.floor(cacheSize/self1.pageSize)+1}if(void 0===pos&&(pos=self1.pos),self1.pos=pos+len,self1.pendingClose)throw Error("Reading a closing file");let firstPage=Math.floor(pos/self1.pageSize),lastPage=Math.floor((pos+len-1)/self1.pageSize),pagePromises=[];for(let i=firstPage;i<=lastPage;i++)pagePromises.push(self1._loadPage(i));self1._triggerLoad();let p=firstPage,o=pos%self1.pageSize,r=pos+len>self1.totalSize?len-(pos+len-self1.totalSize):len;for(;r>0;){await pagePromises[p-firstPage],self1.__statusPage("After Await (read): ",p);let l=o+r>self1.pageSize?self1.pageSize-o:r,srcView=new Uint8Array(self1.pages[p].buff.buffer,self1.pages[p].buff.byteOffset+o,l);buffDst.set(srcView,offset+len-r),self1.pages[p].pendingOps--,self1.__statusPage("After Op done: ",p),r-=l,p++,o=0,self1.pendingLoads.length>0&&setImmediate(self1._triggerLoad.bind(self1))}this.pos=pos+len}_tryClose(){let self1=this;if(!self1.pendingClose)return;self1.error&&self1.pendingCloseReject(self1.error);let p=self1._getDirtyPage();p>=0||self1.writing||self1.reading||self1.pendingLoads.length>0||self1.pendingClose()}close(){let self1=this;if(self1.pendingClose)throw Error("Closing the file twice");return new Promise((resolve,reject)=>{self1.pendingClose=resolve,self1.pendingCloseReject=reject,self1._tryClose()}).then(()=>{self1.fd.close()},err=>{throw self1.fd.close(),err})}async discard(){let self1=this;await self1.close(),await fs.promises.unlink(this.fileName)}async writeULE32(v,pos){let self1=this,tmpBuff32=new Uint8Array(4),tmpBuff32v=new DataView(tmpBuff32.buffer);tmpBuff32v.setUint32(0,v,!0),await self1.write(tmpBuff32,pos)}async writeUBE32(v,pos){let self1=this,tmpBuff32=new Uint8Array(4),tmpBuff32v=new DataView(tmpBuff32.buffer);tmpBuff32v.setUint32(0,v,!1),await self1.write(tmpBuff32,pos)}async writeULE64(v,pos){let self1=this,tmpBuff64=new Uint8Array(8),tmpBuff64v=new DataView(tmpBuff64.buffer);tmpBuff64v.setUint32(0,4294967295&v,!0),tmpBuff64v.setUint32(4,Math.floor(v/4294967296),!0),await self1.write(tmpBuff64,pos)}async readULE32(pos){let self1=this,b=await self1.read(4,pos),view=new Uint32Array(b.buffer);return view[0]}async readUBE32(pos){let self1=this,b=await self1.read(4,pos),view=new DataView(b.buffer);return view.getUint32(0,!1)}async readULE64(pos){let self1=this,b=await self1.read(8,pos),view=new Uint32Array(b.buffer);return 4294967296*view[1]+view[0]}async readString(pos){let self1=this;if(self1.pendingClose)throw Error("Reading a closing file");let currentPosition=void 0===pos?self1.pos:pos,currentPage=Math.floor(currentPosition/self1.pageSize),endOfStringFound=!1,str="";for(;!endOfStringFound;){let pagePromise=self1._loadPage(currentPage);self1._triggerLoad(),await pagePromise,self1.__statusPage("After Await (read): ",currentPage);let offsetOnPage=currentPosition%self1.pageSize,dataArray=new Uint8Array(self1.pages[currentPage].buff.buffer,self1.pages[currentPage].buff.byteOffset+offsetOnPage,self1.pageSize-offsetOnPage),indexEndOfString=dataArray.findIndex(element=>0===element);(endOfStringFound=-1!==indexEndOfString)?(str+=new TextDecoder().decode(dataArray.slice(0,indexEndOfString)),self1.pos=currentPage*this.pageSize+offsetOnPage+indexEndOfString+1):(str+=new TextDecoder().decode(dataArray),self1.pos=currentPage*this.pageSize+offsetOnPage+dataArray.length),self1.pages[currentPage].pendingOps--,self1.__statusPage("After Op done: ",currentPage),currentPosition=self1.pos,currentPage++,self1.pendingLoads.length>0&&setImmediate(self1._triggerLoad.bind(self1))}return str}}function createNew(o){let initialSize=o.initialSize||1048576,fd=new MemFile;return fd.o=o,fd.o.data=new Uint8Array(initialSize),fd.allocSize=initialSize,fd.totalSize=0,fd.readOnly=!1,fd.pos=0,fd}function readExisting(o){let fd=new MemFile;return fd.o=o,fd.allocSize=o.data.byteLength,fd.totalSize=o.data.byteLength,fd.readOnly=!0,fd.pos=0,fd}function readWriteExisting(o){let fd=new MemFile;return fd.o=o,fd.allocSize=o.data.byteLength,fd.totalSize=o.data.byteLength,fd.readOnly=!1,fd.pos=0,fd}let tmpBuff32=new Uint8Array(4),tmpBuff32v=new DataView(tmpBuff32.buffer),tmpBuff64=new Uint8Array(8),tmpBuff64v=new DataView(tmpBuff64.buffer);class MemFile{constructor(){this.pageSize=16384}_resizeIfNeeded(newLen){if(newLen>this.allocSize){let newAllocSize=Math.max(this.allocSize+1048576,Math.floor(1.1*this.allocSize),newLen),newData=new Uint8Array(newAllocSize);newData.set(this.o.data),this.o.data=newData,this.allocSize=newAllocSize}}async write(buff,pos){let self1=this;if(void 0===pos&&(pos=self1.pos),this.readOnly)throw Error("Writing a read only file");this._resizeIfNeeded(pos+buff.byteLength),this.o.data.set(buff.slice(),pos),pos+buff.byteLength>this.totalSize&&(this.totalSize=pos+buff.byteLength),this.pos=pos+buff.byteLength}async readToBuffer(buffDest,offset,len,pos){let self1=this;if(void 0===pos&&(pos=self1.pos),this.readOnly&&pos+len>this.totalSize)throw Error("Reading out of bounds");this._resizeIfNeeded(pos+len);let buffSrc=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+pos,len);buffDest.set(buffSrc,offset),this.pos=pos+len}async read(len,pos){let self1=this,buff=new Uint8Array(len);return await self1.readToBuffer(buff,0,len,pos),buff}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(v,pos){let self1=this;tmpBuff32v.setUint32(0,v,!0),await self1.write(tmpBuff32,pos)}async writeUBE32(v,pos){let self1=this;tmpBuff32v.setUint32(0,v,!1),await self1.write(tmpBuff32,pos)}async writeULE64(v,pos){let self1=this;tmpBuff64v.setUint32(0,4294967295&v,!0),tmpBuff64v.setUint32(4,Math.floor(v/4294967296),!0),await self1.write(tmpBuff64,pos)}async readULE32(pos){let self1=this,b=await self1.read(4,pos),view=new Uint32Array(b.buffer);return view[0]}async readUBE32(pos){let self1=this,b=await self1.read(4,pos),view=new DataView(b.buffer);return view.getUint32(0,!1)}async readULE64(pos){let self1=this,b=await self1.read(8,pos),view=new Uint32Array(b.buffer);return 4294967296*view[1]+view[0]}async readString(pos){let self1=this,currentPosition=void 0===pos?self1.pos:pos;if(currentPosition>this.totalSize){if(this.readOnly)throw Error("Reading out of bounds");this._resizeIfNeeded(pos)}let dataArray=new Uint8Array(self1.o.data.buffer,currentPosition,this.totalSize-currentPosition),indexEndOfString=dataArray.findIndex(element=>0===element),str="";return -1!==indexEndOfString?(str=new TextDecoder().decode(dataArray.slice(0,indexEndOfString)),self1.pos=currentPosition+indexEndOfString+1):self1.pos=currentPosition,str}}let index_browser_PAGE_SIZE=4194304;function createNew$1(o){let initialSize=o.initialSize||0,fd=new BigMemFile;fd.o=o;let nPages=initialSize?Math.floor((initialSize-1)/index_browser_PAGE_SIZE)+1:0;fd.o.data=[];for(let i=0;i<nPages-1;i++)fd.o.data.push(new Uint8Array(index_browser_PAGE_SIZE));return nPages&&fd.o.data.push(new Uint8Array(initialSize-index_browser_PAGE_SIZE*(nPages-1))),fd.totalSize=0,fd.readOnly=!1,fd.pos=0,fd}function readExisting$1(o){let fd=new BigMemFile;return fd.o=o,fd.totalSize=(o.data.length-1)*index_browser_PAGE_SIZE+o.data[o.data.length-1].byteLength,fd.readOnly=!0,fd.pos=0,fd}function readWriteExisting$1(o){let fd=new BigMemFile;return fd.o=o,fd.totalSize=(o.data.length-1)*index_browser_PAGE_SIZE+o.data[o.data.length-1].byteLength,fd.readOnly=!1,fd.pos=0,fd}let tmpBuff32$1=new Uint8Array(4),tmpBuff32v$1=new DataView(tmpBuff32$1.buffer),tmpBuff64$1=new Uint8Array(8),tmpBuff64v$1=new DataView(tmpBuff64$1.buffer);class BigMemFile{constructor(){this.pageSize=16384}_resizeIfNeeded(newLen){if(newLen<=this.totalSize)return;if(this.readOnly)throw Error("Reading out of file bounds");let nPages=Math.floor((newLen-1)/index_browser_PAGE_SIZE)+1;for(let i=Math.max(this.o.data.length-1,0);i<nPages;i++){let newSize=i<nPages-1?index_browser_PAGE_SIZE:newLen-(nPages-1)*index_browser_PAGE_SIZE,p=new Uint8Array(newSize);i==this.o.data.length-1&&p.set(this.o.data[i]),this.o.data[i]=p}this.totalSize=newLen}async write(buff,pos){let self1=this;if(void 0===pos&&(pos=self1.pos),this.readOnly)throw Error("Writing a read only file");this._resizeIfNeeded(pos+buff.byteLength);let firstPage=Math.floor(pos/index_browser_PAGE_SIZE),p=firstPage,o=pos%index_browser_PAGE_SIZE,r=buff.byteLength;for(;r>0;){let l=o+r>index_browser_PAGE_SIZE?index_browser_PAGE_SIZE-o:r,srcView=buff.slice(buff.byteLength-r,buff.byteLength-r+l),dstView=new Uint8Array(self1.o.data[p].buffer,o,l);dstView.set(srcView),r-=l,p++,o=0}this.pos=pos+buff.byteLength}async readToBuffer(buffDst,offset,len,pos){let self1=this;if(void 0===pos&&(pos=self1.pos),this.readOnly&&pos+len>this.totalSize)throw Error("Reading out of bounds");this._resizeIfNeeded(pos+len);let firstPage=Math.floor(pos/index_browser_PAGE_SIZE),p=firstPage,o=pos%index_browser_PAGE_SIZE,r=len;for(;r>0;){let l=o+r>index_browser_PAGE_SIZE?index_browser_PAGE_SIZE-o:r,srcView=new Uint8Array(self1.o.data[p].buffer,o,l);buffDst.set(srcView,offset+len-r),r-=l,p++,o=0}this.pos=pos+len}async read(len,pos){let self1=this,buff=new Uint8Array(len);return await self1.readToBuffer(buff,0,len,pos),buff}close(){}async discard(){}async writeULE32(v,pos){let self1=this;tmpBuff32v$1.setUint32(0,v,!0),await self1.write(tmpBuff32$1,pos)}async writeUBE32(v,pos){let self1=this;tmpBuff32v$1.setUint32(0,v,!1),await self1.write(tmpBuff32$1,pos)}async writeULE64(v,pos){let self1=this;tmpBuff64v$1.setUint32(0,4294967295&v,!0),tmpBuff64v$1.setUint32(4,Math.floor(v/4294967296),!0),await self1.write(tmpBuff64$1,pos)}async readULE32(pos){let self1=this,b=await self1.read(4,pos),view=new Uint32Array(b.buffer);return view[0]}async readUBE32(pos){let self1=this,b=await self1.read(4,pos),view=new DataView(b.buffer);return view.getUint32(0,!1)}async readULE64(pos){let self1=this,b=await self1.read(8,pos),view=new Uint32Array(b.buffer);return 4294967296*view[1]+view[0]}async readString(pos){let self1=this,fixedSize=2048,currentPosition=void 0===pos?self1.pos:pos;if(currentPosition>this.totalSize){if(this.readOnly)throw Error("Reading out of bounds");this._resizeIfNeeded(pos)}let endOfStringFound=!1,str="";for(;!endOfStringFound;){let currentPage=Math.floor(currentPosition/index_browser_PAGE_SIZE),offsetOnPage=currentPosition%index_browser_PAGE_SIZE;if(void 0===self1.o.data[currentPage])throw Error("ERROR");let readLength=Math.min(fixedSize,self1.o.data[currentPage].length-offsetOnPage),dataArray=new Uint8Array(self1.o.data[currentPage].buffer,offsetOnPage,readLength),indexEndOfString=dataArray.findIndex(element=>0===element);(endOfStringFound=-1!==indexEndOfString)?(str+=new TextDecoder().decode(dataArray.slice(0,indexEndOfString)),self1.pos=currentPage*index_browser_PAGE_SIZE+offsetOnPage+indexEndOfString+1):(str+=new TextDecoder().decode(dataArray),self1.pos=currentPage*index_browser_PAGE_SIZE+offsetOnPage+dataArray.length),currentPosition=self1.pos}return str}}let DEFAULT_CACHE_SIZE=65536,DEFAULT_PAGE_SIZE=8192;async function createOverride(o,b,c){if("string"==typeof o&&(o={type:"file",fileName:o,cacheSize:b||DEFAULT_CACHE_SIZE,pageSize:c||DEFAULT_PAGE_SIZE}),"file"==o.type)return await index_browser_open(o.fileName,constants.O_TRUNC|constants.O_CREAT|constants.O_RDWR,o.cacheSize,o.pageSize);if("mem"==o.type)return createNew(o);if("bigMem"==o.type)return createNew$1(o);throw Error("Invalid FastFile type: "+o.type)}function createNoOverride(o,b,c){if("string"==typeof o&&(o={type:"file",fileName:o,cacheSize:b||DEFAULT_CACHE_SIZE,pageSize:c||DEFAULT_PAGE_SIZE}),"file"==o.type)return index_browser_open(o.fileName,constants.O_TRUNC|constants.O_CREAT|constants.O_RDWR|constants.O_EXCL,o.cacheSize,o.pageSize);if("mem"==o.type)return createNew(o);if("bigMem"==o.type)return createNew$1(o);throw Error("Invalid FastFile type: "+o.type)}async function readExisting$2(o,b,c){if(o instanceof Uint8Array&&(o={type:"mem",data:o}),"string"==typeof o){let buff=await fetch(o).then(function(res){return res.arrayBuffer()}).then(function(ab){return new Uint8Array(ab)});o={type:"mem",data:buff}}if("file"==o.type)return await index_browser_open(o.fileName,constants.O_RDONLY,o.cacheSize,o.pageSize);if("mem"==o.type)return await readExisting(o);if("bigMem"==o.type)return await readExisting$1(o);throw Error("Invalid FastFile type: "+o.type)}function readWriteExisting$2(o,b,c){if("string"==typeof o&&(o={type:"file",fileName:o,cacheSize:b||DEFAULT_CACHE_SIZE,pageSize:c||DEFAULT_PAGE_SIZE}),"file"==o.type)return index_browser_open(o.fileName,constants.O_CREAT|constants.O_RDWR,o.cacheSize,o.pageSize);if("mem"==o.type)return readWriteExisting(o);if("bigMem"==o.type)return readWriteExisting$1(o);throw Error("Invalid FastFile type: "+o.type)}function readWriteExistingOrCreate(o,b,c){if("string"==typeof o&&(o={type:"file",fileName:o,cacheSize:b||DEFAULT_CACHE_SIZE,pageSize:c||DEFAULT_PAGE_SIZE}),"file"==o.type)return index_browser_open(o.fileName,constants.O_CREAT|constants.O_RDWR|constants.O_EXCL,o.cacheSize);if("mem"==o.type)return readWriteExisting(o);if("bigMem"==o.type)return readWriteExisting$1(o);throw Error("Invalid FastFile type: "+o.type)}main.createNoOverride=createNoOverride;var createOverride_1=main.createOverride=createOverride,readExisting_1=main.readExisting=readExisting$2;main.readWriteExisting=readWriteExisting$2,main.readWriteExistingOrCreate=readWriteExistingOrCreate,Object.defineProperty(main$1,"__esModule",{value:!0});var ffjavascript=require$$0$1,fastFile__namespace=function(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(k){if("default"!==k){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:function(){return e[k]}})}}),n.default=e,Object.freeze(n)}(main);async function readBinFile(fileName,type,maxVersion,cacheSize,pageSize){let fd=await fastFile__namespace.readExisting(fileName,cacheSize,pageSize),b=await fd.read(4),readedType="";for(let i=0;i<4;i++)readedType+=String.fromCharCode(b[i]);if(readedType!=type)throw Error(fileName+": Invalid File format");if(await fd.readULE32()>maxVersion)throw Error("Version not supported");let nSections=await fd.readULE32(),sections=[];for(let i1=0;i1<nSections;i1++){let ht=await fd.readULE32(),hl=await fd.readULE64();void 0===sections[ht]&&(sections[ht]=[]),sections[ht].push({p:fd.pos,size:hl}),fd.pos+=hl}return{fd,sections}}async function createBinFile(fileName,type,version,nSections,cacheSize,pageSize){let fd=await fastFile__namespace.createOverride(fileName,cacheSize,pageSize),buff=new Uint8Array(4);for(let i=0;i<4;i++)buff[i]=type.charCodeAt(i);return await fd.write(buff,0),await fd.writeULE32(version),await fd.writeULE32(nSections),fd}async function startWriteSection(fd,idSection){if(void 0!==fd.writingSection)throw Error("Already writing a section");await fd.writeULE32(idSection),fd.writingSection={pSectionSize:fd.pos},await fd.writeULE64(0)}async function endWriteSection(fd){if(void 0===fd.writingSection)throw Error("Not writing a section");let sectionSize=fd.pos-fd.writingSection.pSectionSize-8,oldPos=fd.pos;fd.pos=fd.writingSection.pSectionSize,await fd.writeULE64(sectionSize),fd.pos=oldPos,delete fd.writingSection}async function startReadUniqueSection(fd,sections,idSection){if(void 0!==fd.readingSection)throw Error("Already reading a section");if(!sections[idSection])throw Error(fd.fileName+": Missing section "+idSection);if(sections[idSection].length>1)throw Error(fd.fileName+": Section Duplicated "+idSection);fd.pos=sections[idSection][0].p,fd.readingSection=sections[idSection][0]}async function endReadSection(fd,noCheck){if(void 0===fd.readingSection)throw Error("Not reading a section");if(!noCheck&&fd.pos-fd.readingSection.p!=fd.readingSection.size)throw Error("Invalid section size reading");delete fd.readingSection}async function writeBigInt(fd,n,n8,pos){let buff=new Uint8Array(n8);ffjavascript.Scalar.toRprLE(buff,0,n,n8),await fd.write(buff,pos)}async function readBigInt(fd,n8,pos){let buff=await fd.read(n8,pos);return ffjavascript.Scalar.fromRprLE(buff,0,n8)}async function copySection(fdFrom,sections,fdTo,sectionId,size){void 0===size&&(size=sections[sectionId][0].size);let chunkSize=fdFrom.pageSize;await startReadUniqueSection(fdFrom,sections,sectionId),await startWriteSection(fdTo,sectionId);for(let p=0;p<size;p+=chunkSize){let l=Math.min(size-p,chunkSize),buff=await fdFrom.read(l);await fdTo.write(buff)}await endWriteSection(fdTo),await endReadSection(fdFrom,size!=sections[sectionId][0].size)}async function readSection(fd,sections,idSection,offset,length){let buff;if(offset=void 0===offset?0:offset,length=void 0===length?sections[idSection][0].size-offset:length,offset+length>sections[idSection][0].size)throw Error("Reading out of the range of the section");return await fd.readToBuffer(buff=length<1073741824?new Uint8Array(length):new ffjavascript.BigBuffer(length),0,length,sections[idSection][0].p+offset),buff}async function sectionIsEqual(fd1,sections1,fd2,sections2,idSection){let MAX_BUFF_SIZE=16*fd1.pageSize;if(await startReadUniqueSection(fd1,sections1,idSection),await startReadUniqueSection(fd2,sections2,idSection),sections1[idSection][0].size!=sections2[idSection][0].size)return!1;let totalBytes=sections1[idSection][0].size;for(let i=0;i<totalBytes;i+=MAX_BUFF_SIZE){let n=Math.min(totalBytes-i,MAX_BUFF_SIZE),buff1=await fd1.read(n),buff2=await fd2.read(n);for(let j=0;j<n;j++)if(buff1[j]!=buff2[j])return!1}return await endReadSection(fd1),await endReadSection(fd2),!0}main$1.copySection=copySection;var createBinFile_1=main$1.createBinFile=createBinFile,endReadSection_1=main$1.endReadSection=endReadSection,endWriteSection_1=main$1.endWriteSection=endWriteSection,readBigInt_1=main$1.readBigInt=readBigInt,readBinFile_1=main$1.readBinFile=readBinFile,readSection_1=main$1.readSection=readSection;main$1.sectionIsEqual=sectionIsEqual;var startReadUniqueSection_1=main$1.startReadUniqueSection=startReadUniqueSection,startWriteSection_1=main$1.startWriteSection=startWriteSection,writeBigInt_1=main$1.writeBigInt=writeBigInt;function index_browser_log2(V){return((4294901760&V)!=0?(V&=4294901760,16):0)|((4278255360&V)!=0?(V&=4278255360,8):0)|((4042322160&V)!=0?(V&=4042322160,4):0)|((3435973836&V)!=0?(V&=3435973836,2):0)|(2863311530&V)!=0}function readG1(fd,curve,toObject){return __awaiter(this,void 0,void 0,function(){var buff,res;return __generator(this,function(_a){switch(_a.label){case 0:return[4,fd.read(2*curve.G1.F.n8)];case 1:return buff=_a.sent(),res=curve.G1.fromRprLEM(buff,0),[2,toObject?curve.G1.toObject(res):res]}})})}function readG2(fd,curve,toObject){return __awaiter(this,void 0,void 0,function(){var buff,res;return __generator(this,function(_a){switch(_a.label){case 0:return[4,fd.read(2*curve.G2.F.n8)];case 1:return buff=_a.sent(),res=curve.G2.fromRprLEM(buff,0),[2,toObject?curve.G2.toObject(res):res]}})})}function readHeaderGroth16(fd,sections,toObject){var _a;return __awaiter(this,void 0,void 0,function(){var zkey,n8q,_b,n8r,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p;return __generator(this,function(_q){switch(_q.label){case 0:return(zkey={}).protocol="groth16",[4,startReadUniqueSection_1(fd,sections,2)];case 1:return _q.sent(),[4,fd.readULE32()];case 2:return n8q=_q.sent(),zkey.n8q=n8q,_b=zkey,[4,readBigInt_1(fd,n8q)];case 3:return _b.q=_q.sent(),[4,fd.readULE32()];case 4:return n8r=_q.sent(),zkey.n8r=n8r,_c=zkey,[4,readBigInt_1(fd,n8r)];case 5:if(_c.r=_q.sent(),_d=zkey,!(null!==(_a=globalThis.curve_bn128)&&void 0!==_a))return[3,6];return _e=_a,[3,8];case 6:return[4,bn128_buildBn128(void 0,void 0)];case 7:_e=_q.sent(),_q.label=8;case 8:return _d.curve=_e,_f=zkey,[4,fd.readULE32()];case 9:return _f.nVars=_q.sent(),_g=zkey,[4,fd.readULE32()];case 10:return _g.nPublic=_q.sent(),_h=zkey,[4,fd.readULE32()];case 11:return _h.domainSize=_q.sent(),zkey.power=index_browser_log2(zkey.domainSize),_j=zkey,[4,readG1(fd,zkey.curve,toObject)];case 12:return _j.vk_alpha_1=_q.sent(),_k=zkey,[4,readG1(fd,zkey.curve,toObject)];case 13:return _k.vk_beta_1=_q.sent(),_l=zkey,[4,readG2(fd,zkey.curve,toObject)];case 14:return _l.vk_beta_2=_q.sent(),_m=zkey,[4,readG2(fd,zkey.curve,toObject)];case 15:return _m.vk_gamma_2=_q.sent(),_o=zkey,[4,readG1(fd,zkey.curve,toObject)];case 16:return _o.vk_delta_1=_q.sent(),_p=zkey,[4,readG2(fd,zkey.curve,toObject)];case 17:return _p.vk_delta_2=_q.sent(),[4,endReadSection_1(fd)];case 18:return _q.sent(),[2,zkey]}})})}function readHeader$1(fd,sections,toObject){return __awaiter(this,void 0,void 0,function(){var protocolId;return __generator(this,function(_a){switch(_a.label){case 0:return[4,startReadUniqueSection_1(fd,sections,1)];case 1:return _a.sent(),[4,fd.readULE32()];case 2:return protocolId=_a.sent(),[4,endReadSection_1(fd)];case 3:if(_a.sent(),1===protocolId)return[2,readHeaderGroth16(fd,sections,toObject)];throw Error("Protocol not supported: ")}})})}function writeBin(fd,witnessBin,prime){return __awaiter(this,void 0,void 0,function(){var n8;return __generator(this,function(_a){switch(_a.label){case 0:return[4,startWriteSection_1(fd,1)];case 1:return _a.sent(),n8=(Math.floor((main_Scalar.bitLength(prime)-1)/64)+1)*8,[4,fd.writeULE32(n8)];case 2:return _a.sent(),[4,writeBigInt_1(fd,prime,n8)];case 3:if(_a.sent(),witnessBin.byteLength%n8!=0)throw Error("Invalid witness length");return[4,fd.writeULE32(witnessBin.byteLength/n8)];case 4:case 7:return _a.sent(),[4,endWriteSection_1(fd)];case 5:return _a.sent(),[4,startWriteSection_1(fd,2)];case 6:return _a.sent(),[4,fd.write(witnessBin)];case 8:return _a.sent(),[2]}})})}function readHeader(fd,sections){return __awaiter(this,void 0,void 0,function(){var n8,q,nWitness;return __generator(this,function(_a){switch(_a.label){case 0:return[4,startReadUniqueSection_1(fd,sections,1)];case 1:return _a.sent(),[4,fd.readULE32()];case 2:return[4,readBigInt_1(fd,n8=_a.sent())];case 3:return q=_a.sent(),[4,fd.readULE32()];case 4:return nWitness=_a.sent(),[4,endReadSection_1(fd)];case 5:return _a.sent(),[2,{n8:n8,q:q,nWitness:nWitness}]}})})}var unstringifyBigInts$2=main_utils.unstringifyBigInts;function wtnsCalculate(_input,wasmFileName,wtnsFileName){return __awaiter(this,void 0,void 0,function(){var input,fdWasm,wasm,wc,w,fdWtns;return __generator(this,function(_a){switch(_a.label){case 0:return input=unstringifyBigInts$2(_input),[4,readExisting_1(wasmFileName)];case 1:return[4,(fdWasm=_a.sent()).read(fdWasm.totalSize)];case 2:return wasm=_a.sent(),[4,fdWasm.close()];case 3:return _a.sent(),[4,builder(wasm)];case 4:if(1!=(wc=_a.sent()).circom_version())return[3,9];return[4,wc.calculateBinWitness(input)];case 5:return w=_a.sent(),[4,createBinFile_1(wtnsFileName,"wtns",2,2)];case 6:return[4,writeBin(fdWtns=_a.sent(),w,wc.prime)];case 7:case 12:return _a.sent(),[4,fdWtns.close()];case 8:return _a.sent(),[3,14];case 9:return[4,createOverride_1(wtnsFileName)];case 10:return fdWtns=_a.sent(),[4,wc.calculateWTNSBin(input)];case 11:return w=_a.sent(),[4,fdWtns.write(w)];case 13:_a.sent(),_a.label=14;case 14:return[2]}})})}var index_browser_stringifyBigInts=main_utils.stringifyBigInts,unstringifyBigInts$1=main_utils.unstringifyBigInts;function buildABC1(curve,zkey,witness,coeffs){return __awaiter(this,void 0,void 0,function(){var n8,sCoef,nCoef,outBuffA,outBuffB,outBuffC,outBuf,i,buffCoef,buffCoefV,m,c,s,coef;return __generator(this,function(_a){for(i=0,n8=curve.Fr.n8,sCoef=12+zkey.n8r,nCoef=(coeffs.byteLength-4)/sCoef,outBuffA=new BigBuffer(zkey.domainSize*n8),outBuffB=new BigBuffer(zkey.domainSize*n8),outBuffC=new BigBuffer(zkey.domainSize*n8),outBuf=[outBuffA,outBuffB];i<nCoef;i++)buffCoef=coeffs.slice(4+i*sCoef,4+i*sCoef+sCoef),m=(buffCoefV=new DataView(buffCoef.buffer)).getUint32(0,!0),c=buffCoefV.getUint32(4,!0),s=buffCoefV.getUint32(8,!0),coef=buffCoef.slice(12,12+n8),outBuf[m].set(curve.Fr.add(outBuf[m].slice(c*n8,c*n8+n8),curve.Fr.mul(coef,witness.slice(s*n8,s*n8+n8))),c*n8);for(i=0;i<zkey.domainSize;i++)outBuffC.set(curve.Fr.mul(outBuffA.slice(i*n8,i*n8+n8),outBuffB.slice(i*n8,i*n8+n8)),i*n8);return[2,[outBuffA,outBuffB,outBuffC]]})})}function joinABC(curve,_zkey,a,b,c){return __awaiter(this,void 0,void 0,function(){var MAX_CHUNK_SIZE,n8,nElements,promises,i,n,task,aChunk,bChunk,cChunk,result,outBuff,p;return __generator(this,function(_a){switch(_a.label){case 0:for(i=0,MAX_CHUNK_SIZE=4194304,n8=curve.Fr.n8,nElements=Math.floor(a.byteLength/curve.Fr.n8),promises=[];i<nElements;i+=MAX_CHUNK_SIZE)n=Math.min(nElements-i,MAX_CHUNK_SIZE),task=[],aChunk=a.slice(i*n8,(i+n)*n8),bChunk=b.slice(i*n8,(i+n)*n8),cChunk=c.slice(i*n8,(i+n)*n8),task.push({cmd:"ALLOCSET",var:0,buff:aChunk}),task.push({cmd:"ALLOCSET",var:1,buff:bChunk}),task.push({cmd:"ALLOCSET",var:2,buff:cChunk}),task.push({cmd:"ALLOC",var:3,len:n*n8}),task.push({cmd:"CALL",fnName:"qap_joinABC",params:[{var:0},{var:1},{var:2},{val:n},{var:3}]}),task.push({cmd:"CALL",fnName:"frm_batchFromMontgomery",params:[{var:3},{val:n},{var:3}]}),task.push({cmd:"GET",out:0,var:3,len:n*n8}),promises.push(curve.tm.queueAction(task));return[4,Promise.all(promises)];case 1:for(i=0,result=_a.sent(),outBuff=a instanceof BigBuffer?new BigBuffer(a.byteLength):new Uint8Array(a.byteLength),p=0;i<result.length;i++)outBuff.set(result[i][0],p),p+=result[i][0].byteLength;return[2,outBuff]}})})}function prove(input,wasmFile,zkeyFile){return __awaiter(this,void 0,void 0,function(){var witnessFileName,_a,fdWtns,sectionsWtns,wtns,_b,fdZKey,sectionsZKey,zkey,curve,Fr,G1,G2,power,buffWitness,_c,buffA_T,buffB_T,buffC_T,inc,buffA,buffAodd,buffAodd_T,buffB,buffBodd,buffBodd_T,buffC,buffCodd,buffPodd_T,proof,buffBasesA,_d,buffBasesB1,pib1,buffBasesB2,_e,buffBasesC,_f,buffBasesH,resH,r,s,publicSignals,i,b;return __generator(this,function(_g){switch(_g.label){case 0:return[4,wtnsCalculate(input=unstringifyBigInts$1(input),wasmFile,witnessFileName={type:"mem"})];case 1:return _g.sent(),[4,readBinFile_1(witnessFileName,"wtns",2,33554432,8388608)];case 2:return[4,readHeader(fdWtns=(_a=_g.sent()).fd,sectionsWtns=_a.sections)];case 3:return wtns=_g.sent(),[4,readBinFile_1(zkeyFile,"zkey",2,33554432,8388608)];case 4:return[4,readHeader$1(fdZKey=(_b=_g.sent()).fd,sectionsZKey=_b.sections,void 0)];case 5:if("groth16"!==(zkey=_g.sent()).protocol)throw Error("zkey file is not groth16");if(!main_Scalar.eq(zkey.r,wtns.q))throw Error("Curve of the witness does not match the curve of the proving key");if(wtns.nWitness!==zkey.nVars)throw Error("Invalid witness length. Circuit: ".concat(zkey.nVars,", witness: ").concat(wtns.nWitness));return Fr=(curve=zkey.curve).Fr,G1=curve.G1,G2=curve.G2,power=index_browser_log2(zkey.domainSize),[4,readSection_1(fdWtns,sectionsWtns,2)];case 6:return buffWitness=_g.sent(),[4,readSection_1(fdZKey,sectionsZKey,4)];case 7:return[4,buildABC1(curve,zkey,buffWitness,_g.sent())];case 8:return buffA_T=(_c=_g.sent())[0],buffB_T=_c[1],buffC_T=_c[2],inc=power==Fr.s?curve.Fr.shift:curve.Fr.w[power+1],[4,Fr.ifft(buffA_T,"","",void 0,"IFFT_A")];case 9:return buffA=_g.sent(),[4,Fr.batchApplyKey(buffA,Fr.e(1),inc)];case 10:return buffAodd=_g.sent(),[4,Fr.fft(buffAodd,"","",void 0,"FFT_A")];case 11:return buffAodd_T=_g.sent(),[4,Fr.ifft(buffB_T,"","",void 0,"IFFT_B")];case 12:return buffB=_g.sent(),[4,Fr.batchApplyKey(buffB,Fr.e(1),inc)];case 13:return buffBodd=_g.sent(),[4,Fr.fft(buffBodd,"","",void 0,"FFT_B")];case 14:return buffBodd_T=_g.sent(),[4,Fr.ifft(buffC_T,"","",void 0,"IFFT_C")];case 15:return buffC=_g.sent(),[4,Fr.batchApplyKey(buffC,Fr.e(1),inc)];case 16:return buffCodd=_g.sent(),[4,Fr.fft(buffCodd,"","",void 0,"FFT_C")];case 17:return[4,joinABC(curve,zkey,buffAodd_T,buffBodd_T,_g.sent())];case 18:return buffPodd_T=_g.sent(),proof={},[4,readSection_1(fdZKey,sectionsZKey,5)];case 19:return buffBasesA=_g.sent(),_d=proof,[4,curve.G1.multiExpAffine(buffBasesA,buffWitness,void 0,"multiexp A")];case 20:return _d.pi_a=_g.sent(),[4,readSection_1(fdZKey,sectionsZKey,6)];case 21:return buffBasesB1=_g.sent(),[4,curve.G1.multiExpAffine(buffBasesB1,buffWitness,void 0,"multiexp B1")];case 22:return pib1=_g.sent(),[4,readSection_1(fdZKey,sectionsZKey,7)];case 23:return buffBasesB2=_g.sent(),_e=proof,[4,curve.G2.multiExpAffine(buffBasesB2,buffWitness,void 0,"multiexp B2")];case 24:return _e.pi_b=_g.sent(),[4,readSection_1(fdZKey,sectionsZKey,8)];case 25:return buffBasesC=_g.sent(),_f=proof,[4,curve.G1.multiExpAffine(buffBasesC,buffWitness.slice((zkey.nPublic+1)*curve.Fr.n8),void 0,"multiexp C")];case 26:return _f.pi_c=_g.sent(),[4,readSection_1(fdZKey,sectionsZKey,9)];case 27:return buffBasesH=_g.sent(),[4,curve.G1.multiExpAffine(buffBasesH,buffPodd_T,void 0,"multiexp H")];case 28:for(i=1,resH=_g.sent(),r=curve.Fr.random(),s=curve.Fr.random(),proof.pi_a=G1.add(proof.pi_a,zkey.vk_alpha_1),proof.pi_a=G1.add(proof.pi_a,G1.timesFr(zkey.vk_delta_1,r)),proof.pi_b=G2.add(proof.pi_b,zkey.vk_beta_2),proof.pi_b=G2.add(proof.pi_b,G2.timesFr(zkey.vk_delta_2,s)),pib1=G1.add(pib1,zkey.vk_beta_1),pib1=G1.add(pib1,G1.timesFr(zkey.vk_delta_1,s)),proof.pi_c=G1.add(proof.pi_c,resH),proof.pi_c=G1.add(proof.pi_c,G1.timesFr(proof.pi_a,s)),proof.pi_c=G1.add(proof.pi_c,G1.timesFr(pib1,r)),proof.pi_c=G1.add(proof.pi_c,G1.timesFr(zkey.vk_delta_1,Fr.neg(Fr.mul(r,s)))),publicSignals=[];i<=zkey.nPublic;i++)b=buffWitness.slice(i*Fr.n8,i*Fr.n8+Fr.n8),publicSignals.push(main_Scalar.fromRprLE(b,void 0,void 0));return proof.pi_a=G1.toObject(G1.toAffine(proof.pi_a)),proof.pi_b=G2.toObject(G2.toAffine(proof.pi_b)),proof.pi_c=G1.toObject(G1.toAffine(proof.pi_c)),proof.protocol="groth16",proof.curve=curve.name,[4,fdZKey.close()];case 29:return _g.sent(),[4,fdWtns.close()];case 30:return _g.sent(),[2,{proof:proof=index_browser_stringifyBigInts(proof),publicSignals:publicSignals=index_browser_stringifyBigInts(publicSignals)}]}})})}main_utils.unstringifyBigInts}}]);